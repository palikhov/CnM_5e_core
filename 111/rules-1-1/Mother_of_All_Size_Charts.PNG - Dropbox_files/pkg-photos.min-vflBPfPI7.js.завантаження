define("dropbox/proto/js_init_data/photos_web/photos_web",["require","exports","tslib","protobufjs/minimal","dropbox/proto/js_init_data/web_timing_logger/web_timing_logger"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.photos_web=void 0;var i,r=(n=o.__importStar(n)).Reader,a=n.Writer,s=(n.util,n.roots.default||(n.roots.default={}));t.default=s,t.photos_web=s.photos_web=((i=s.photos_web||{}).PhotosTimelinePageProps=(function(e){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.itemCount=0,e.prototype.blockHash="",e.prototype.isWebPhotosMultishare=!1,e.prototype.webTimingLoggerServerContext=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.itemCount&&Object.hasOwnProperty.call(e,"itemCount")&&t.uint32(8).int64(e.itemCount),null!=e.blockHash&&Object.hasOwnProperty.call(e,"blockHash")&&t.uint32(18).string(e.blockHash),null!=e.isWebPhotosMultishare&&Object.hasOwnProperty.call(e,"isWebPhotosMultishare")&&t.uint32(24).bool(e.isWebPhotosMultishare),null!=e.webTimingLoggerServerContext&&Object.hasOwnProperty.call(e,"webTimingLoggerServerContext")&&s.web_timing_logger.WebTimingLoggerServerContext.encode(e.webTimingLoggerServerContext,t.uint32(34).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var o=void 0===t?e.len:e.pos+t,n=new s.photos_web.PhotosTimelinePageProps;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:n.itemCount=e.int64();break;case 2:n.blockHash=e.string();break;case 3:n.isWebPhotosMultishare=e.bool();break;case 4:n.webTimingLoggerServerContext=s.web_timing_logger.WebTimingLoggerServerContext.decode(e,e.uint32());break;default:e.skipType(7&i)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/photos_web.PhotosTimelinePageProps"},e})(i.PhotosTimelinePageProps||{}),i)})),define("modules/clean/logging/hive/schemas/web-photos_web_events",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebPhotosWebEventLoggingTableRow=void 0;var o=function(e){this.category="web-photos_web_events",this.user_id=null,this.team_id=null,this.session_id=null,this.anon_ip=null,this.country=null,this.url=null,this.ua_browser_name=null,this.ua_browser_version=null,this.locale_user_selected=null,this.timestamp=e.timestamp,this.event_name=e.event_name,this.event_action=e.event_action,this.event_object=e.event_object,this.action_surface=e.action_surface,this.platform="web",this.device_type=e.device_type,this.browser_lang=e.browser_lang,this.browser_width=e.browser_width,this.browser_height=e.browser_height,this.device_width=e.device_width,this.device_height=e.device_height,this.extras=e.extras,Object.seal(this)};t.WebPhotosWebEventLoggingTableRow=o})),define("modules/clean/react/photos/logging/logging_context",["require","exports","react"],(function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useWebPhotosLogger=t.LoggingProvider=t.LoggingContext=void 0;var n=Object.freeze({logWebPhotosEvent:function(){}});t.LoggingContext=o.createContext(n),t.LoggingProvider=t.LoggingContext.Provider,t.useWebPhotosLogger=function(){return o.useContext(t.LoggingContext).logWebPhotosEvent}})),define("modules/clean/react/photos/logging/photos_events_logger",["require","exports","tslib","modules/clean/logging/hive/schemas/web-photos_web_events","modules/clean/loggers/device_type","modules/clean/ts_utils","modules/clean/logging/telemetry","modules/clean/user_survey/user_survey"],(function(e,t,o,n,i,r,a,s){"use strict";var l,c,u;Object.defineProperty(t,"__esModule",{value:!0}),t.logWebPhotosEvent=t.WebPhotosEvent=t.hiveLogger=void 0,a=o.__importStar(a),t.hiveLogger=new a.HiveLogger,(function(e){e.shownPhotosPage="shown_photos_page",e.scrollPhotosPage="scroll_photos_page",e.selectPhotoThumbnail="select_photo_thumbnail",e.starPhotoThumbnail="star_photo_thumbnail",e.unstarPhotoThumbnail="unstar_photo_thumbnail",e.openPhotoPreview="open_photo_preview",e.openPhotoSecondaryMenu="open_photo_secondary_menu",e.selectPhotoSecondaryMenu="select_photo_secondary_menu",e.selectPhotoActionBar="select_photo_action_bar",e.selectPhotoGroupBy="select_photo_group_by",e.selectPhotoFilter="select_photo_filter",e.openSharingModal="open_sharing_modal",e.sharePhotos="share_photos"})(c=t.WebPhotosEvent||(t.WebPhotosEvent={})),(function(e){e.viewPhotosPage="view_photos_page",e.photosInteraction="photos_interaction"})(u||(u={}));var d=((l={})[c.scrollPhotosPage]=["scrollDepth"],l[c.selectPhotoThumbnail]=["thumbnailSelectCount"],l[c.selectPhotoSecondaryMenu]=["secondaryMenuSelection"],l[c.selectPhotoActionBar]=["actionBarSelection","itemCount"],l[c.selectPhotoGroupBy]=["groupBySelection"],l[c.selectPhotoFilter]=["filterSelection"],l[c.sharePhotos]=["itemCount"],l);t.logWebPhotosEvent=function(e,a){var l=o.__assign(o.__assign({timestamp:Date.now(),event_name:e},(function(e){switch(e){case c.shownPhotosPage:return{event_action:"shown",event_object:"photos_page",action_surface:"web_photos"};case c.scrollPhotosPage:return{event_action:"scroll",event_object:"photos_page",action_surface:"web_photos"};case c.selectPhotoThumbnail:return{event_action:"select",event_object:"photo_thumbnail",action_surface:"web_photos"};case c.starPhotoThumbnail:return{event_action:"star",event_object:"photo_thumbnail",action_surface:"web_photos"};case c.unstarPhotoThumbnail:return{event_action:"unstar",event_object:"photo_thumbnail",action_surface:"web_photos"};case c.openPhotoPreview:return{event_action:"open",event_object:"photo_preview",action_surface:"web_photos"};case c.openPhotoSecondaryMenu:return{event_action:"open",event_object:"photo_secondary_menu",action_surface:"web_photos"};case c.selectPhotoSecondaryMenu:return{event_action:"select",event_object:"photo_secondary_menu",action_surface:"web_photos"};case c.selectPhotoActionBar:return{event_action:"select",event_object:"photo_action_bar",action_surface:"web_photos"};case c.selectPhotoGroupBy:return{event_action:"select",event_object:"photo_group_by",action_surface:"web_photos"};case c.selectPhotoFilter:return{event_action:"select",event_object:"photo_filter",action_surface:"web_photos"};case c.openSharingModal:return{event_action:"open",event_object:"photo_share_modal",action_surface:"web_photos"};case c.sharePhotos:return{event_action:"share",event_object:"photo_thumbnail",action_surface:"web_photos"};default:r.enforceExhaustive(e)}})(e)),{device_type:i.getDeviceType(),browser_lang:window.navigator.language,browser_width:window.innerWidth,browser_height:window.innerHeight,device_width:window.screen.width,device_height:window.screen.height});if(a&&(function(e){return e in d})(e)){l.extras={};for(var h=0,p=d[e];h<p.length;h++){var f=p[h],m=a[f];"string"==typeof m&&(l.extras[f]=m)}}t.hiveLogger.log(new n.WebPhotosWebEventLoggingTableRow(l));var _=(function(e){switch(e){case c.shownPhotosPage:return u.viewPhotosPage;case c.scrollPhotosPage:return null;default:return u.photosInteraction}})(e);_&&s.UserSurvey.trackEvent(_,"photos")}})),define("modules/clean/react/photos/timeline_grid/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PHOTOS_FILE_VIEWER_ELEMENT_ID=t.WEB_PHOTOS_EXCEPTION_TAG=t.AMP_PHOTOS_LOAD_ITEMS_LATENCY=t.AMP_PHOTOS_NAMESPACE_NAME=void 0,t.AMP_PHOTOS_NAMESPACE_NAME="web_photos",t.AMP_PHOTOS_LOAD_ITEMS_LATENCY="load_items/latency",t.WEB_PHOTOS_EXCEPTION_TAG="web_photos",t.PHOTOS_FILE_VIEWER_ELEMENT_ID="photos-file-viewer-container"})),define("modules/clean/react/photos/timeline_grid/data/actions",["require","exports","tslib","modules/core/exception","api_v2/user_client","modules/clean/active_user","modules/clean/metrics/index","modules/clean/react/home/resource_id_types","modules/clean/react/photos/timeline_grid/constants","modules/clean/react/photos/timeline_grid/data/types","modules/clean/redux/namespaces"],(function(e,t,o,n,i,r,a,s,l,c,u){"use strict";function d(e){var t=e.state,o=e.hasMoreData,n=e.error,i=e.apiName,r={state:t,error:n};return void 0!==o&&(r.hasMoreData=o),{type:c.ActionTypes.SET_API_STATE,payload:{apiStatus:r,apiName:i}}}function h(e){return{type:c.ActionTypes.SET_SHARE_LINK_ACTION,payload:{shareLink:e}}}function p(e){return{type:c.ActionTypes.SET_SHARE_LINK_STATUS_ACTION,payload:{shareLinkStatus:e}}}function f(e){return{type:c.ActionTypes.UPDATE_FAVORITES_ACTION,payload:{update:e}}}Object.defineProperty(t,"__esModule",{value:!0}),t.updateFavorites=t.setShareLinkStatus=t.setShareLink=t.fetchShareLink=t.setUser=t.setVisibleTopSectionIndex=t.setSelection=t.setGridSize=t.setGrouping=t.setFilter=t.removeItems=t.setApiState=t.toggleFavorite=t.loadFavorites=t.loadItems=void 0,n=o.__importStar(n),t.loadItems=function e(t,s){var u=this;return function(h,p){return o.__awaiter(u,void 0,void 0,(function(){var u,p;return o.__generator(this,(function(o){return u=r.mustGetActiveUserId(),p=new i.UserApiV2Client,s||(s=a.getMetricsReporter().createTimer({ns:l.AMP_PHOTOS_NAMESPACE_NAME,name:l.AMP_PHOTOS_LOAD_ITEMS_LATENCY})),h(d({apiName:c.ApiTypes.DELTA,state:c.ApiState.FETCH})),p.ns("photos").rpc("delta",{cursor:t,get_extra_file_metadata:!0,include_thumbnail_url:!0},{subjectUserId:u}).then((function(t){t.entries&&t.entries.length&&h({type:c.ActionTypes.LOAD_ITEMS_ACTION,payload:{items:t.entries}}),h(d({apiName:c.ApiTypes.DELTA,state:c.ApiState.SUCCESS,hasMoreData:t.has_more})),t.has_more?h(e(t.cursor,s)):s&&s.record()})).catch((function(e){h(d({apiName:c.ApiTypes.DELTA,state:c.ApiState.ERROR,error:e})),n.reportException({err:e,severity:n.SEVERITY.NON_CRITICAL,tags:[l.WEB_PHOTOS_EXCEPTION_TAG]})})),[2]}))}))}},t.loadFavorites=function(t,n){var i=this;return function(r,a){return o.__awaiter(i,void 0,void 0,(function(){return o.__generator(this,(function(i){switch(i.label){case 0:return[4,new Promise((function(t,o){e(["modules/clean/react/starred/browse_exports"],t,o)})).then(o.__importStar)];case 1:return(0,i.sent().checkForMissingStarredData)({items:n.toArray(),user:t}),[2]}}))}))}},t.toggleFavorite=function(t,i){var r=this;return function(a,d){return o.__awaiter(r,void 0,void 0,(function(){var r,h,p,m,_,g,v,S,T;return o.__generator(this,(function(E){switch(E.label){case 0:return r=d()[u.PHOTOS_TIMELINE_NAMESPACE_KEY],h=(null==r?void 0:r.favorites)||{},p=s.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID+":"+i,m=!!h[p],_=!m,a({type:c.ActionTypes.TOGGLE_FAVORITES_ACTION,payload:{fileId:i,isFavorite:_}}),[4,new Promise((function(t,o){e(["modules/clean/react/starred/browse_exports"],t,o)})).then(o.__importStar)];case 1:g=E.sent(),v=g.StarredActions,S=g.StarredStore,E.label=2;case 2:return E.trys.push([2,4,,5]),[4,v.update(t.role,i,s.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID,_)];case 3:return E.sent(),a(f(S.getAllStarredPairStrings())),[3,5];case 4:return T=E.sent(),a({type:c.ActionTypes.TOGGLE_FAVORITES_ACTION,payload:{fileId:i,isFavorite:m}}),n.reportException({err:T,severity:n.SEVERITY.NON_CRITICAL,tags:[l.WEB_PHOTOS_EXCEPTION_TAG]}),[3,5];case 5:return[2]}}))}))}},t.setApiState=d,t.removeItems=function(e){return{type:c.ActionTypes.REMOVE_ITEMS_ACTION,payload:{fileIds:e}}},t.setFilter=function(e){return{type:c.ActionTypes.SET_FILTER_ACTION,payload:{filter:e}}},t.setGrouping=function(e){return{type:c.ActionTypes.SET_GROUPING_ACTION,payload:{grouping:e}}},t.setGridSize=function(e){return{type:c.ActionTypes.SET_GRID_SIZE_ACTION,payload:{gridSize:e}}},t.setSelection=function(e){return{type:c.ActionTypes.SET_SELECTION_ACTION,payload:{selection:e}}},t.setVisibleTopSectionIndex=function(e){return{type:c.ActionTypes.SET_VISIBLE_TOP_SECTION_INDEX_ACTION,payload:{index:e}}},t.setUser=function(e){return{type:c.ActionTypes.SET_USER_ACTION,payload:{user:e}}},t.fetchShareLink=function(e){var t=this;return function(a,s){return o.__awaiter(t,void 0,void 0,(function(){var t;return o.__generator(this,(function(o){return a({type:c.ActionTypes.SET_SHARE_LINK_STATUS_ACTION,payload:{shareLinkStatus:c.ShareLinkStatus.Loading}}),a(d({apiName:c.ApiTypes.SHARE,state:c.ApiState.FETCH})),t=r.mustGetActiveUserId(),(new i.UserApiV2Client).ns("photos").rpc("share",{file_ids:e},{subjectUserId:t}).then((function(e){a(d({apiName:c.ApiTypes.SHARE,state:c.ApiState.SUCCESS})),e.share_link&&(a(h(e.share_link)),a(p(c.ShareLinkStatus.Created)),navigator.clipboard.writeText(e.share_link))})).catch((function(e){a(p(c.ShareLinkStatus.Errored)),a(d({apiName:c.ApiTypes.SHARE,state:c.ApiState.ERROR,error:e})),n.reportException({err:e,severity:n.SEVERITY.NON_CRITICAL,tags:[l.WEB_PHOTOS_EXCEPTION_TAG]})})),[2]}))}))}},t.setShareLink=h,t.setShareLinkStatus=p,t.updateFavorites=f})),define("modules/clean/react/photos/timeline_grid/data/reducer",["require","exports","tslib","immutable","modules/clean/react/photos/timeline_grid/data/types","photos/filter-bar/index","modules/clean/ts_utils","modules/clean/react/selection","modules/clean/react/browse/models","modules/clean/react/home/resource_id_types"],(function(e,t,o,n,i,r,a,s,l,c){"use strict";var u,d;Object.defineProperty(t,"__esModule",{value:!0}),t.photosReducer=t.defaultState=void 0,n=o.__importStar(n);var h=((u={})[r.PhotoGrouping.DAYS]=1,u[r.PhotoGrouping.MONTHS]=2,u[r.PhotoGrouping.YEARS]=3,u);t.defaultState={items:n.List(),filteredItems:n.List(),sections:{sectionLabels:[],sectionStartIndices:[]},filter:r.PhotoFilter.ALL,grouping:r.PhotoGrouping.MONTHS,gridSize:r.PhotoGridSize.MEDIUM,selection:s.createSelection(),visibleTopSectionIndex:0,context:new l.BrowseContext,favorites:{},shareLink:"",shareLinkStatus:i.ShareLinkStatus.None,favoritesLoaded:!1,apiStatus:(d={},d[i.ApiTypes.DELTA]={state:i.ApiState.DEFAULT,pagesLoaded:0},d[i.ApiTypes.SHARE]={state:i.ApiState.DEFAULT,pagesLoaded:0},d)};var p=function(e,t,o){var n=[],i=[],r=void 0;return e.forEach((function(e,a){var s,l=null===(s=e.metadata)||void 0===s?void 0:s.media_metadata;if(l){var c=new Date(l.date_taken||l.date_created);i.length&&f(t,c,i[i.length-1])||(i.push(c),n.push(a),void 0===r&&o&&f(t,c,o)&&(r=i.length-1))}})),{sections:{sectionLabels:i,sectionStartIndices:n},visibleTopSectionIndex:null!=r?r:0}},f=function(e,t,o){switch(e){case r.PhotoGrouping.YEARS:return t.getFullYear()===o.getFullYear();case r.PhotoGrouping.MONTHS:return t.getFullYear()===o.getFullYear()&&t.getMonth()===o.getMonth();case r.PhotoGrouping.DAYS:return t.getFullYear()===o.getFullYear()&&t.getMonth()===o.getMonth()&&t.getDate()===o.getDate();default:a.throwEnforceExhaustive(e)}},m=function(e,t,o){if(o===r.PhotoFilter.ALL)return e;var i=e.filter((function(e){var n,i,a,s=null!==(a=null===(i=null===(n=e.metadata)||void 0===n?void 0:n.media_metadata.media_type)||void 0===i?void 0:i[".tag"])&&void 0!==a?a:"other";switch(o){case r.PhotoFilter.PHOTOS:return"photo"===s;case r.PhotoFilter.VIDEOS:return"video"===s;case r.PhotoFilter.STARRED:return t[c.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID+":"+e.file_obj_id];default:return!0}}));return n.List(i)},_=function(e,t){var n=t.payload.grouping,i=(function(e,t,o){var n=h[t]-h[o];return Math.min(Math.max(e+n,r.PhotoGridSize.EXTRA_SMALL),r.PhotoGridSize.EXTRA_LARGE)})(e.gridSize,e.grouping,n),a=e.sections.sectionLabels&&e.sections.sectionLabels[e.visibleTopSectionIndex],s=p(e.filteredItems,n,a),l=s.sections,c=s.visibleTopSectionIndex;return o.__assign(o.__assign({},e),{sections:l,grouping:n,gridSize:i,visibleTopSectionIndex:c})},g=function(e,t){var n=m(e.items,e.favorites,t),i=e.sections.sectionLabels&&e.sections.sectionLabels[e.visibleTopSectionIndex],r=p(n,e.grouping,i),a=r.sections,s=r.visibleTopSectionIndex;return o.__assign(o.__assign({},e),{filteredItems:n,sections:a,filter:t,visibleTopSectionIndex:s})};t.photosReducer=function(e,n){switch(void 0===e&&(e=t.defaultState),n.type){case i.ActionTypes.LOAD_ITEMS_ACTION:return(function(e,t){var n=t.payload.items,i=e.items.concat(n).sort((function(e,t){var o,n,i,r,a=(null===(o=e.metadata)||void 0===o?void 0:o.media_metadata.date_taken)||(null===(n=e.metadata)||void 0===n?void 0:n.media_metadata.date_created)||"";return((null===(i=t.metadata)||void 0===i?void 0:i.media_metadata.date_taken)||(null===(r=t.metadata)||void 0===r?void 0:r.media_metadata.date_created)||"").localeCompare(a)})),r=m(i,e.favorites,e.filter),a=e.sections.sectionLabels&&e.sections.sectionLabels[e.visibleTopSectionIndex],s=p(r,e.grouping,a),l=s.sections,c=s.visibleTopSectionIndex;return o.__assign(o.__assign({},e),{items:i,filteredItems:r,sections:l,visibleTopSectionIndex:c})})(e,n);case i.ActionTypes.SET_GROUPING_ACTION:return _(e,n);case i.ActionTypes.SET_GRID_SIZE_ACTION:return(function(e,t){var n=t.payload.gridSize;return o.__assign(o.__assign({},e),{gridSize:n})})(e,n);case i.ActionTypes.SET_SELECTION_ACTION:return(function(e,t){var n=t.payload.selection;return o.__assign(o.__assign({},e),{selection:n})})(e,n);case i.ActionTypes.SET_FILTER_ACTION:return g(e,n.payload.filter);case i.ActionTypes.SET_VISIBLE_TOP_SECTION_INDEX_ACTION:return o.__assign(o.__assign({},e),{visibleTopSectionIndex:n.payload.index});case i.ActionTypes.SET_USER_ACTION:return(function(e,t){var n=t.payload.user;return o.__assign(o.__assign({},e),{user:n})})(e,n);case i.ActionTypes.TOGGLE_FAVORITES_ACTION:return(function(e,t){var n,i=t.payload,a=i.fileId,s=i.isFavorite,l=o.__assign(o.__assign({},e.favorites),((n={})[c.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID+":"+a]=s,n)),u=o.__assign(o.__assign({},e),{favorites:l});return e.filter===r.PhotoFilter.STARRED?g(u,e.filter):u})(e,n);case i.ActionTypes.REMOVE_ITEMS_ACTION:return(function(e,t){var n=t.payload.fileIds,i=e.items.filter((function(e){return!n.includes(e.file_obj_id)})),r=e.selection.update("selected",(function(e){return e.subtract(n)})),a=o.__assign(o.__assign({},e),{items:i,selection:r});return g(a,e.filter)})(e,n);case i.ActionTypes.SET_SHARE_LINK_ACTION:return(function(e,t){var n=t.payload.shareLink;return o.__assign(o.__assign({},e),{shareLink:n})})(e,n);case i.ActionTypes.SET_SHARE_LINK_STATUS_ACTION:return(function(e,t){var n=t.payload.shareLinkStatus;return o.__assign(o.__assign({},e),{shareLinkStatus:n})})(e,n);case i.ActionTypes.UPDATE_FAVORITES_ACTION:return(function(e,t){var n=t.payload.update,i=n.reduce((function(e,t){return e[t]=!0,e}),{}),a=o.__assign(o.__assign({},e),{favorites:i,favoritesLoaded:e.favoritesLoaded||n.length>0});return e.filter===r.PhotoFilter.STARRED?g(a,e.filter):a})(e,n);case i.ActionTypes.SET_API_STATE:return(function(e,t){var n,r=t.payload,a=r.apiStatus,s=r.apiName,l=e.apiStatus[s].pagesLoaded;return o.__assign(o.__assign({},e),{apiStatus:o.__assign(o.__assign({},e.apiStatus),(n={},n[s]=o.__assign(o.__assign(o.__assign({},e.apiStatus[s]),a),{pagesLoaded:a.state===i.ApiState.SUCCESS?l+1:l}),n))})})(e,n);default:return e}}})),define("modules/clean/react/photos/timeline_grid/data/selectors",["require","exports","tslib","immutable","reselect","modules/clean/redux/namespaces","modules/clean/react/browse/models","modules/clean/react/photos/timeline_grid/data/types","modules/clean/redux/selectors","photos/filter-bar/index"],(function(e,t,o,n,i,r,a,s,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getShowLoadingState=t.getSelectedMediaSize=t.selectedFiles=t.getFilteredFiles=t.getAllFiles=t.getContext=t.getUser=t.getShareLinkStatus=t.getShareLink=t.getVisibleTopSectionIndex=t.getFavoritesLoaded=t.getDeltaApiStatus=t.getFavorites=t.getSelection=t.getGridSize=t.getGrouping=t.getFilter=t.getSections=t.getItems=t.getAllItems=t.getPhotosTimelineState=void 0,n=o.__importStar(n),t.getPhotosTimelineState=function(e){return l.getStateAtNamespace(e,r.PHOTOS_TIMELINE_NAMESPACE_KEY)},t.getAllItems=function(e){return t.getPhotosTimelineState(e).items},t.getItems=function(e){return t.getPhotosTimelineState(e).filteredItems},t.getSections=function(e){return t.getPhotosTimelineState(e).sections},t.getFilter=function(e){return t.getPhotosTimelineState(e).filter},t.getGrouping=function(e){return t.getPhotosTimelineState(e).grouping},t.getGridSize=function(e){return t.getPhotosTimelineState(e).gridSize},t.getSelection=function(e){return t.getPhotosTimelineState(e).selection},t.getFavorites=function(e){return t.getPhotosTimelineState(e).favorites},t.getDeltaApiStatus=function(e){return t.getPhotosTimelineState(e).apiStatus[s.ApiTypes.DELTA]},t.getFavoritesLoaded=function(e){return t.getPhotosTimelineState(e).favoritesLoaded},t.getVisibleTopSectionIndex=function(e){return t.getPhotosTimelineState(e).visibleTopSectionIndex},t.getShareLink=function(e){return t.getPhotosTimelineState(e).shareLink},t.getShareLinkStatus=function(e){return t.getPhotosTimelineState(e).shareLinkStatus},t.getUser=function(e){return t.getPhotosTimelineState(e).user},t.getContext=function(e){return t.getPhotosTimelineState(e).context},t.getAllFiles=i.createSelector(t.getAllItems,(function(e){return n.OrderedMap(e.filter((function(e){var t;return!!(null===(t=e.metadata)||void 0===t?void 0:t.extra_file_metadata)&&!!e.file_obj_id})).map((function(e){var t;return[e.file_obj_id,a.File.fromApiV2Object(null===(t=e.metadata)||void 0===t?void 0:t.extra_file_metadata)]})))})),t.getFilteredFiles=i.createSelector(t.getAllFiles,t.getItems,(function(e,t){return n.List(t.map((function(t){return e.get((null==t?void 0:t.file_obj_id)||"")})).filter((function(e){return!!e})))})),t.selectedFiles=i.createSelector(t.getAllFiles,t.getSelection,(function(e,t){return u(e,t)}));var u=function(e,t){return n.OrderedMap(t.selected.toArray().map((function(t){return[t,e.get(t)]})).filter((function(e){e[0];return!!e[1]})))};t.getSelectedMediaSize=i.createSelector(t.selectedFiles,(function(e){var t=0;return e.forEach((function(e){t+=e.bytes})),t})),t.getShowLoadingState=i.createSelector(t.getDeltaApiStatus,t.getFilter,t.getFavoritesLoaded,(function(e,t,o){var n=e.pagesLoaded,i=e.hasMoreData,r=!o&&i;return t===c.PhotoFilter.STARRED&&r||0===n}))})),define("modules/clean/react/photos/timeline_grid/data/store",["require","exports","modules/clean/react/photos/timeline_grid/data/reducer","modules/clean/redux/store","modules/clean/redux/namespaces"],(function(e,t,o,n,i){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.getStoreForPhotosTimeline=void 0,t.getStoreForPhotosTimeline=function(){var e;return r||(r=n.getStoreAndRegisterReducers(((e={})[i.PHOTOS_TIMELINE_NAMESPACE_KEY]=o.photosReducer,e))),r}})),define("modules/clean/react/photos/timeline_grid/data/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApiTypes=t.ApiState=t.ActionTypes=t.ShareLinkStatus=void 0,(function(e){e.None="NONE",e.Loading="LOADING",e.Created="CREATED",e.Errored="ERRORED"})(t.ShareLinkStatus||(t.ShareLinkStatus={})),(function(e){e.LOAD_ITEMS_ACTION="LOAD_ITEMS_ACTION",e.SET_FILTER_ACTION="SET_FILTER_ACTION",e.SET_GROUPING_ACTION="SET_GROUPING_ACTION",e.SET_GRID_SIZE_ACTION="SET_GRID_SIZE_ACTION",e.SET_SELECTION_ACTION="SET_SELECTION_ACTION",e.SET_VISIBLE_TOP_SECTION_INDEX_ACTION="SET_VISIBLE_TOP_SECTION_INDEX_ACTION",e.SET_USER_ACTION="SET_USER_ACTION",e.TOGGLE_FAVORITES_ACTION="TOGGLE_FAVORITES_ACTION",e.UPDATE_FAVORITES_ACTION="UPDATE_FAVORITES_ACTION",e.REMOVE_ITEMS_ACTION="REMOVE_ITEMS_ACTION",e.SET_SHARE_LINK_ACTION="SET_SHARE_LINK_ACTION",e.SET_SHARE_LINK_STATUS_ACTION="SET_SHARE_LINK_STATUS_ACTION",e.SET_API_STATE="SET_API_STATE"})(t.ActionTypes||(t.ActionTypes={})),(function(e){e.DEFAULT="DEFAULT",e.FETCH="FETCH",e.SUCCESS="SUCCESS",e.ERROR="ERROR"})(t.ApiState||(t.ApiState={})),(function(e){e.DELTA="delta",e.SHARE="share"})(t.ApiTypes||(t.ApiTypes={}))})),define("modules/clean/react/photos/timeline_grid/data/utils",["require","exports"],(function(e,t){"use strict";function o(e){return e<10?"0"+e:String(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.formatMediaDuration=void 0,t.formatMediaDuration=function(e){if(e&&Number.isFinite(e)&&!(e<=0)){var t=Math.round(e/1e3),n=t%60,i=Math.floor(t/60),r=i%60,a=Math.floor(i/60);return a?a+":"+o(r)+":"+o(n):r+":"+o(n)}}})),define("modules/clean/react/photos/timeline_grid/file_actions",["require","exports","tslib","dig-components/icons/src","modules/clean/downloads","modules/clean/react/action_bar/action_bar_strings","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","modules/clean/react/action_bar/file_actions/portable/delete/delete","modules/clean/react/file_viewer/async_controller","modules/clean/react/file_viewer/toggle_browse_elements_util","modules/clean/react/photos/timeline_grid/constants","modules/constants/python","modules/core/browser","modules/clean/browse_interface","modules/clean/react/action_bar/file_actions/portable/copy","modules/clean/react/action_bar/file_actions/portable/move","modules/clean/react/action_bar/file_actions/portable/delete/snackbars","modules/clean/filepath/filepath"],(function(e,t,o,n,i,r,a,s,l,c,u,d,h,p,f,m,_,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multipleItemsSelectedActionBarActions=t.singleItemSelectedActionBarActions=t.getActionHandlers=t.handleVersionHistory=t.handleOpen=t.handleMove=t.handleDelete=t.handleDownload=t.handleCopy=t.PHOTOS_SNACKBAR_ID=void 0,i=o.__importStar(i),h=o.__importStar(h),t.PHOTOS_SNACKBAR_ID="web-photos-snackbar-id",t.handleCopy=function(e){var t=e.user,o=e.firstFile,n=e.files.toArray().map((function(e){return{fq_path:e.fq_path,is_dir:e.is_dir}}));f.portableCopy({currentFQPath:g.parent_dir(o.fq_path),exceptions:{isOverFreeQuota:null,hasExcludedNsIds:null},filesPath:n,source:"photos",user:t,synchronousSingleFileActions:!1,createNewFolderInMoveDialog:!1})},t.handleDownload=function(e,t){var o=e.files,n=e.user;if(o.size>1){var r=o.toArray().map((function(e){return e.fq_path}));i.get_zip({fq_paths:r,subject_uid:n.id,block_hash:t,parent_path:"/",flat_zip_mode:!0})}else i.get({url:o.first().href})},t.handleDelete=function(e,o){var n=e.files,i=e.user,r=n.toArray(),a=r.map((function(e){return{fq_path:e.fq_path,is_dir:e.is_dir}})),l=r.map((function(e){return e.file_id})),c=a.length;s.portableDelete({user:i,filesPath:a,fq_path:n.first().fq_path},{onNetworkRequest:function(){return _.deleteSnackBarInProgress(t.PHOTOS_SNACKBAR_ID,c)},onSuccess:function(){o(l),_.deleteCompleteSnackBar(t.PHOTOS_SNACKBAR_ID,c)},onError:function(e){return _.deleteFailedSnackBar(e,t.PHOTOS_SNACKBAR_ID,c)}})},t.handleMove=function(e){var t=e.user,o=e.firstFile,n=e.files.toArray().map((function(e){return{fq_path:e.fq_path,is_dir:e.is_dir}}));m.portableMove({currentFQPath:g.parent_dir(o.fq_path),exceptions:{isOverFreeQuota:null,hasExcludedNsIds:null},filesPath:n,source:"photos",user:t,synchronousSingleFileActions:!1,createNewFolderInMoveDialog:!1})},t.handleOpen=function(e,t){var o=e.user,n=e.firstFile;l.asyncOpenPreview({containerId:u.PHOTOS_FILE_VIEWER_ELEMENT_ID,files:[n],indexOfPreviewFile:0,user:o,shouldFocusComment:t,updateBrowserLocation:!1,onFileViewerDidMount:c.hideElementsBehindFileViewer,onFileViewerUnmount:c.showElementsBehindFileViewer,fileViewAction:d.FileViewActionType.CLICK,fileViewOrigin:d.FileViewOriginType.PHOTOS,fileViewTarget:d.FileViewTargetType.PRIVATE})},t.handleVersionHistory=function(e){var t=e.user,o=e.firstFile,n=p.getFileHistoryUrl({fqPath:o.fq_path,userId:t.id});h.redirect(n)},t.getActionHandlers=function(e,o,n,i,r,s,l){var c=n.first(),u={user:i,context:o,files:n,firstFile:c};switch(e){case a.ActionBarActionTypes.COMMENT:t.handleOpen(u,!0);break;case a.ActionBarActionTypes.COPY:t.handleCopy(u);break;case a.ActionBarActionTypes.DOWNLOAD:t.handleDownload(u,r);break;case a.ActionBarActionTypes.DELETE:t.handleDelete(u,l);break;case a.ActionBarActionTypes.MOVE:t.handleMove(u);break;case a.ActionBarActionTypes.OPEN:t.handleOpen(u,!1);break;case a.ActionBarActionTypes.STAR:case a.ActionBarActionTypes.UNSTAR:1===n.size&&s(i,c.file_id);break;case a.ActionBarActionTypes.VERSION_HISTORY:t.handleVersionHistory(u)}};var v={actionType:a.ActionBarActionTypes.OPEN,isEnabled:!0,icon:n.OpenLine,text:r.OPEN_ACTION_STRING},S={actionType:a.ActionBarActionTypes.DOWNLOAD,isEnabled:!0,icon:n.DownloadLine,text:r.DOWNLOAD_ACTION_STRING},T={actionType:a.ActionBarActionTypes.MOVE,isEnabled:!0,icon:n.MoveLine,text:r.MOVE_ACTION_STRING},E={actionType:a.ActionBarActionTypes.COPY,isEnabled:!0,icon:n.CopyLine,text:r.COPY_ACTION_STRING},b={actionType:a.ActionBarActionTypes.DELETE,isEnabled:!0,icon:n.DeleteLine,text:r.DELETE_ACTION_STRING},I={actionType:a.ActionBarActionTypes.COMMENT,isEnabled:!0,icon:n.CommentLine,text:r.COMMENT_ACTION_STRING},y={actionType:a.ActionBarActionTypes.STAR,isEnabled:!0,icon:n.StarLine,text:r.STAR_ACTION_STRING},A={actionType:a.ActionBarActionTypes.UNSTAR,isEnabled:!0,icon:n.StarFill,text:r.UNSTAR_ACTION_STRING},P={actionType:a.ActionBarActionTypes.VERSION_HISTORY,isEnabled:!0,icon:n.ClockLine,text:r.VERSION_HISTORY_ACTION_STRING};t.singleItemSelectedActionBarActions=function(e){return{atTopLevelIfSpace:[v,S,T,E],alwaysInOverflow:[[v,S,T,E,b,I,e?A:y,P]]}},t.multipleItemsSelectedActionBarActions={atTopLevelIfSpace:[S,E,b],alwaysInOverflow:[[S,E,b]]}})),define("modules/clean/react/photos/timeline_grid/photo_header",["require","exports","tslib","react","modules/clean/react/selection","photos/photo-header/index","photos/filter-bar/index"],(function(e,t,o,n,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoHeader=t.PhotoHeaderContext=void 0,n=o.__importStar(n),t.PhotoHeaderContext=n.default.createContext({updateSelection:function(){},selection:i.createSelection(),sections:{sectionLabels:[],sectionStartIndices:[]},grouping:a.PhotoGrouping.MONTHS,itemIds:[]}),t.PhotoHeader=function(e){var o=e.label,i=e.index,a=n.useContext(t.PhotoHeaderContext),l=a.updateSelection,c=a.grouping,u=a.selection,d=a.sections,h=a.itemIds,p=d.sectionStartIndices[i],f=d.sectionStartIndices[i+1],m=void 0===f?h.length:f,_=s(u,h,p,m),g=n.useCallback((function(){_===r.SectionSelection.NONE?l(u.selected.union(h.slice(p,f)).toArray()):l(u.selected.subtract(h.slice(p,f)).toArray())}),[i,_,d,u]);return n.default.createElement(r.PhotoSectionHeader,{count:m-p,date:o,format:c,selection:_,onChange:g})},t.PhotoHeader.displayName="PhotoHeader";var s=function(e,t,o,n){for(var i=void 0,a=o;a<n;a++){var s=e.selected.has(t[a]);if(void 0===i)i=s;else if(s!==i)return r.SectionSelection.SOME}return i?r.SectionSelection.ALL:r.SectionSelection.NONE}})),define("modules/clean/react/photos/timeline_grid/photo_tile",["require","exports","tslib","react","modules/clean/react/icon/file_folder_icon","photos/photo-tile/index","modules/clean/react/photos/timeline_grid/data/utils","modules/clean/react/selectable_list","modules/clean/react/selection","modules/clean/react/photos/logging/photos_events_logger","modules/clean/react/photos/logging/logging_context"],(function(e,t,o,n,i,r,a,s,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoTile=t.PhotoTileContext=void 0,n=o.__importStar(n),t.PhotoTileContext=n.default.createContext({selection:l.createSelection(),actions:function(){},handleDeselect:function(){},handleSelect:function(){},handlePreview:function(){},handleFavorite:function(){},isFavorite:function(){},actionHandler:function(){}}),t.PhotoTile=function(e){var o,l,d=e.item,h=e.thumbnailSize,p=n.useContext(t.PhotoTileContext),f=p.selection,m=p.actions,_=p.handleDeselect,g=p.handleSelect,v=p.handlePreview,S=p.handleFavorite,T=p.isFavorite,E=p.actionHandler,b=u.useWebPhotosLogger(),I=d.file_obj_id||"",y=(null===(o=d.metadata)||void 0===o?void 0:o.media_metadata.thumbnail)||"",A=T(d.file_obj_id),P=n.useMemo((function(){return f.selected.has(I)}),[f,I]),w=n.useMemo((function(){return y&&i.getThumbnailUrlForItem(y,h,1)}),[y,h]),O=n.useCallback((function(e,t){switch(e){case r.InteractionEvent.SELECT:P?_(I,t.shiftKey):g(I,t.shiftKey?s.SelectOptions.EXTEND:s.SelectOptions.DEFAULT);break;case r.InteractionEvent.CLICK:v(I);break;case r.InteractionEvent.FAVORITE:S(I)}}),[P,_,g,I]),M=m(A),C=n.useCallback((function(e){b(c.WebPhotosEvent.selectPhotoSecondaryMenu,{secondaryMenuSelection:""+e}),E(e,d)}),[d,E,b]),x=n.useCallback((function(e){e.isOpen&&b(c.WebPhotosEvent.openPhotoSecondaryMenu)}),[b]);return n.default.createElement(r.PhotoTileMemo,{onUserInteraction:O,thumbnailUrl:w,duration:a.formatMediaDuration(null===(l=d.metadata)||void 0===l?void 0:l.media_metadata.duration),isSelected:P,isStarred:A,actions:M,overFlowActionHandler:C,menuToggleHandler:x})},t.PhotoTile.displayName="PhotoTile"})),define("modules/clean/react/photos/timeline_grid/photos_action_bar",["require","exports","tslib","react","react-redux","typescript/component_libraries/retrieval-components/src/simple-action-bar/index","modules/clean/react/photos/timeline_grid/data/actions","modules/clean/react/photos/timeline_grid/data/selectors","modules/clean/react/photos/timeline_grid/file_actions","modules/clean/react/photos/timeline_grid/data/types","modules/core/i18n","modules/clean/react/photos/logging/photos_events_logger","modules/clean/react/photos/logging/logging_context","photos/share-button/index"],(function(e,t,o,n,i,r,a,s,l,c,u,d,h,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotosActionBar=void 0,n=o.__importDefault(n),s=o.__importStar(s);var f=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actionHandler={handleAction:function(e){t.context.logWebPhotosEvent(d.WebPhotosEvent.selectPhotoActionBar,{actionBarSelection:""+e.type,itemCount:""+t.props.selectedFiles.count()}),l.getActionHandlers(e.type,t.props.context,t.props.selectedFiles,t.props.user,t.props.blockHash,t.props.toggleFavorite,t.props.removeItems)}},t}return o.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.favorites,o=e.selectedFiles;if(0===o.count())return null;var i=1===o.count()?l.singleItemSelectedActionBarActions(t[o.first().file_id]):l.multipleItemsSelectedActionBarActions;return n.default.createElement("div",{className:"photos-action-bar"},n.default.createElement(r.ActionBar,{className:"brws-action-toolbar-actionbar",responsive:!0,actionHandler:this.actionHandler,actions:i,intl:u.intl}),this.props.isWebPhotosMultishare&&n.default.createElement(p.ShareButton,{isLoading:this.props.shareLinkStatus===c.ShareLinkStatus.Loading,openShareLinkModal:this.props.openShareLinkModal}))},t.contextType=h.LoggingContext,t.displayName="PhotosActionBarController",t})(n.default.Component),m=i.connect((function(e){return{selectedFiles:s.selectedFiles(e),user:s.getUser(e),context:s.getContext(e),favorites:s.getFavorites(e),shareLinkStatus:s.getShareLinkStatus(e)}}),{toggleFavorite:a.toggleFavorite,removeItems:a.removeItems});t.PhotosActionBar=m(f)})),define("modules/clean/react/photos/timeline_grid/tile_grid",["require","exports","tslib","react","photos/loading-tile/index","photos/photo-header/index","photos/virtualized-grid/index","photos/scroll-spy/index","modules/clean/react/selectable_list","modules/clean/react/photos/timeline_grid/photo_tile","modules/clean/react/photos/timeline_grid/photo_header","modules/clean/react/photos/timeline_grid/zoom_levels","modules/clean/react/photos/logging/photos_events_logger","modules/clean/react/photos/logging/logging_context"],(function(e,t,o,n,i,r,a,s,l,c,u,d,h,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoTileGrid=void 0,n=o.__importStar(n),t.PhotoTileGrid=function(e){var t=e.items,o=e.sections,f=e.gridSize,m=e.grouping,_=e.overFlowActions,g=e.onTTI,v=void 0===g?function(){}:g,S=e.onSelectionChange,T=e.handlePreview,E=e.handleFavorite,b=e.selection,I=e.visibleTopSectionIndex,y=e.onVisibleTopSectionIndexChange,A=e.isFavorite,P=e.overFlowActionHandler,w=e.isLoading,O=e.loadingTilesCount,M=void 0===O?35:O;n.useEffect(v,[]);var C,x,L=n.useMemo((function(){return t.toArray().map((function(e){return(null==e?void 0:e.file_obj_id)||""}))}),[t]),R=n.useState(1),N=R[0],F=R[1],z=n.useRef(),k=n.useCallback((function(e){var t;null===(t=z.current)||void 0===t||t.scrollToSection(e),y(e)}),[z.current,y]),D=(C=p.useWebPhotosLogger(),x=n.useRef(0),n.useCallback((function(e){var t=Math.floor(e.scrollOffset/window.innerHeight);x.current<t&&(x.current=t,C(h.WebPhotosEvent.scrollPhotosPage,{scrollDepth:""+t}))}),[C])),H={sectionLabels:[new Date],sectionStartIndices:[0]};return n.default.createElement("div",{className:"photo-grid-wrapper"},n.default.createElement(l.SelectableList,{itemIds:L,keyScope:l.SELECTABLE_TILE_GRID_KEY_SCOPE,onSelectionChange:S,selection:b,tilesPerRow:N,sectionStartIndices:o.sectionStartIndices},(function(e){var s=e.handleDeselect,l=e.handleSelect,h=e.updateSelection;return n.default.createElement(u.PhotoHeaderContext.Provider,{value:{updateSelection:h,itemIds:L,grouping:m,selection:b,sections:w?H:o}},n.default.createElement(c.PhotoTileContext.Provider,{value:{handleDeselect:s,handleSelect:l,selection:b,handlePreview:T,handleFavorite:E,isFavorite:A,actions:_,actionHandler:P}},n.default.createElement(a.VirtualizedGrid,{items:w?Array(M).fill({}):t.toArray(),sections:w?H:o,minimumWidth:d.zoomLevels[f].width,thumbnailSize:d.zoomLevels[f].thumbnailSize,renderHeader:u.PhotoHeader,headerHeight:r.HeaderHeight,renderTile:w?i.LoadingTile:c.PhotoTile,overscanCount:20,tilesPerRow:N,onTilePerRowChange:F,onScroll:D,onScrollSection:y,gridRef:z})))})),n.default.createElement(s.TimelineScrollSpy,{items:o.sectionLabels,format:m,selectedIndex:I,onClick:k}))},t.PhotoTileGrid.displayName="PhotoTileGrid"})),define("modules/clean/react/photos/timeline_grid/timeline",["require","exports","tslib","immutable","react","react-intl","react-redux","classnames","modules/clean/active_user","modules/clean/browse_interface","modules/clean/bug_reporting/routing","modules/clean/pagelet_logger","modules/clean/react/browse/models","modules/clean/react/browse/selection_indicator","modules/clean/react/files_view/file_list_empty_folder_table","modules/clean/react/file_viewer/async_controller","modules/clean/react/file_viewer/toggle_browse_elements_util","modules/clean/react/maestro/layout/search","modules/clean/react/maestro/layout/header","modules/clean/react/photos/timeline_grid/constants","modules/clean/react/photos/timeline_grid/data/actions","modules/clean/react/photos/timeline_grid/data/selectors","modules/clean/react/photos/timeline_grid/data/types","modules/clean/react/photos/timeline_grid/data/store","modules/clean/react/photos/timeline_grid/file_actions","modules/clean/react/photos/timeline_grid/photos_action_bar","modules/clean/react/photos/timeline_grid/tile_grid","modules/clean/web_timing_logger","modules/constants/python","modules/core/i18n","photos/filter-bar/index","photos/share-modal/index","photos/share-snackbar/index","modules/clean/react/photos/logging/photos_events_logger","modules/clean/react/photos/logging/logging_context","modules/core/browser","modules/clean/display_format","modules/clean/react/home/resource_id_types","dropbox/proto/js_init_data/photos_web/photos_web","proto_utils/unpack","modules/clean/react/components/css"],(function(e,t,o,n,i,r,a,s,l,c,u,d,h,p,f,m,_,g,v,S,T,E,b,I,y,A,P,w,O,M,C,x,L,R,N,F,z,k,D,H,W){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._PhotosTimeline=t.RootComponent=t.PhotosTimelinePage=void 0,n=o.__importStar(n),i=o.__importDefault(i),s=o.__importDefault(s),w=o.__importStar(w);var G=(function(t){function a(e){var o=t.call(this,e)||this;return o.user=l.mustGetActiveUser(),o.handleTTI=function(){o.context.logWebPhotosEvent(R.WebPhotosEvent.shownPhotosPage),a.pageletLogger.componentReady("PhotosTimeline")},o.handleFilterChange=function(e){o.context.logWebPhotosEvent(R.WebPhotosEvent.selectPhotoFilter,{filterSelection:e}),o.props.setFilter(e)},o.handleGroupingChange=function(e){o.context.logWebPhotosEvent(R.WebPhotosEvent.selectPhotoGroupBy,{groupBySelection:e}),o.props.setGrouping(e)},o.handleGridSizeChange=function(e){o.props.setGridSize(e)},o.handleSelectionChange=function(e){o.context.logWebPhotosEvent(R.WebPhotosEvent.selectPhotoThumbnail,{thumbnailSelectCount:""+e.selected.size}),o.props.setSelection(e),o.props.setShareLinkStatus(b.ShareLinkStatus.None),o.props.setShareLink("")},o.getReadableSelectionSizeText=function(){var e=o.props.selectedMediaSize;return z.format_bytes(e)},o.generateShareLink=function(){o.closeModal();var e=o.props.selection.selected.toArray();o.context.logWebPhotosEvent(R.WebPhotosEvent.sharePhotos,{itemCount:""+e.length}),o.props.fetchShareLink(e)},o.openShareLink=function(){F.open_tab(o.props.shareLink)},o.openModal=function(){o.context.logWebPhotosEvent(R.WebPhotosEvent.openSharingModal),o.setState({modalOpen:!0})},o.closeModal=function(){o.setState({modalOpen:!1})},o.handleFavorite=function(e){o.context.logWebPhotosEvent(o.props.favorites[e]?R.WebPhotosEvent.unstarPhotoThumbnail:R.WebPhotosEvent.starPhotoThumbnail),o.props.toggleFavorite(o.user,e)},o.handlePreview=function(e){o.context.logWebPhotosEvent(R.WebPhotosEvent.openPhotoPreview);var t=o.props.filteredFiles,n=t.findIndex((function(t){return t.file_id===e}));m.asyncOpenPreview({containerId:S.PHOTOS_FILE_VIEWER_ELEMENT_ID,files:t.toArray(),indexOfPreviewFile:n,user:o.user,updateBrowserLocation:!1,onFileViewerDidMount:_.hideElementsBehindFileViewer,onFileViewerUnmount:function(){_.showElementsBehindFileViewer()},fileViewAction:O.FileViewActionType.CLICK,fileViewOrigin:O.FileViewOriginType.PHOTOS,fileViewTarget:O.FileViewTargetType.PRIVATE})},o.overFlowActionHandler=function(e,t){var i;y.getActionHandlers(e,o.props.context,n.List([h.File.fromApiV2Object(null===(i=t.metadata)||void 0===i?void 0:i.extra_file_metadata)]),o.props.user,o.props.blockHash,o.props.toggleFavorite,o.props.removeItems)},o.renderTitle=function(e){return i.default.createElement("div",{className:"photos-header"},i.default.createElement("div",{className:"photos-title"},i.default.createElement(v.MaestroHeaderTitle,null,M.intl.formatMessage({id:"yLLoZO",defaultMessage:"Photos"}))),i.default.createElement("div",{className:"photos-selection-view-container"},i.default.createElement(p.SelectionIndicator,{responsive:e,selectedFilesCount:o.props.selection.selected.size,rightRailCollapsed:!0,isInFamilyFolder:!1})))},o.renderAppContent=function(e){var t,n=o.props,r=n.itemCount,a=n.blockHash,s=n.items,l=n.sections,d=n.filter,h=n.grouping,p=n.gridSize,m=n.selection,_=n.visibleTopSectionIndex,g=n.favorites,v=n.shareLinkStatus,S=n.showLoadingState,T=o.props.selection.selected.count();return t=r?i.default.createElement(i.default.Fragment,null,i.default.createElement(x.ShareModal,{modalOpen:o.state.modalOpen,numSelectedItems:T,generateShareLink:o.generateShareLink,closeModal:o.closeModal,calculateReadableSelectionSize:o.getReadableSelectionSizeText}),i.default.createElement(A.PhotosActionBar,{blockHash:a,isWebPhotosMultishare:o.props.isWebPhotosMultishare,openShareLinkModal:o.openModal}),i.default.createElement(C.FilterBar,{filter:d,grouping:h,gridSize:p,onFilterChange:o.handleFilterChange,onGroupingChange:o.handleGroupingChange,onSizeChange:o.handleGridSizeChange,compact:!e.isMatchedLarge}),i.default.createElement(P.PhotoTileGrid,{key:"photo-tile-grid",items:s,isFavorite:function(e){return!!g[k.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID+":"+e]},sections:l,gridSize:p,grouping:h,onTTI:o.handleTTI,selection:m,onSelectionChange:o.handleSelectionChange,handlePreview:o.handlePreview,visibleTopSectionIndex:_,onVisibleTopSectionIndexChange:function(e){return o.props.setVisibleTopSectionIndex(e)},handleFavorite:o.handleFavorite,overFlowActions:y.singleItemSelectedActionBarActions,overFlowActionHandler:o.overFlowActionHandler,isLoading:S}),i.default.createElement(L.ShareSnackbar,{isCreated:v===b.ShareLinkStatus.Created,isErrored:v===b.ShareLinkStatus.Errored,openShareLink:o.openShareLink})):i.default.createElement(f.EmptyFolderTable,{onTTI:o.handleTTI,title:M.intl.formatMessage({id:"LSKEjD",defaultMessage:"You have no photos or videos"}),subtitle:M.intl.formatMessage({id:"/IY+3s",defaultMessage:"Add photos or videos to your Dropbox and theyâ€™ll appear here."}),subtitleLink:c.get_browse_root(o.user)}),i.default.createElement(u.RegisterComponentWithBugReporter,{componentId:"web.photos",componentName:"Photos"},i.default.createElement("div",{className:"photos-timeline"},t))},o.state={modalOpen:!1},o}return o.__extends(a,t),a.prototype.componentDidMount=function(){var t=this;this.mountFileViewerTarget(),w.log_js_modules_application_code_start(),this.props.setUser(this.user),this.props.itemCount&&this.props.loadItems(),new Promise((function(t,o){e(["modules/clean/react/starred/browse_exports"],t,o)})).then(o.__importStar).then((function(e){var o=e.StarredStore,n=o.addListener((function(){t.props.updateFavorites(o.getAllStarredPairStrings())}));t.removeStarredStoreListener=function(){n()}}))},a.prototype.componentDidUpdate=function(e){this.props.allFiles!==e.allFiles&&this.props.loadFavorites(this.user,this.props.allFiles)},a.prototype.componentWillUnmount=function(){this.unmountFileViewerTarget(),this.removeStarredStoreListener&&this.removeStarredStoreListener()},a.prototype.mountFileViewerTarget=function(){var e=document.getElementById(S.PHOTOS_FILE_VIEWER_ELEMENT_ID);e||((e=document.createElement("div")).id=S.PHOTOS_FILE_VIEWER_ELEMENT_ID,document.body.prepend(e))},a.prototype.unmountFileViewerTarget=function(){var e=document.getElementById(S.PHOTOS_FILE_VIEWER_ELEMENT_ID);e&&document.body.removeChild(e)},a.prototype.render=function(){return i.default.createElement(r.RawIntlProvider,{value:M.intl},i.default.createElement(g.SearchChrome,{user:l.mustGetActiveUser(),titleRegion:this.renderTitle,searchBarProps:{searchVariant:"full-page"},embeddedAppRegion:this.renderAppContent,chromeClass:s.default("dig2--enabled","photos-grid-chrome"),useMaestroPortal:!0}))},a.pageletLogger=new d.PageletLogger("photos_page",["PhotosTimeline"]),a.contextType=N.LoggingContext,a.displayName="UnconnectedPhotosTimeline",a})(i.default.Component);t._PhotosTimeline=G;var B=a.connect((function(e){return{items:E.getItems(e),allFiles:E.getAllFiles(e),sections:E.getSections(e),filter:E.getFilter(e),grouping:E.getGrouping(e),gridSize:E.getGridSize(e),selection:E.getSelection(e),visibleTopSectionIndex:E.getVisibleTopSectionIndex(e),user:E.getUser(e),filteredFiles:E.getFilteredFiles(e),favorites:E.getFavorites(e),context:E.getContext(e),shareLink:E.getShareLink(e),shareLinkStatus:E.getShareLinkStatus(e),selectedMediaSize:E.getSelectedMediaSize(e),showLoadingState:E.getShowLoadingState(e)}}),{loadItems:T.loadItems,loadFavorites:T.loadFavorites,removeItems:T.removeItems,setFilter:T.setFilter,setGrouping:T.setGrouping,setGridSize:T.setGridSize,setSelection:T.setSelection,setVisibleTopSectionIndex:T.setVisibleTopSectionIndex,setUser:T.setUser,toggleFavorite:T.toggleFavorite,fetchShareLink:T.fetchShareLink,setShareLink:T.setShareLink,setShareLinkStatus:T.setShareLinkStatus,updateFavorites:T.updateFavorites})(G);t.PhotosTimelinePage=W.requireCssWithComponent(B,["/static/css/photos/photos-vflh18qZo.css"]);var V=I.getStoreForPhotosTimeline();t.RootComponent=function(e){var n=H.unpackProto(e.encodedProto,D.photos_web.PhotosTimelinePageProps);return n.webTimingLoggerServerContext&&w.initialize({log_time_to_view:!0,log_time_to_interactive:!0},n.webTimingLoggerServerContext),i.default.createElement(a.Provider,{store:V},i.default.createElement(N.LoggingProvider,{value:{logWebPhotosEvent:R.logWebPhotosEvent}},i.default.createElement(t.PhotosTimelinePage,o.__assign({},n))))}})),define("modules/clean/react/photos/timeline_grid/zoom_levels",["require","exports","photos/filter-bar/index"],(function(e,t,o){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.zoomLevels=void 0;t.zoomLevels=((n={})[o.PhotoGridSize.EXTRA_SMALL]={width:80,thumbnailSize:256},n[o.PhotoGridSize.SMALL]={width:100,thumbnailSize:256},n[o.PhotoGridSize.MEDIUM]={width:150,thumbnailSize:256},n[o.PhotoGridSize.LARGE]={width:200,thumbnailSize:512},n[o.PhotoGridSize.EXTRA_LARGE]={width:400,thumbnailSize:512},n)})),define("photos/loading-tile/index",["require","exports","tslib","react","dig-components/progress_indicators","react-intl"],(function(e,t,o,n,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingTile=void 0,n=o.__importDefault(n),t.LoadingTile=function(){var e=r.useIntl().formatMessage({id:"WaMtfr",defaultMessage:"Loading Photo"});return n.default.createElement("div",{className:"loading-tile"},n.default.createElement(i.Spinner,{"aria-valuetext":e,size:"xsmall"}))}})),define("photos/share-button/index",["require","exports","tslib","react","react-intl","dig-components/buttons","dig-components/typography","dig-components/icons","dig-components/icons/src"],(function(e,t,o,n,i,r,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareButton=void 0,n=o.__importDefault(n),t.ShareButton=function(e){var t,o=e.isLoading,c=e.openShareLinkModal,u={shareButtonText:(t=i.useIntl()).formatMessage({id:"0WmBsM",defaultMessage:"Share Link"}),accessText:t.formatMessage({id:"SPOVai",defaultMessage:"Only you have access"})},d=u.shareButtonText,h=u.accessText;return n.default.createElement(n.default.Fragment,null,n.default.createElement(r.Button,{variant:"outline","data-testid":"ShareButton",withIconLeft:n.default.createElement(s.UIIcon,{src:l.LinkLine}),onClick:function(){c()},disabled:o,isLoading:o},d),n.default.createElement(a.Text,{tagName:"p",color:"faint"},h))},t.ShareButton.displayName="ShareButton"})),define("photos/share-modal/index",["require","exports","tslib","react","react-intl","dig-components/buttons","dig-components/modal","dig-components/typography","dig-components/icons","dig-components/icons/src"],(function(e,t,o,n,i,r,a,s,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModal=void 0,n=o.__importDefault(n),t.ShareModal=function(e){var t=e.modalOpen,o=e.numSelectedItems,u=e.generateShareLink,d=e.closeModal,h=e.calculateReadableSelectionSize,p=(function(e){var t=i.useIntl();return{headerMessage:t.formatMessage({id:"FHXjfu",defaultMessage:"{num, plural, one{# item} other{# items}}"},{num:e}),shareText:t.formatMessage({id:"L1WxZI",defaultMessage:"Share a link"}),permissionsText:t.formatMessage({id:"JpIFJJ",defaultMessage:"Anyone with this link can view and download these items"}),cancelButtonText:t.formatMessage({id:"lG6dGA",defaultMessage:"Cancel"}),generateLinkButtonText:t.formatMessage({id:"KPeC3o",defaultMessage:"Copy link"})}})(o),f=p.headerMessage,m=p.shareText,_=p.permissionsText,g=p.cancelButtonText,v=p.generateLinkButtonText,S=t?h():"";return n.default.createElement(a.Modal,{open:t,isCentered:!0,withCloseButton:"Close",onRequestClose:function(){d()},className:"share-modal"},n.default.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard",className:"share-modal-header"},n.default.createElement(a.Modal.Title,null,n.default.createElement(l.UIIcon,{src:c.ImageLine})," ",f," ",n.default.createElement(s.Text,{color:"faint"}," ",S))),n.default.createElement(a.Modal.Body,{hasVerticalSpacing:!1,className:"share-modal-body"},n.default.createElement(s.Title,null,m),n.default.createElement(s.Text,{tagName:"p"},_)),n.default.createElement(a.Modal.Footer,{className:"share-modal-footer"},n.default.createElement(r.Button,{variant:"opacity",onClick:function(){d()}},g),n.default.createElement(r.Button,{variant:"primary",onClick:function(){u()}},v)))},t.ShareModal.displayName="ShareModal"})),define("photos/share-snackbar/index",["require","exports","tslib","react","react-intl","dig-components/snackbar","dig-components/buttons","dig-components/icons","dig-components/icons/src"],(function(e,t,o,n,i,r,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareSnackbar=void 0,n=o.__importDefault(n),t.ShareSnackbar=function(e){var t=e.isCreated,o=e.isErrored,c=e.openShareLink,u=(function(e,t){var o=i.useIntl(),n="";e?n=o.formatMessage({id:"/n3qOR",defaultMessage:"Share link created and copied to clipboard"}):t&&(n=o.formatMessage({id:"fhpAGc",defaultMessage:"Something went wrong..."}));return{previewLinkText:o.formatMessage({id:"WLtCOz",defaultMessage:"Preview link"}),snackbarMessageText:n}})(t,o),d=u.previewLinkText,h=u.snackbarMessageText;return n.default.createElement(r.Snackbar,{open:t||o},n.default.createElement(r.Snackbar.Message,null,h),t&&n.default.createElement(r.Snackbar.Actions,null,n.default.createElement(a.Button,{variant:"transparent",inverse:!0,onClick:function(){c()},withIconLeft:n.default.createElement(s.UIIcon,{src:l.OpenLine})},d)))},t.ShareSnackbar.displayName="ShareSnackbar"})),define("photos/virtualized-grid/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GRID_GAP=void 0,t.GRID_GAP=4})),define("photos/virtualized-grid/index",["require","exports","tslib","react","react-virtualized-auto-sizer","react-window","photos/virtualized-grid/row","photos/virtualized-grid/constants"],(function(e,t,o,n,i,r,a,s){"use strict";function l(e){var t=e.minimumWidth,o=e.thumbnailSize,i=e.items,l=e.sections,c=e.renderTile,u=e.renderHeader,d=e.headerHeight,h=e.overscanCount,p=e.tilesPerRow,f=e.onTilePerRowChange,m=e.onScroll,_=e.onScrollSection,g=e.gridRef,v=e.height,S=e.width,T=e.listRef,E=(function(e){var t,o=n.useState(0),i=o[0],r=o[1],a=n.useRef(),s=null!==(t=a.current)&&void 0!==t?t:{offsetWidth:0,clientWidth:0},l=s.offsetWidth,c=s.clientWidth;return n.useLayoutEffect((function(){r(l-c)}),[e,l,c]),[i,a]})(S),b=E[0],I=E[1],y=Math.max(Math.floor((S-b)/(t+s.GRID_GAP)),1),A=(S-b-s.GRID_GAP*(y-1))/y,P=n.useMemo((function(){return(function(e,t,o){for(var n=[],i=[],r=0;r<t.sectionLabels.length;r++){i.push(n.length),n.push({index:r,label:t.sectionLabels[r]});for(var a=t.sectionStartIndices[r],s=t.sectionStartIndices[r+1],l=void 0===s?e.length:s,c=a;c<l;c+=o){var u=Math.min(l,c+o);n.push(e.slice(c,u))}}return{rows:n,sectionIndices:i}})(i,l,y)}),[i,l,y]),w=P.rows,O=P.sectionIndices;n.useEffect((function(){void 0!==f&&y!==p&&f(y)}),[f,y,p]),n.useImperativeHandle(g,(function(){return{scrollToSection:function(e){var t;null===(t=null==T?void 0:T.current)||void 0===t||t.scrollToItem(O[e],"start")}}}));var M=n.useCallback((function(e){var t=e.visibleStartIndex;_&&_((function(e,t){for(var o=e+1;o>=0;o--){var n=t[o];if(n&&a.isHeader(n))return n.index}return 0})(t,w))}),[_,w]),C={renderTile:c,renderHeader:u,rows:w,tileSize:A,thumbnailSize:o};return n.default.createElement(r.VariableSizeList,{"data-testid":"virtualized-grid",onScroll:m,className:"virtualized-grid",ref:T,outerRef:I,height:v,width:S,overscanCount:h,itemCount:w.length,itemSize:function(e){return s.GRID_GAP+(a.isHeader(w[e])?d:A)},estimatedItemSize:A+s.GRID_GAP+l.sectionLabels.length/w.length*(d-A),itemData:C,onItemsRendered:_?M:void 0},a.RowWrapper)}Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualizedGrid=void 0,n=o.__importStar(n),i=o.__importDefault(i),t.VirtualizedGrid=function(e){var t=n.useRef(null),o=e.minimumWidth,r=e.items,a=e.sections,s=e.headerHeight;return n.useLayoutEffect((function(){var e;null===(e=t.current)||void 0===e||e.resetAfterIndex(0,!1)}),[o,r.length,a,s]),n.default.createElement(i.default,{onResize:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.resetAfterIndex(0,!0)}},(function(o){return n.default.createElement(l,Object.assign({},o,e,{listRef:t}))}))}})),define("photos/virtualized-grid/row",["require","exports","tslib","react","react-window","photos/virtualized-grid/tile"],(function(e,t,o,n,i,r){"use strict";function a(e){return!Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.RowWrapperMemo=t.isHeader=t.RowWrapper=void 0,n=o.__importStar(n),t.RowWrapper=function(e){var t=e.index,o=e.style,i=e.data,s=i.renderHeader,l=i.renderTile,c=i.rows,u=i.tileSize,d=i.thumbnailSize,h=c[t];return n.default.createElement("div",{style:o},a(h)?n.default.createElement(s,Object.assign({},h)):h.map((function(e,t){return n.default.createElement(r.TileWrapperMemo,{index:t,size:u,key:t},n.default.createElement(l,{item:e,thumbnailSize:d}))})))},t.isHeader=a,t.RowWrapperMemo=n.memo(t.RowWrapper,i.areEqual)})),define("photos/virtualized-grid/tile",["require","exports","tslib","react","photos/virtualized-grid/constants"],(function(e,t,o,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileWrapperMemo=void 0,n=o.__importStar(n);var r=function(e){var t=e.index,o=e.size,r=e.children,a=t*(o+i.GRID_GAP);return n.default.createElement("div",{className:"tile",style:{height:o,width:o,left:a}},r)};r.displayName="TileWrapper",t.TileWrapperMemo=n.memo(r)})),define("photos/filter-bar/index",["require","exports","tslib","react","dig-components/controls","dig-components/menu","dig-components/buttons","photos/slider/index","react-intl"],(function(e,t,o,n,i,r,a,s,l){"use strict";var c,u,d;function h(e){var t=e.onSelection,o=e.selectedValue,s=e.choices,l=e.compact,c=e.className,u=function(e){e&&e!==o&&t(e)};return l?n.default.createElement(r.Menu.Wrapper,{onSelection:u,className:c},(function(e){var t,i=e.getContentProps,l=e.getTriggerProps;return n.default.createElement(n.default.Fragment,null,n.default.createElement(a.Button,Object.assign({},l(),{variant:"opacity",withDropdownIcon:!0}),null===(t=s.find((function(e){return e.value==o})))||void 0===t?void 0:t.text),n.default.createElement(r.Menu.Content,Object.assign({},i(),{placement:"bottom-end"}),n.default.createElement(r.Menu.Segment,null,s.map((function(e){var t=e.value,i=e.text,a=e.testid;return n.default.createElement(r.Menu.SelectItem,{key:t,value:t,selected:t===o,"data-testid":a},i)})))))})):n.default.createElement(i.SegmentedControl,{selectedValue:o,onSelection:u,className:c},s.map((function(e){var t=e.value,o=e.text,r=e.testid;return n.default.createElement(i.SegmentedControl.Option,{variant:"text",key:t,value:t,"data-testid":r},o)})))}Object.defineProperty(t,"__esModule",{value:!0}),t.FilterBar=t.PhotoGridSize=t.PhotoFilter=t.PhotoGrouping=void 0,n=o.__importDefault(n),(c=t.PhotoGrouping||(t.PhotoGrouping={})).YEARS="years",c.MONTHS="months",c.DAYS="days",(u=t.PhotoFilter||(t.PhotoFilter={})).ALL="all",u.PHOTOS="photos",u.VIDEOS="videos",u.STARRED="starred",(d=t.PhotoGridSize||(t.PhotoGridSize={}))[d.EXTRA_SMALL=1]="EXTRA_SMALL",d[d.SMALL=2]="SMALL",d[d.MEDIUM=3]="MEDIUM",d[d.LARGE=4]="LARGE",d[d.EXTRA_LARGE=5]="EXTRA_LARGE",t.FilterBar=function(e){var o=e.filter,i=e.grouping,r=e.gridSize,a=e.onFilterChange,c=e.onGroupingChange,u=e.onSizeChange,d=e.compact,p=(function(){var e=(h=l.useIntl(),{allItemsText:h.formatMessage({id:"EZV/rb",defaultMessage:"All Items"}),photosText:h.formatMessage({id:"UIUkU/",defaultMessage:"Photos"}),videosText:h.formatMessage({id:"zJ1b5+",defaultMessage:"Videos"}),starredText:h.formatMessage({id:"IQQznX",defaultMessage:"Starred"}),yearsText:h.formatMessage({id:"rk1sjy",defaultMessage:"Years"}),monthsText:h.formatMessage({id:"Az9n5x",defaultMessage:"Months"}),daysText:h.formatMessage({id:"5GOC/d",defaultMessage:"Days"})}),o=e.allItemsText,n=e.photosText,i=e.videosText,r=e.starredText,a=e.yearsText,s=e.monthsText,c=e.daysText,u=[{value:t.PhotoFilter.ALL,text:o},{value:t.PhotoFilter.PHOTOS,text:n},{value:t.PhotoFilter.VIDEOS,text:i},{value:t.PhotoFilter.STARRED,text:r}],d=[{value:t.PhotoGrouping.YEARS,text:a,testid:"grouping-years"},{value:t.PhotoGrouping.MONTHS,text:s,testid:"grouping-months"},{value:t.PhotoGrouping.DAYS,text:c,testid:"grouping-days"}];var h;return{filterChoices:u,groupingChoices:d}})(),f=p.filterChoices,m=p.groupingChoices;return n.default.createElement("div",{className:"photos-filter-bar"},n.default.createElement(h,{className:"photos-filter-bar_selection",onSelection:a,selectedValue:o,choices:f,compact:d}),n.default.createElement(h,{className:"photos-filter-bar_selection",onSelection:c,selectedValue:i,choices:m,compact:d}),n.default.createElement(s.ZoomSlider,{min:t.PhotoGridSize.EXTRA_SMALL,max:t.PhotoGridSize.EXTRA_LARGE,value:r,onChange:u}))},t.FilterBar.displayName="FilterBar"})),define("photos/slider/index",["require","exports","tslib","react","dig-components/buttons","dig-components/icons","dig-components/icons/src"],(function(e,t,o,n,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZoomSlider=void 0,n=o.__importDefault(n),t.ZoomSlider=function(e){var t=e.min,o=e.max,s=e.value,l=e.onChange,c={backgroundSize:(s-1)/(o-t)*100+"% 100%"};return n.default.createElement("div",{className:"zoom-slider-container"},n.default.createElement(i.IconButton,{className:"zoom-slider-button",variant:"opacity",disabled:s==t,onClick:function(){return l(s-1)},"data-testid":"zoom-out-button"},n.default.createElement(r.UIIcon,{src:a.ZoomOutLine})),n.default.createElement("input",{style:c,className:"zoom-slider",type:"range",min:t,max:o,value:s,onChange:function(e){return l(parseInt(e.target.value,10))}}),n.default.createElement(i.IconButton,{className:"zoom-slider-button",variant:"opacity",disabled:s==o,onClick:function(){return l(s+1)},"data-testid":"zoom-in-button"},n.default.createElement(r.UIIcon,{src:a.ZoomInLine})))}})),define("photos/photo-tile/index",["require","exports","tslib","react","react-intl","classnames","dig-components/badges","dig-components/controls","dig-components/buttons","dig-components/icons","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/index"],(function(e,t,o,n,i,r,a,s,l,c,u,d){"use strict";var h;Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoTileMemo=t.PhotoTile=t.InteractionEvent=void 0,n=o.__importStar(n),r=o.__importDefault(r),(h=t.InteractionEvent||(t.InteractionEvent={})).SELECT="select",h.CLICK="click",h.FAVORITE="favorite",t.PhotoTile=function(e){var o,h=e.duration,p=e.isSelected,f=e.isStarred,m=e.onUserInteraction,_=e.thumbnailUrl,g=e.actions,v=e.overFlowActionHandler,S=e.menuToggleHandler,T={addFavoriteAriaLabel:(o=i.useIntl()).formatMessage({id:"H09L3p",defaultMessage:"Add to favorites"}),removeFavoriteAriaLabel:o.formatMessage({id:"W7fGIp",defaultMessage:"Remove from favorites"}),selectAriaLabel:o.formatMessage({id:"h36j1+",defaultMessage:"Select Item"}),unSelectAriaLabel:o.formatMessage({id:"3neLkf",defaultMessage:"Unselect Item"})},E=T.addFavoriteAriaLabel,b=T.removeFavoriteAriaLabel,I=T.selectAriaLabel,y=T.unSelectAriaLabel,A={handleAction:function(e){e.event.stopPropagation(),v(e.type)},handleMenuToggle:function(){}};return n.default.createElement("div",{className:r.default("photo-tile",{"photo-tile--selected":p}),"data-testid":"photo-tile",onClick:function(e){return m(t.InteractionEvent.CLICK,e)},tabIndex:0},n.default.createElement(s.Checkbox,{className:r.default("tile-checkbox",{"tile-checkbox--selected":p}),checked:p,onClick:function(e){e.stopPropagation(),m(t.InteractionEvent.SELECT,e)},inverse:!0,"aria-label":p?y:I}),n.default.createElement("div",{onClick:function(e){return e.stopPropagation()}},n.default.createElement(d.InlineOverflowMenu,{actions:g,actionHandler:A,className:"photo-tile_overflow-menu",intl:i.useIntl(),size:"small",isMobile:!1,expActionBarRedesignVariant:"OFF",handleOverflowMenuToggle:S,overflowMenuTitle:"",inverse:!0})),n.default.createElement(l.IconButton,{className:r.default("photo-tile_star",{starred:f}),variant:"transparent",onClick:function(e){e.stopPropagation(),m(t.InteractionEvent.FAVORITE,e)},inverse:!0,tabIndex:0,"aria-label":f?b:E},n.default.createElement(c.UIIcon,{src:f?u.StarFill:u.StarLine})),h&&n.default.createElement(a.AccessoryBadge,{className:"duration-badge"},h),n.default.createElement("img",{className:"photo-tile-img",draggable:!1,src:_}))},t.PhotoTile.displayName="PhotoTile",t.PhotoTileMemo=n.memo(t.PhotoTile),t.PhotoTileMemo.displayName="PhotoTileMemo"})),define("photos/photo-header/index",["require","exports","tslib","react","dig-components/controls","dig-components/combinations","dig-components/typography","react-intl","photos/filter-bar/index"],(function(e,t,o,n,i,r,a,s,l){"use strict";var c;Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoSectionHeader=t.SectionSelection=t.HeaderHeight=void 0,n=o.__importStar(n),t.HeaderHeight=44;var u,d=((c={})[l.PhotoGrouping.DAYS]={year:"numeric",month:"long",day:"numeric"},c[l.PhotoGrouping.MONTHS]={year:"numeric",month:"long"},c[l.PhotoGrouping.YEARS]={year:"numeric"},c);(u=t.SectionSelection||(t.SectionSelection={}))[u.NONE=0]="NONE",u[u.SOME=1]="SOME",u[u.ALL=2]="ALL";var h=function(e){var o=e.date,l=e.count,c=e.format,u=e.selection,h=e.onChange;return n.default.createElement("div",{className:"photo-grid_date-header"},n.default.createElement(r.LabelGroup,{withText:n.default.createElement(a.Text,{variant:"label",isBold:!0},n.default.createElement(s.FormattedDate,Object.assign({value:o},d[c]))),withSubtext:n.default.createElement(s.FormattedMessage,{id:"hCjeki",defaultMessage:"{count, plural, one{# item} other{# items}}",values:{count:l}}),direction:"horizontal",withLeftAccessory:n.default.createElement(i.Checkbox,{isIndeterminate:u===t.SectionSelection.SOME,checked:u===t.SectionSelection.ALL,onChange:h})}))};h.displayName="PhotoSectionHeader";var p=n.memo(h);t.PhotoSectionHeader=p})),define("photos/scroll-spy/index",["require","exports","tslib","react","dig-components/typography","classnames","photos/filter-bar/index","react-intl"],(function(e,t,o,n,i,r,a,s){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),t.TimelineScrollSpy=t.ScrollSpy=void 0,n=o.__importDefault(n),r=o.__importDefault(r);var c=((l={})[a.PhotoGrouping.DAYS]={year:"numeric",month:"short",day:"numeric"},l[a.PhotoGrouping.MONTHS]={year:"numeric",month:"short"},l[a.PhotoGrouping.YEARS]={year:"numeric"},l);t.ScrollSpy=function(e){var t=e.items,o=e.onClick,a=e.selectedIndex,s=t.map((function(){return{labelRef:n.default.createRef(),lineRef:n.default.createRef()}})),l=n.default.createRef();return n.default.useLayoutEffect((function(){var e,t,o,n,i,r,c,u;if("number"==typeof a&&s.length>a){var d=s[a],h=d.labelRef;null===(t=null===(e=d.lineRef.current)||void 0===e?void 0:e.scrollIntoView)||void 0===t||t.call(e,{behavior:"auto",block:"center"});var p=(null!==(n=null===(o=h.current)||void 0===o?void 0:o.offsetTop)&&void 0!==n?n:0)-(null!==(r=null===(i=s[0].labelRef.current)||void 0===i?void 0:i.offsetTop)&&void 0!==r?r:0);null===(u=null===(c=l.current)||void 0===c?void 0:c.scrollTo)||void 0===u||u.call(c,{top:p})}}),[s,l,a]),n.default.createElement("div",{className:"photos-scroll-spy"},n.default.createElement("div",{className:"section-labels--container"},n.default.createElement("div",{className:"section-labels",ref:l},n.default.createElement("div",{className:"section-padder"}),n.default.createElement("ul",{className:"section-labels--list"},t.map((function(e,t){return n.default.createElement(i.Text,{tagName:"li",variant:"label",size:"xsmall",color:"faint",className:r.default("label",{selected:a===t}),onClick:function(){o&&o(t)},key:t,ref:s[t].labelRef},e)}))),n.default.createElement("div",{className:"section-padder"}))),n.default.createElement("div",{className:"section-lines--container"},n.default.createElement("div",{className:"section-lines","aria-hidden":!0},n.default.createElement("div",{className:"section-padder"}),n.default.createElement("ul",{className:"section-lines--list","aria-hidden":!0},t.map((function(e,t){return n.default.createElement("li",{className:r.default("line",{selected:a===t}),key:t,ref:s[t].lineRef})}))),n.default.createElement("div",{className:"section-padder"}))))},t.ScrollSpy.displayName="ScrollSpy",t.TimelineScrollSpy=function(e){var i=e.items,r=e.format,a=o.__rest(e,["items","format"]),l=s.useIntl();return n.default.createElement(t.ScrollSpy,Object.assign({items:i.map((function(e){return l.formatDate(e,c[r])}))},a))},t.TimelineScrollSpy.displayName="TimelineScrollSpy"})),define("prod_assets_web_modules/react-virtualized-auto-sizer",["react"],(function(e){"use strict";var t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=(function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}})(),n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},r=(function(r){function a(){var e,o,n;t(this,a);for(var r=arguments.length,s=Array(r),l=0;l<r;l++)s[l]=arguments[l];return o=n=i(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(s))),n.state={height:n.props.defaultHeight||0,width:n.props.defaultWidth||0},n._onResize=function(){var e=n.props,t=e.disableHeight,o=e.disableWidth,i=e.onResize;if(n._parentNode){var r=n._parentNode.offsetHeight||0,a=n._parentNode.offsetWidth||0,s=window.getComputedStyle(n._parentNode)||{},l=parseInt(s.paddingLeft,10)||0,c=parseInt(s.paddingRight,10)||0,u=parseInt(s.paddingTop,10)||0,d=parseInt(s.paddingBottom,10)||0,h=r-u-d,p=a-l-c;(!t&&n.state.height!==h||!o&&n.state.width!==p)&&(n.setState({height:r-u-d,width:a-l-c}),i({height:r,width:a}))}},n._setRef=function(e){n._autoSizer=e},i(n,o)}return(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(a,r),o(a,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=(function(e){var t;t="undefined"!=typeof window?window:"undefined"!=typeof self?self:global;var o,n,i="undefined"!=typeof document&&document.attachEvent;if(!i){var r=(n=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||function(e){return t.setTimeout(e,20)},function(e){return n(e)}),a=(o=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||t.clearTimeout,function(e){return o(e)}),s=function(e){var t=e.__resizeTriggers__,o=t.firstElementChild,n=t.lastElementChild,i=o.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,i.style.width=o.offsetWidth+1+"px",i.style.height=o.offsetHeight+1+"px",o.scrollLeft=o.scrollWidth,o.scrollTop=o.scrollHeight},l=function(e){if(!(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;s(this),this.__resizeRAF__&&a(this.__resizeRAF__),this.__resizeRAF__=r((function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(o){o.call(t,e)})))}))}},c=!1,u="",d="animationstart",h="Webkit Moz O ms".split(" "),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),f=document.createElement("fakeelement");if(void 0!==f.style.animationName&&(c=!0),!1===c)for(var m=0;m<h.length;m++)if(void 0!==f.style[h[m]+"AnimationName"]){u="-"+h[m].toLowerCase()+"-",d=p[m],c=!0;break}var _="resizeanim",g="@"+u+"keyframes "+_+" { from { opacity: 0; } to { opacity: 0; } } ",v=u+"animation: 1ms "+_+"; "}return{addResizeListener:function(o,n){if(i)o.attachEvent("onresize",n);else{if(!o.__resizeTriggers__){var r=o.ownerDocument,a=t.getComputedStyle(o);a&&"static"==a.position&&(o.style.position="relative"),(function(t){if(!t.getElementById("detectElementResize")){var o=(g||"")+".resize-triggers { "+(v||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',n=t.head||t.getElementsByTagName("head")[0],i=t.createElement("style");i.id="detectElementResize",i.type="text/css",null!=e&&i.setAttribute("nonce",e),i.styleSheet?i.styleSheet.cssText=o:i.appendChild(t.createTextNode(o)),n.appendChild(i)}})(r),o.__resizeLast__={},o.__resizeListeners__=[],(o.__resizeTriggers__=r.createElement("div")).className="resize-triggers";var c=r.createElement("div");c.className="expand-trigger",c.appendChild(r.createElement("div"));var u=r.createElement("div");u.className="contract-trigger",o.__resizeTriggers__.appendChild(c),o.__resizeTriggers__.appendChild(u),o.appendChild(o.__resizeTriggers__),s(o),o.addEventListener("scroll",l,!0),d&&(o.__resizeTriggers__.__animationListener__=function(e){e.animationName==_&&s(o)},o.__resizeTriggers__.addEventListener(d,o.__resizeTriggers__.__animationListener__))}o.__resizeListeners__.push(n)}},removeResizeListener:function(e,t){if(i)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",l,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(d,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}})(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var t=this.props,o=t.children,i=t.className,r=t.disableHeight,a=t.disableWidth,s=t.style,l=this.state,c=l.height,u=l.width,d={overflow:"visible"},h={},p=!1;return r||(0===c&&(p=!0),d.height=0,h.height=c),a||(0===u&&(p=!0),d.width=0,h.width=u),e.createElement("div",{className:i,ref:this._setRef,style:n({},d,s)},!p&&o(h))}}]),a})(e.PureComponent);return r.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}},r})),define("prod_assets_web_modules/react-window",["exports","react"],(function(e,t){"use strict";function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r(e,t){if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}function a(e,t){var o;void 0===t&&(t=r);var n,i=[],a=!1;return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return a&&o===this&&t(r,i)||(n=e.apply(this,r),a=!0,o=this,i=r),n}}function s(e,t){if(null==e)return{};var o,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||(i[o]=e[o]);return i}var l="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function c(e){cancelAnimationFrame(e.id)}function u(e,t){var o=l(),n={id:requestAnimationFrame((function i(){l()-o>=t?e.call(null):n.id=requestAnimationFrame(i)}))};return n}var d=-1,h=null;function p(e){if(void 0===e&&(e=!1),null===h||e){var t=document.createElement("div"),o=t.style;o.width="50px",o.height="50px",o.overflow="scroll",o.direction="rtl";var n=document.createElement("div"),i=n.style;return i.width="100px",i.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?h="positive-descending":(t.scrollLeft=1,h=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),h}return h}var f=function(e){var t=e.columnIndex;return e.data,e.rowIndex+":"+t};function m(e){var r,s,l=e.getColumnOffset,h=e.getColumnStartIndexForOffset,m=e.getColumnStopIndexForStartIndex,g=e.getColumnWidth,v=e.getEstimatedTotalHeight,S=e.getEstimatedTotalWidth,T=e.getOffsetForColumnAndAlignment,E=e.getOffsetForRowAndAlignment,b=e.getRowHeight,I=e.getRowOffset,y=e.getRowStartIndexForOffset,A=e.getRowStopIndexForStartIndex,P=e.initInstanceProps,w=e.shouldResetStyleCacheOnItemSizeChange,O=e.validateProps;return s=r=(function(e){function r(t){var o;return(o=e.call(this,t)||this)._instanceProps=P(o.props,i(i(o))),o._resetIsScrollingTimeoutId=null,o._outerRef=void 0,o.state={instance:i(i(o)),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:"number"==typeof o.props.initialScrollLeft?o.props.initialScrollLeft:0,scrollTop:"number"==typeof o.props.initialScrollTop?o.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},o._callOnItemsRendered=void 0,o._callOnItemsRendered=a((function(e,t,n,i,r,a,s,l){return o.props.onItemsRendered({overscanColumnStartIndex:e,overscanColumnStopIndex:t,overscanRowStartIndex:n,overscanRowStopIndex:i,visibleColumnStartIndex:r,visibleColumnStopIndex:a,visibleRowStartIndex:s,visibleRowStopIndex:l})})),o._callOnScroll=void 0,o._callOnScroll=a((function(e,t,n,i,r){return o.props.onScroll({horizontalScrollDirection:n,scrollLeft:e,scrollTop:t,verticalScrollDirection:i,scrollUpdateWasRequested:r})})),o._getItemStyle=void 0,o._getItemStyle=function(e,t){var n,i,r=o.props,a=r.columnWidth,s=r.direction,c=r.rowHeight,u=o._getItemStyleCache(w&&a,w&&s,w&&c),d=e+":"+t;return u.hasOwnProperty(d)?n=u[d]:u[d]=((i={position:"absolute"})["rtl"===s?"right":"left"]=l(o.props,t,o._instanceProps),i.top=I(o.props,e,o._instanceProps),i.height=b(o.props,e,o._instanceProps),i.width=g(o.props,t,o._instanceProps),n=i),n},o._getItemStyleCache=void 0,o._getItemStyleCache=a((function(e,t,o){return{}})),o._onScroll=function(e){var t=e.currentTarget,n=t.clientHeight,i=t.clientWidth,r=t.scrollLeft,a=t.scrollTop,s=t.scrollHeight,l=t.scrollWidth;o.setState((function(e){if(e.scrollLeft===r&&e.scrollTop===a)return null;var t=o.props.direction,c=r;if("rtl"===t)switch(p()){case"negative":c=-r;break;case"positive-descending":c=l-i-r}c=Math.max(0,Math.min(c,l-i));var u=Math.max(0,Math.min(a,s-n));return{isScrolling:!0,horizontalScrollDirection:e.scrollLeft<r?"forward":"backward",scrollLeft:c,scrollTop:u,verticalScrollDirection:e.scrollTop<a?"forward":"backward",scrollUpdateWasRequested:!1}}),o._resetIsScrollingDebounced)},o._outerRefSetter=function(e){var t=o.props.outerRef;o._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},o._resetIsScrollingDebounced=function(){null!==o._resetIsScrollingTimeoutId&&c(o._resetIsScrollingTimeoutId),o._resetIsScrollingTimeoutId=u(o._resetIsScrolling,150)},o._resetIsScrolling=function(){o._resetIsScrollingTimeoutId=null,o.setState({isScrolling:!1},(function(){o._getItemStyleCache(-1)}))},o}n(r,e),r.getDerivedStateFromProps=function(e,t){return _(e,t),O(e),null};var s=r.prototype;return s.scrollTo=function(e){var t=e.scrollLeft,o=e.scrollTop;void 0!==t&&(t=Math.max(0,t)),void 0!==o&&(o=Math.max(0,o)),this.setState((function(e){return void 0===t&&(t=e.scrollLeft),void 0===o&&(o=e.scrollTop),e.scrollLeft===t&&e.scrollTop===o?null:{horizontalScrollDirection:e.scrollLeft<t?"forward":"backward",scrollLeft:t,scrollTop:o,scrollUpdateWasRequested:!0,verticalScrollDirection:e.scrollTop<o?"forward":"backward"}}),this._resetIsScrollingDebounced)},s.scrollToItem=function(e){var t=e.align,o=void 0===t?"auto":t,n=e.columnIndex,i=e.rowIndex,r=this.props,a=r.columnCount,s=r.height,l=r.rowCount,c=r.width,u=this.state,h=u.scrollLeft,p=u.scrollTop,f=(function(e){if(void 0===e&&(e=!1),-1===d||e){var t=document.createElement("div"),o=t.style;o.width="50px",o.height="50px",o.overflow="scroll",document.body.appendChild(t),d=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return d})();void 0!==n&&(n=Math.max(0,Math.min(n,a-1))),void 0!==i&&(i=Math.max(0,Math.min(i,l-1)));var m=v(this.props,this._instanceProps),_=S(this.props,this._instanceProps)>c?f:0,g=m>s?f:0;this.scrollTo({scrollLeft:void 0!==n?T(this.props,n,o,h,this._instanceProps,g):h,scrollTop:void 0!==i?E(this.props,i,o,p,this._instanceProps,_):p})},s.componentDidMount=function(){var e=this.props,t=e.initialScrollLeft,o=e.initialScrollTop;if(null!=this._outerRef){var n=this._outerRef;"number"==typeof t&&(n.scrollLeft=t),"number"==typeof o&&(n.scrollTop=o)}this._callPropsCallbacks()},s.componentDidUpdate=function(){var e=this.props.direction,t=this.state,o=t.scrollLeft,n=t.scrollTop;if(t.scrollUpdateWasRequested&&null!=this._outerRef){var i=this._outerRef;if("rtl"===e)switch(p()){case"negative":i.scrollLeft=-o;break;case"positive-ascending":i.scrollLeft=o;break;default:var r=i.clientWidth,a=i.scrollWidth;i.scrollLeft=a-r-o}else i.scrollLeft=Math.max(0,o);i.scrollTop=Math.max(0,n)}this._callPropsCallbacks()},s.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&c(this._resetIsScrollingTimeoutId)},s.render=function(){var e=this.props,n=e.children,i=e.className,r=e.columnCount,a=e.direction,s=e.height,l=e.innerRef,c=e.innerElementType,u=e.innerTagName,d=e.itemData,h=e.itemKey,p=void 0===h?f:h,m=e.outerElementType,_=e.outerTagName,g=e.rowCount,T=e.style,E=e.useIsScrolling,b=e.width,I=this.state.isScrolling,y=this._getHorizontalRangeToRender(),A=y[0],P=y[1],w=this._getVerticalRangeToRender(),O=w[0],M=w[1],C=[];if(r>0&&g)for(var x=O;x<=M;x++)for(var L=A;L<=P;L++)C.push(t.createElement(n,{columnIndex:L,data:d,isScrolling:E?I:void 0,key:p({columnIndex:L,data:d,rowIndex:x}),rowIndex:x,style:this._getItemStyle(x,L)}));var R=v(this.props,this._instanceProps),N=S(this.props,this._instanceProps);return t.createElement(m||_||"div",{className:i,onScroll:this._onScroll,ref:this._outerRefSetter,style:o({position:"relative",height:s,width:b,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:a},T)},t.createElement(c||u||"div",{children:C,ref:l,style:{height:R,pointerEvents:I?"none":void 0,width:N}}))},s._callPropsCallbacks=function(){var e=this.props,t=e.columnCount,o=e.onItemsRendered,n=e.onScroll,i=e.rowCount;if("function"==typeof o&&t>0&&i>0){var r=this._getHorizontalRangeToRender(),a=r[0],s=r[1],l=r[2],c=r[3],u=this._getVerticalRangeToRender(),d=u[0],h=u[1],p=u[2],f=u[3];this._callOnItemsRendered(a,s,d,h,l,c,p,f)}if("function"==typeof n){var m=this.state,_=m.horizontalScrollDirection,g=m.scrollLeft,v=m.scrollTop,S=m.scrollUpdateWasRequested,T=m.verticalScrollDirection;this._callOnScroll(g,v,_,T,S)}},s._getHorizontalRangeToRender=function(){var e=this.props,t=e.columnCount,o=e.overscanColumnCount,n=e.overscanColumnsCount,i=e.overscanCount,r=e.rowCount,a=this.state,s=a.horizontalScrollDirection,l=a.isScrolling,c=a.scrollLeft,u=o||n||i||1;if(0===t||0===r)return[0,0,0,0];var d=h(this.props,c,this._instanceProps),p=m(this.props,d,c,this._instanceProps),f=l&&"backward"!==s?1:Math.max(1,u),_=l&&"forward"!==s?1:Math.max(1,u);return[Math.max(0,d-f),Math.max(0,Math.min(t-1,p+_)),d,p]},s._getVerticalRangeToRender=function(){var e=this.props,t=e.columnCount,o=e.overscanCount,n=e.overscanRowCount,i=e.overscanRowsCount,r=e.rowCount,a=this.state,s=a.isScrolling,l=a.verticalScrollDirection,c=a.scrollTop,u=n||i||o||1;if(0===t||0===r)return[0,0,0,0];var d=y(this.props,c,this._instanceProps),h=A(this.props,d,c,this._instanceProps),p=s&&"backward"!==l?1:Math.max(1,u),f=s&&"forward"!==l?1:Math.max(1,u);return[Math.max(0,d-p),Math.max(0,Math.min(r-1,h+f)),d,h]},r})(t.PureComponent),r.defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},s}var _=function(e,t){e.children,e.direction,e.height,e.innerTagName,e.outerTagName,e.overscanColumnsCount,e.overscanCount,e.overscanRowsCount,e.width,t.instance},g=function(e,t){var o=e.rowCount,n=t.rowMetadataMap,i=t.estimatedRowHeight,r=t.lastMeasuredRowIndex,a=0;if(r>=o&&(r=o-1),r>=0){var s=n[r];a=s.offset+s.size}return a+(o-r-1)*i},v=function(e,t){var o=e.columnCount,n=t.columnMetadataMap,i=t.estimatedColumnWidth,r=t.lastMeasuredColumnIndex,a=0;if(r>=o&&(r=o-1),r>=0){var s=n[r];a=s.offset+s.size}return a+(o-r-1)*i},S=function(e,t,o,n){var i,r,a;if("column"===e?(i=n.columnMetadataMap,r=t.columnWidth,a=n.lastMeasuredColumnIndex):(i=n.rowMetadataMap,r=t.rowHeight,a=n.lastMeasuredRowIndex),o>a){var s=0;if(a>=0){var l=i[a];s=l.offset+l.size}for(var c=a+1;c<=o;c++){var u=r(c);i[c]={offset:s,size:u},s+=u}"column"===e?n.lastMeasuredColumnIndex=o:n.lastMeasuredRowIndex=o}return i[o]},T=function(e,t,o,n){var i,r;return"column"===e?(i=o.columnMetadataMap,r=o.lastMeasuredColumnIndex):(i=o.rowMetadataMap,r=o.lastMeasuredRowIndex),(r>0?i[r].offset:0)>=n?E(e,t,o,r,0,n):b(e,t,o,Math.max(0,r),n)},E=function(e,t,o,n,i,r){for(;i<=n;){var a=i+Math.floor((n-i)/2),s=S(e,t,a,o).offset;if(s===r)return a;s<r?i=a+1:s>r&&(n=a-1)}return i>0?i-1:0},b=function(e,t,o,n,i){for(var r="column"===e?t.columnCount:t.rowCount,a=1;n<r&&S(e,t,n,o).offset<i;)n+=a,a*=2;return E(e,t,o,Math.min(n,r-1),Math.floor(n/2),i)},I=function(e,t,o,n,i,r,a){var s="column"===e?t.width:t.height,l=S(e,t,o,r),c="column"===e?v(t,r):g(t,r),u=Math.max(0,Math.min(c-s,l.offset)),d=Math.max(0,l.offset-s+a+l.size);switch("smart"===n&&(n=i>=d-s&&i<=u+s?"auto":"center"),n){case"start":return u;case"end":return d;case"center":return Math.round(d+(u-d)/2);default:return i>=d&&i<=u?i:d>u||i<d?d:u}},y=m({getColumnOffset:function(e,t,o){return S("column",e,t,o).offset},getColumnStartIndexForOffset:function(e,t,o){return T("column",e,o,t)},getColumnStopIndexForStartIndex:function(e,t,o,n){for(var i=e.columnCount,r=e.width,a=S("column",e,t,n),s=o+r,l=a.offset+a.size,c=t;c<i-1&&l<s;)c++,l+=S("column",e,c,n).size;return c},getColumnWidth:function(e,t,o){return o.columnMetadataMap[t].size},getEstimatedTotalHeight:g,getEstimatedTotalWidth:v,getOffsetForColumnAndAlignment:function(e,t,o,n,i,r){return I("column",e,t,o,n,i,r)},getOffsetForRowAndAlignment:function(e,t,o,n,i,r){return I("row",e,t,o,n,i,r)},getRowOffset:function(e,t,o){return S("row",e,t,o).offset},getRowHeight:function(e,t,o){return o.rowMetadataMap[t].size},getRowStartIndexForOffset:function(e,t,o){return T("row",e,o,t)},getRowStopIndexForStartIndex:function(e,t,o,n){for(var i=e.rowCount,r=e.height,a=S("row",e,t,n),s=o+r,l=a.offset+a.size,c=t;c<i-1&&l<s;)c++,l+=S("row",e,c,n).size;return c},initInstanceProps:function(e,t){var o=e,n={columnMetadataMap:{},estimatedColumnWidth:o.estimatedColumnWidth||50,estimatedRowHeight:o.estimatedRowHeight||50,lastMeasuredColumnIndex:-1,lastMeasuredRowIndex:-1,rowMetadataMap:{}};return t.resetAfterColumnIndex=function(e,o){void 0===o&&(o=!0),t.resetAfterIndices({columnIndex:e,shouldForceUpdate:o})},t.resetAfterRowIndex=function(e,o){void 0===o&&(o=!0),t.resetAfterIndices({rowIndex:e,shouldForceUpdate:o})},t.resetAfterIndices=function(e){var o=e.columnIndex,i=e.rowIndex,r=e.shouldForceUpdate,a=void 0===r||r;"number"==typeof o&&(n.lastMeasuredColumnIndex=Math.min(n.lastMeasuredColumnIndex,o-1)),"number"==typeof i&&(n.lastMeasuredRowIndex=Math.min(n.lastMeasuredRowIndex,i-1)),t._getItemStyleCache(-1),a&&t.forceUpdate()},n},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.columnWidth,e.rowHeight}}),A=function(e,t){return e};function P(e){var r,s,l=e.getItemOffset,d=e.getEstimatedTotalSize,h=e.getItemSize,f=e.getOffsetForIndexAndAlignment,m=e.getStartIndexForOffset,_=e.getStopIndexForStartIndex,g=e.initInstanceProps,v=e.shouldResetStyleCacheOnItemSizeChange,S=e.validateProps;return s=r=(function(e){function r(t){var o;return(o=e.call(this,t)||this)._instanceProps=g(o.props,i(i(o))),o._outerRef=void 0,o._resetIsScrollingTimeoutId=null,o.state={instance:i(i(o)),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof o.props.initialScrollOffset?o.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},o._callOnItemsRendered=void 0,o._callOnItemsRendered=a((function(e,t,n,i){return o.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:n,visibleStopIndex:i})})),o._callOnScroll=void 0,o._callOnScroll=a((function(e,t,n){return o.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:n})})),o._getItemStyle=void 0,o._getItemStyle=function(e){var t,n=o.props,i=n.direction,r=n.itemSize,a=n.layout,s=o._getItemStyleCache(v&&r,v&&a,v&&i);if(s.hasOwnProperty(e))t=s[e];else{var c,u=l(o.props,e,o._instanceProps),d=h(o.props,e,o._instanceProps),p="horizontal"===i||"horizontal"===a;s[e]=((c={position:"absolute"})["rtl"===i?"right":"left"]=p?u:0,c.top=p?0:u,c.height=p?"100%":d,c.width=p?d:"100%",t=c)}return t},o._getItemStyleCache=void 0,o._getItemStyleCache=a((function(e,t,o){return{}})),o._onScrollHorizontal=function(e){var t=e.currentTarget,n=t.clientWidth,i=t.scrollLeft,r=t.scrollWidth;o.setState((function(e){if(e.scrollOffset===i)return null;var t=o.props.direction,a=i;if("rtl"===t)switch(p()){case"negative":a=-i;break;case"positive-descending":a=r-n-i}return a=Math.max(0,Math.min(a,r-n)),{isScrolling:!0,scrollDirection:e.scrollOffset<i?"forward":"backward",scrollOffset:a,scrollUpdateWasRequested:!1}}),o._resetIsScrollingDebounced)},o._onScrollVertical=function(e){var t=e.currentTarget,n=t.clientHeight,i=t.scrollHeight,r=t.scrollTop;o.setState((function(e){if(e.scrollOffset===r)return null;var t=Math.max(0,Math.min(r,i-n));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),o._resetIsScrollingDebounced)},o._outerRefSetter=function(e){var t=o.props.outerRef;o._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},o._resetIsScrollingDebounced=function(){null!==o._resetIsScrollingTimeoutId&&c(o._resetIsScrollingTimeoutId),o._resetIsScrollingTimeoutId=u(o._resetIsScrolling,150)},o._resetIsScrolling=function(){o._resetIsScrollingTimeoutId=null,o.setState({isScrolling:!1},(function(){o._getItemStyleCache(-1,null)}))},o}n(r,e),r.getDerivedStateFromProps=function(e,t){return w(e,t),S(e),null};var s=r.prototype;return s.scrollTo=function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)},s.scrollToItem=function(e,t){void 0===t&&(t="auto");var o=this.props.itemCount,n=this.state.scrollOffset;e=Math.max(0,Math.min(e,o-1)),this.scrollTo(f(this.props,e,t,n,this._instanceProps))},s.componentDidMount=function(){var e=this.props,t=e.direction,o=e.initialScrollOffset,n=e.layout;if("number"==typeof o&&null!=this._outerRef){var i=this._outerRef;"horizontal"===t||"horizontal"===n?i.scrollLeft=o:i.scrollTop=o}this._callPropsCallbacks()},s.componentDidUpdate=function(){var e=this.props,t=e.direction,o=e.layout,n=this.state,i=n.scrollOffset;if(n.scrollUpdateWasRequested&&null!=this._outerRef){var r=this._outerRef;if("horizontal"===t||"horizontal"===o)if("rtl"===t)switch(p()){case"negative":r.scrollLeft=-i;break;case"positive-ascending":r.scrollLeft=i;break;default:var a=r.clientWidth,s=r.scrollWidth;r.scrollLeft=s-a-i}else r.scrollLeft=i;else r.scrollTop=i}this._callPropsCallbacks()},s.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&c(this._resetIsScrollingTimeoutId)},s.render=function(){var e=this.props,n=e.children,i=e.className,r=e.direction,a=e.height,s=e.innerRef,l=e.innerElementType,c=e.innerTagName,u=e.itemCount,h=e.itemData,p=e.itemKey,f=void 0===p?A:p,m=e.layout,_=e.outerElementType,g=e.outerTagName,v=e.style,S=e.useIsScrolling,T=e.width,E=this.state.isScrolling,b="horizontal"===r||"horizontal"===m,I=b?this._onScrollHorizontal:this._onScrollVertical,y=this._getRangeToRender(),P=y[0],w=y[1],O=[];if(u>0)for(var M=P;M<=w;M++)O.push(t.createElement(n,{data:h,key:f(M,h),index:M,isScrolling:S?E:void 0,style:this._getItemStyle(M)}));var C=d(this.props,this._instanceProps);return t.createElement(_||g||"div",{className:i,onScroll:I,ref:this._outerRefSetter,style:o({position:"relative",height:a,width:T,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:r},v)},t.createElement(l||c||"div",{children:O,ref:s,style:{height:b?"100%":C,pointerEvents:E?"none":void 0,width:b?C:"100%"}}))},s._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],o=e[1],n=e[2],i=e[3];this._callOnItemsRendered(t,o,n,i)}if("function"==typeof this.props.onScroll){var r=this.state,a=r.scrollDirection,s=r.scrollOffset,l=r.scrollUpdateWasRequested;this._callOnScroll(a,s,l)}},s._getRangeToRender=function(){var e=this.props,t=e.itemCount,o=e.overscanCount,n=this.state,i=n.isScrolling,r=n.scrollDirection,a=n.scrollOffset;if(0===t)return[0,0,0,0];var s=m(this.props,a,this._instanceProps),l=_(this.props,s,a,this._instanceProps),c=i&&"backward"!==r?1:Math.max(1,o),u=i&&"forward"!==r?1:Math.max(1,o);return[Math.max(0,s-c),Math.max(0,Math.min(t-1,l+u)),s,l]},r})(t.PureComponent),r.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},s}var w=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},O=function(e,t,o){var n=e.itemSize,i=o.itemMetadataMap,r=o.lastMeasuredIndex;if(t>r){var a=0;if(r>=0){var s=i[r];a=s.offset+s.size}for(var l=r+1;l<=t;l++){var c=n(l);i[l]={offset:a,size:c},a+=c}o.lastMeasuredIndex=t}return i[t]},M=function(e,t,o,n,i){for(;n<=o;){var r=n+Math.floor((o-n)/2),a=O(e,r,t).offset;if(a===i)return r;a<i?n=r+1:a>i&&(o=r-1)}return n>0?n-1:0},C=function(e,t){var o=e.itemCount,n=t.itemMetadataMap,i=t.estimatedItemSize,r=t.lastMeasuredIndex,a=0;if(r>=o&&(r=o-1),r>=0){var s=n[r];a=s.offset+s.size}return a+(o-r-1)*i},x=P({getItemOffset:function(e,t,o){return O(e,t,o).offset},getItemSize:function(e,t,o){return o.itemMetadataMap[t].size},getEstimatedTotalSize:C,getOffsetForIndexAndAlignment:function(e,t,o,n,i){var r=e.direction,a=e.height,s=e.layout,l=e.width,c="horizontal"===r||"horizontal"===s?l:a,u=O(e,t,i),d=C(e,i),h=Math.max(0,Math.min(d-c,u.offset)),p=Math.max(0,u.offset-c+u.size);switch("smart"===o&&(o=n>=p-c&&n<=h+c?"auto":"center"),o){case"start":return h;case"end":return p;case"center":return Math.round(p+(h-p)/2);default:return n>=p&&n<=h?n:n<p?p:h}},getStartIndexForOffset:function(e,t,o){return(function(e,t,o){var n=t.itemMetadataMap,i=t.lastMeasuredIndex;return(i>0?n[i].offset:0)>=o?M(e,t,i,0,o):(function(e,t,o,n){for(var i=e.itemCount,r=1;o<i&&O(e,o,t).offset<n;)o+=r,r*=2;return M(e,t,Math.min(o,i-1),Math.floor(o/2),n)})(e,t,Math.max(0,i),o)})(e,o,t)},getStopIndexForStartIndex:function(e,t,o,n){for(var i=e.direction,r=e.height,a=e.itemCount,s=e.layout,l=e.width,c="horizontal"===i||"horizontal"===s?l:r,u=O(e,t,n),d=o+c,h=u.offset+u.size,p=t;p<a-1&&h<d;)p++,h+=O(e,p,n).size;return p},initInstanceProps:function(e,t){var o={itemMetadataMap:{},estimatedItemSize:e.estimatedItemSize||50,lastMeasuredIndex:-1};return t.resetAfterIndex=function(e,n){void 0===n&&(n=!0),o.lastMeasuredIndex=Math.min(o.lastMeasuredIndex,e-1),t._getItemStyleCache(-1),n&&t.forceUpdate()},o},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.itemSize}}),L=m({getColumnOffset:function(e,t){return t*e.columnWidth},getColumnWidth:function(e,t){return e.columnWidth},getRowOffset:function(e,t){return t*e.rowHeight},getRowHeight:function(e,t){return e.rowHeight},getEstimatedTotalHeight:function(e){var t=e.rowCount;return e.rowHeight*t},getEstimatedTotalWidth:function(e){var t=e.columnCount;return e.columnWidth*t},getOffsetForColumnAndAlignment:function(e,t,o,n,i,r){var a=e.columnCount,s=e.columnWidth,l=e.width,c=Math.max(0,a*s-l),u=Math.min(c,t*s),d=Math.max(0,t*s-l+r+s);switch("smart"===o&&(o=n>=d-l&&n<=u+l?"auto":"center"),o){case"start":return u;case"end":return d;case"center":var h=Math.round(d+(u-d)/2);return h<Math.ceil(l/2)?0:h>c+Math.floor(l/2)?c:h;default:return n>=d&&n<=u?n:d>u||n<d?d:u}},getOffsetForRowAndAlignment:function(e,t,o,n,i,r){var a=e.rowHeight,s=e.height,l=e.rowCount,c=Math.max(0,l*a-s),u=Math.min(c,t*a),d=Math.max(0,t*a-s+r+a);switch("smart"===o&&(o=n>=d-s&&n<=u+s?"auto":"center"),o){case"start":return u;case"end":return d;case"center":var h=Math.round(d+(u-d)/2);return h<Math.ceil(s/2)?0:h>c+Math.floor(s/2)?c:h;default:return n>=d&&n<=u?n:d>u||n<d?d:u}},getColumnStartIndexForOffset:function(e,t){var o=e.columnWidth,n=e.columnCount;return Math.max(0,Math.min(n-1,Math.floor(t/o)))},getColumnStopIndexForStartIndex:function(e,t,o){var n=e.columnWidth,i=e.columnCount,r=e.width,a=t*n,s=Math.ceil((r+o-a)/n);return Math.max(0,Math.min(i-1,t+s-1))},getRowStartIndexForOffset:function(e,t){var o=e.rowHeight,n=e.rowCount;return Math.max(0,Math.min(n-1,Math.floor(t/o)))},getRowStopIndexForStartIndex:function(e,t,o){var n=e.rowHeight,i=e.rowCount,r=e.height,a=t*n,s=Math.ceil((r+o-a)/n);return Math.max(0,Math.min(i-1,t+s-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.columnWidth,e.rowHeight}}),R=P({getItemOffset:function(e,t){return t*e.itemSize},getItemSize:function(e,t){return e.itemSize},getEstimatedTotalSize:function(e){var t=e.itemCount;return e.itemSize*t},getOffsetForIndexAndAlignment:function(e,t,o,n){var i=e.direction,r=e.height,a=e.itemCount,s=e.itemSize,l=e.layout,c=e.width,u="horizontal"===i||"horizontal"===l?c:r,d=Math.max(0,a*s-u),h=Math.min(d,t*s),p=Math.max(0,t*s-u+s);switch("smart"===o&&(o=n>=p-u&&n<=h+u?"auto":"center"),o){case"start":return h;case"end":return p;case"center":var f=Math.round(p+(h-p)/2);return f<Math.ceil(u/2)?0:f>d+Math.floor(u/2)?d:f;default:return n>=p&&n<=h?n:n<p?p:h}},getStartIndexForOffset:function(e,t){var o=e.itemCount,n=e.itemSize;return Math.max(0,Math.min(o-1,Math.floor(t/n)))},getStopIndexForStartIndex:function(e,t,o){var n=e.direction,i=e.height,r=e.itemCount,a=e.itemSize,s=e.layout,l=e.width,c=t*a,u="horizontal"===n||"horizontal"===s?l:i,d=Math.ceil((u+o-c)/a);return Math.max(0,Math.min(r-1,t+d-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});function N(e,t){for(var o in e)if(!(o in t))return!0;for(var n in t)if(e[n]!==t[n])return!0;return!1}function F(e,t){var o=e.style,n=s(e,["style"]),i=t.style,r=s(t,["style"]);return!N(o,i)&&!N(n,r)}e.FixedSizeGrid=L,e.FixedSizeList=R,e.VariableSizeGrid=y,e.VariableSizeList=x,e.areEqual=F,e.shouldComponentUpdate=function(e,t){return!F(this.props,e)||N(this.state,t)},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=pkg-photos.min.js-vflxwCyVe.map