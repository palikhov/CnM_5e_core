define("modules/clean/avatar/contact_avatar",["require","exports","tslib","react","modules/clean/avatar/avatar_with_default","modules/clean/avatar/initials_avatar","modules/clean/avatar/size","modules/clean/contacts/types","modules/core/i18n","modules/core/user_i18n"],(function(e,t,n,i,r,s,o,a,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i),r=n.__importDefault(r),a=n.__importDefault(a),u=n.__importStar(u);var c=i.default.createElement,d=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e,t,n=this.props.contact,i=n.name||n.email||"",d=n.photo_url;n.type===a.default.FB&&(d="https://graph.facebook.com/"+n.fb_id+"/picture");var p="";this.props.dimension!==o.AvatarSize.XSMALL&&(p=u.getInitials(i)),n.type===a.default.NEW_STYLE_GROUP?(e=l.intl.formatMessage({id:"FxoGBv",defaultMessage:"Group"}),t="SQUARE"):(e=l.intl.formatMessage({id:"n4ojia",defaultMessage:"User"}),t="CIRCLE");var h={alt:e,dimension:this.props.dimension,photoUrl:d,shape:t,optionalClass:this.props.optionalClass,defaultAvatar:c(s.InitialsAvatarWithColorDerivedFromName,{alt:e,dimension:this.props.dimension,name:i,initials:p,shape:t,optionalClass:this.props.optionalClass})};return c(r.default,h)},t.displayName="ContactAvatar",t})(i.default.Component);t.default=d})),define("modules/clean/components/title_bubble",["require","exports","tslib","classnames","react","react-dom","prop-types","jquery","modules/clean/react/components/css"],(function(e,t,n,i,r,s,o,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i),r=n.__importDefault(r),s=n.__importStar(s),o=n.__importDefault(o),a=n.__importDefault(a);var u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isChildFocused:!1},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;a.default(s.findDOMNode(this)).on("focusin.title-bubble",(function(t){return e.setState({isChildFocused:!0})})).on("focusout.title-bubble",(function(t){return e.setState({isChildFocused:!1})})).on("mouseenter.title-bubble",(function(){return"function"==typeof e.props.onMouseEnter?e.props.onMouseEnter():void 0}))},t.prototype.componentWillUnmount=function(){a.default(s.findDOMNode(this)).off("focusin.title-bubble").off("focusout.title-bubble").off("mouseenter.title-bubble")},t.prototype.render=function(){var e=this,t={"c-title-bubble":!0,"is-child-focused":this.state.isChildFocused,"c-title-bubble--respect-line-break":this.props.respectLineBreaks};return t["c-title-bubble--"+this.props.direction.slice(0,1)]=!0,r.default.createElement("div",{className:i.default([t,this.props.className]),"data-title":this.props.text,onClick:function(t){if(t.detail>0)return e.setState({isChildFocused:!1})},onMouseLeave:function(){return e.setState({isChildFocused:!1})}},this.props.children)},t.displayName="TitleBubble",t.propTypes={text:o.default.string.isRequired,direction:o.default.oneOf(["north","south","east","west"]).isRequired,onMouseEnter:o.default.func,respectLineBreaks:o.default.bool,className:o.default.string},t})(r.default.Component),c=l.requireCssWithComponent(u,["/static/css/scooter/scooter-scoped-vflpl9JSl.css"]);t.default=c})),define("modules/clean/contacts/bloodhound_contacts_v2",["require","exports","tslib","bloodhound","modules/clean/contacts/config","modules/clean/contacts/contact","modules/clean/profile_services/profile_services_link","modules/clean/viewer","modules/core/cookies"],(function(e,t,n,i,r,s,o,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BloodhoundContactsV2=void 0,i=n.__importDefault(i),r=n.__importStar(r),o=n.__importStar(o);var u={};function c(e,t){(function(e,t){if(!(e.id in u))return;var n=u[e.id];t=t.filter(s.ContactCommon.is_valid),n.clearRemoteCache(),n.clear(),n.add(t)})(e,t.includeForUser(e.id).contacts)}function d(e){var t=document.createElement("a");t.href=e;var n=t.hostname||window.location.hostname;if(-1===n.indexOf(".dropbox.com",n.length-".dropbox.com".length))throw new Error("Cannot send the CSRF token to "+n);return e}t.BloodhoundContactsV2={getOrCreateForUser:function(e){if(e.id in u)return u[e.id];var t,n=r.getSearchConfigForUser(e);if(n.remoteEndpoint){var p=String(e.id);t={url:d(n.remoteEndpoint),prepare:function(e,t){return t.type="POST",t.headers={"X-CSRF-Token":l.Cookies.read("__Host-js_csrf"),"X-Dropbox-Uid":p},t.data={query:JSON.stringify(e)},t.data._subject_uid=p,t},rateLimitBy:"debounce",rateLimitWait:n.remoteDebounceWait}}var h=new i.default({datumTokenizer:s.ContactCommon.get_index_tokens,queryTokenizer:i.default.tokenizers.whitespace,identify:s.ContactCommon.get_key,sufficient:n.sufficientResults,sorter:s.ContactCommon.sorter,local:[],remote:t});if(u[e.id]=h,a.Viewer.get_viewer().is_user_signed_in(e)){var _=n.localCacheStore.getOrCreateForUser(e);_.load_contacts(!1,(function(t){c(e,t),_.register_for_updates("bloodhound_contacts_v2",(function(t){c(e,t)}))}))}return o.LinkedProfileServices.get_linked_profile_services_for_user(e.id).register_for_service_changes("bloodhound_contacts_v2",(function(e){h.clearRemoteCache()})),u[e.id]},search:function(e,n,i,s){var o=t.BloodhoundContactsV2.getOrCreateForUser(e),a=r.getSearchConfigForUser(e);if(!n)return i([]),void(s&&a.remoteEndpoint&&s([]));var l=a.localCacheStore.getOrCreateForUser(e);l.is_loaded()?o.search(n,i,s):l.load_contacts(!1,(function(e){o.search(n,i,s)})),l.refresh_contacts(!1)},getAll:function(e){return t.BloodhoundContactsV2.getOrCreateForUser(e).all()}}})),define("modules/clean/contacts/cache",["require","exports","tslib","modules/clean/deprecated_ajax/ajax_jquery","modules/clean/bolt/bolt","modules/clean/contacts/cache_type","modules/clean/contacts/list","modules/clean/viewer","modules/core/assert","modules/core/browser"],(function(e,t,n,i,r,s,o,a,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PerUserBoltContactsCache=t.ContactsCacheProto=t.BoltContactsCache=void 0,i=n.__importStar(i),r=n.__importStar(r),o=n.__importDefault(o),u=n.__importStar(u);var c=(function(){function e(e){this.callbacks={},this.one_time_callbacks=[],this.cached_contacts=null,this._cache_download_name=e,this.should_force_refresh=!1,this.request_perf_records=[],this._config=null}return e.initClass=function(){this.MAX_REQUEST_PERF_RECORDS=20},e.prototype.register_for_updates=function(e,t){this.callbacks[e]=t},e.prototype.unregister_for_updates=function(e){null!=this.callbacks[e]&&delete this.callbacks[e]},e.prototype.get_contacts_count=function(){return null!=this.cached_contacts?this.cached_contacts.length():0},e.prototype.get_downloaded_time=function(){var e=this,t=h(u.performance(),"getEntriesByName",(function(t){return t.getEntriesByName(e._get_contacts_downloaded_mark_name())}));return t&&t.length?t[0].startTime:null},e.prototype.get_request_perf_records=function(){return this.request_perf_records},e.prototype._is_contact_get_or_check_ajax_request=function(e){var t=e.initiatorType,n=e.name;return"xmlhttprequest"===t&&n.endsWith(this._config.getUrl)},e.prototype._find_last_perf_entry=function(e){void 0===e&&(e=500);var t=h(u.performance(),"getEntriesByType",(function(e){return e.getEntriesByType("resource")}));if(null!=t?t.length:void 0)for(var n=Math.min(t.length-1,e);n>=0;n--)if(this._is_contact_get_or_check_ajax_request(t[n]))return t[n];return null},e.prototype._record_perf_stats=function(t){void 0===t&&(t={});var n=this._find_last_perf_entry();if(n&&(t.ttfb=n.responseStart-n.requestStart,t.downloading_time=n.responseEnd-n.responseStart,t.duration=n.duration,this.request_perf_records.push(t),this.request_perf_records.length>e.MAX_REQUEST_PERF_RECORDS))return this.request_perf_records=this.request_perf_records.slice(this.request_perf_records.length-1)},e.prototype._get_request_url=function(){throw new Error("method unimplemented")},e.prototype._get_request_params=function(){throw new Error("method unimplemented")},e.prototype._contacts_loaded_callback=function(e){throw new Error("method unimplemented")},e.prototype._fetch_contacts=function(){var e=this;return i.BackgroundRequest({url:this._get_request_url(),data:this._get_request_params(),success:function(t,n,i){var r=JSON.parse(t);if(e._contacts_loaded_callback(r),e._schedule_fetch)return e._schedule_fetch()}})},e.prototype._get_versioned_params=function(e,t){void 0===t&&(t=!0);var n={version:e};return t&&(n.force_refresh=this.should_force_refresh,this.should_force_refresh=!1),null!=this.digest&&(n.digest=this.digest),null!=this.limit&&(n.limit=this.limit),n},e.prototype._get_contacts_downloaded_mark_name=function(){return this._cache_download_name+"-"+this.instance},e.prototype._is_page_hidden=function(){return null!=window.document.visibilityState&&window.document.hidden},e.prototype._add_one_time_callback=function(e){if(null!=e&&!Array.from(this.one_time_callbacks).includes(e))return this.one_time_callbacks.push(e)},e.prototype._invoke_all_callbacks=function(e){return this._invoke_callbacks(this.one_time_callbacks,e,!0),this._invoke_callbacks(this.callbacks,e,!1)},e.prototype._invoke_one_time_callbacks=function(e){return this._invoke_callbacks(this.one_time_callbacks,e,!0)},e.prototype._invoke_callbacks=function(e,t,n){return(function(){for(var i=[],r=0,s=Array.from(Object.keys(e));r<s.length;r++){var o=s[r];e[o](t),n?i.push(delete e[o]):i.push(void 0)}return i})()},e})();t.ContactsCacheProto=c,c.initClass();var d=(function(e){function t(n,i,r){void 0===i&&(i=null),void 0===r&&(r=null);var o=e.call(this,"BoltContactsCache download")||this;return o.bolt_update_callback=o.bolt_update_callback.bind(o),o.bolt_refresh_callback=o.bolt_refresh_callback.bind(o),o.cache_type=n,o.limit=i,o.user_id=r,o.instance=t.INSTANCE++,o.loading_state=t.BOLT_NEED_TO_SEND_REQUEST,o._config=s.CONTACT_CACHE_TYPE_TO_CONFIG[s.ContactCacheType[o.cache_type]],o.current_bolt_states=null,o._notified_states={},o._bolt=null,o._last_refresh_ts=null,o}return n.__extends(t,e),t.initClass=function(){this.INSTANCE=0,this.BOLT_NEED_TO_SEND_REQUEST=0,this.BOLT_REQUEST_SENT=1,this.REFRESH_THRESHOLD=36e5},t.prototype.load_contacts=function(e,n){a.Viewer.get_viewer().is_signed_in&&(this._add_one_time_callback(n),(this.loading_state===t.BOLT_NEED_TO_SEND_REQUEST||e)&&(this.loading_state=t.BOLT_REQUEST_SENT,e&&(this.should_force_refresh=!0),this._fetch_contacts()),!this._should_update_contacts()&&this.is_loaded()&&this._invoke_one_time_callbacks(this.cached_contacts))},t.prototype.refresh_contacts=function(e){void 0===e&&(e=!1);var n=h(u.performance(),"now",(function(e){return e.now()}));if(this._last_refresh_ts||(e=!0),!(!e&&this._last_refresh_ts&&n-this._last_refresh_ts<t.REFRESH_THRESHOLD))return i.BackgroundRequest({url:this._get_refresh_url(),data:this._get_refresh_params({force_refresh:e})}),this._last_refresh_ts=n},t.prototype.is_loaded=function(){return null!=this.cached_contacts},t.prototype.bolt_update_callback=function(e){for(var n=0,i=Array.from(e);n<i.length;n++){var r=i[n];(!Array.from(this._notified_states).includes(r.unique_id)||+this._notified_states[r.unique_id].revision<+r.revision)&&(this._notified_states[r.unique_id]=r)}return this._should_update_contacts()&&(this.loading_state=t.BOLT_NEED_TO_SEND_REQUEST),this.load_contacts()},t.prototype.bolt_refresh_callback=function(e){if(null!=this._bolt&&this._bolt.unsubscribe(),this._bolt=null,this.loading_state=t.BOLT_NEED_TO_SEND_REQUEST,!this._is_page_hidden())return this.load_contacts()},t.prototype._contacts_loaded_callback=function(e){var t=this;if(!this._is_old_contacts(e.bolt_info)){var n=this._is_new_contacts(e.bolt_info);if(this.current_bolt_states=e.bolt_info,null==this._bolt&&this._subscribe_to_bolt(),n&&(null!=e.contacts?e.contacts.length:void 0))return this._record_perf_stats({num_contacts:e.contacts.length}),this.digest=e.digest,this._create_contacts_list(e.contacts),this._invoke_all_callbacks(this.cached_contacts),h(u.performance(),"mark",(function(e){return e.mark(t._get_contacts_downloaded_mark_name())}))}},t.prototype._create_contacts_list=function(e){return this.cached_contacts=o.default.create_contacts_list(e)},t.prototype._subscribe_to_bolt=function(){var e=[];for(var t in this.current_bolt_states){var n=this.current_bolt_states[t];e.push(new r.SignedChannelState(this._config.boltAppId,t.toString(),n.revision,n.token))}return this._bolt=new r.BoltClient(e,this.bolt_update_callback,this.bolt_refresh_callback),this._bolt.start()},t.prototype._is_new_contacts=function(e){return this._first_contacts_are_newer(e,this.current_bolt_states)},t.prototype._is_old_contacts=function(e){return this._first_contacts_are_newer(this.current_bolt_states,e)},t.prototype._first_contacts_are_newer=function(e,t){if(!t)return!0;for(var n in t){var i=t[n];for(var r in e){var s=e[r];if(r===n&&+i.revision<+s.revision)return!0}}return!1},t.prototype._should_update_contacts=function(){return this._is_new_contacts(this._notified_states)},t.prototype._get_request_params=function(){return this._get_versioned_params(1)},t.prototype._get_request_url=function(){return this._config.getUrl},t.prototype._get_refresh_params=function(e){return void 0===e&&(e={}),e},t.prototype._get_refresh_url=function(){return this._config.refreshUrl},t})(c);t.BoltContactsCache=d,d.initClass();var p=(function(e){function t(t,n){var i=this;return l.assert(null!=n.id,"user has invalid id"),(i=e.call(this,t,null)||this).cache_type=t,i.user=n,i}return n.__extends(t,e),t.prototype._get_request_params=function(){var e=this._get_versioned_params(1);return e._subject_uid=this.user.id,e},t.prototype._get_refresh_params=function(e){return void 0===e&&(e={}),e._subject_uid=this.user.id,e},t.prototype._create_contacts_list=function(e){return this.cached_contacts=o.default.create_per_user_contacts_list(e,this.user.id)},t})(d);function h(e,t,n){return null!=e&&"function"==typeof e[t]?n(e,t):void 0}t.PerUserBoltContactsCache=p})),define("modules/clean/contacts/cache_store",["require","exports","tslib","modules/clean/contacts/cache_type","modules/clean/contacts/cache","modules/constants/contacts","modules/clean/viewer"],(function(e,t,n,i,r,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IndividualContactsCacheStore=t.LegacyContactsCacheStore=t.DefaultContactsCacheStore=t.PerUserBoltContactsCacheStore=t.PerViewerBoltContactsCacheStore=t.BoltContactsCacheStore=void 0,s=n.__importStar(s);var a=function(e){this.cacheType=e};t.BoltContactsCacheStore=a;var l=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.getOrCreateForUser=function(e){if(!o.Viewer.get_viewer().is_uid_associated(e.id))throw new Error("Requested contacts cache for a user not associated with the current viewer.");return this.getOrCreateForViewer()},t.prototype.getOrCreateForViewer=function(){return null==this.contactsCache&&(this.contactsCache=new r.BoltContactsCache(this.cacheType)),this.contactsCache},t})(a);t.PerViewerBoltContactsCacheStore=l;var u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uidToContactsCache={},t}return n.__extends(t,e),t.prototype.getOrCreateForUser=function(e){return e.id in this.uidToContactsCache||(this.uidToContactsCache[e.id]=new r.PerUserBoltContactsCache(this.cacheType,e)),this.uidToContactsCache[e.id]},t})(a);t.PerUserBoltContactsCacheStore=u,t.DefaultContactsCacheStore=new l(i.ContactCacheType.ALL);var c=t.DefaultContactsCacheStore;"OFF"!==s.LEGACY_CACHE_LIMIT&&((c=new l(i.ContactCacheType.ALL)).contactsCache=new r.BoltContactsCache(i.ContactCacheType.ALL,+s.LEGACY_CACHE_LIMIT)),t.LegacyContactsCacheStore=c,t.IndividualContactsCacheStore=new u(i.ContactCacheType.INDIVIDUAL)})),define("modules/clean/contacts/cache_type",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONTACT_CACHE_TYPE_TO_CONFIG=t.ContactCacheType=void 0,(function(e){e[e.ALL=0]="ALL",e[e.INDIVIDUAL=1]="INDIVIDUAL"})(t.ContactCacheType||(t.ContactCacheType={})),t.CONTACT_CACHE_TYPE_TO_CONFIG={ALL:{getUrl:"/contacts/get",refreshUrl:"/contacts/refresh",boltAppId:"contacts_cache_notify"},INDIVIDUAL:{getUrl:"/contacts/get_individual_for_user",refreshUrl:"/contacts/refresh_individual_for_user",boltAppId:"individual_contacts_cache_notify"}}})),define("modules/clean/contacts/config",["require","exports","tslib","modules/constants/contacts","modules/clean/contacts/cache_store"],(function(e,t,n,i,r){"use strict";var s;function o(e){return i.MERGE_SEARCH_ALLOWED[e.id]?s.INDIVIDUAL_LOCAL_TEAM_REMOTE:s.ALL_LOCAL}Object.defineProperty(t,"__esModule",{value:!0}),t.getSearchConfigForUser=t.getSearchModeForUser=t.CONTACTS_SEARCH_MODE_TO_CONFIG=t.CONTACTS_SEARCH_DEBOUNCE_WAIT=t.CONTACTS_SEARCH_PREEMPTED_THRESHOLD=t.LOCAL_ONLY_SEARCH_MODES=t.ContactsSearchMode=void 0,i=n.__importStar(i),(function(e){e[e.ALL_LOCAL=0]="ALL_LOCAL",e[e.INDIVIDUAL_LOCAL_TEAM_REMOTE=1]="INDIVIDUAL_LOCAL_TEAM_REMOTE"})(s=t.ContactsSearchMode||(t.ContactsSearchMode={})),t.LOCAL_ONLY_SEARCH_MODES=[s.ALL_LOCAL],t.CONTACTS_SEARCH_PREEMPTED_THRESHOLD=300,t.CONTACTS_SEARCH_DEBOUNCE_WAIT=10,t.CONTACTS_SEARCH_MODE_TO_CONFIG={ALL_LOCAL:{localCacheStore:r.DefaultContactsCacheStore,sufficientResults:1e3,remoteDebounceWait:t.CONTACTS_SEARCH_DEBOUNCE_WAIT},INDIVIDUAL_LOCAL_TEAM_REMOTE:{localCacheStore:r.IndividualContactsCacheStore,remoteEndpoint:"/team/search_contacts",remoteBatchEndpoint:"/team/search_contacts_batch",sufficientResults:1e3,remoteDebounceWait:t.CONTACTS_SEARCH_DEBOUNCE_WAIT}},t.getSearchModeForUser=o,t.getSearchConfigForUser=function(e){return t.CONTACTS_SEARCH_MODE_TO_CONFIG[s[o(e)]]}})),define("modules/clean/contacts/contact",["require","exports","tslib","modules/clean/contacts/types","modules/core/assert","modules/clean/validators/validators"],(function(e,t,n,i,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Contact=t.ContactCommon=void 0,i=n.__importDefault(i);var o=s.validators.check(s.validators.create(["EmailValidator"]));var a=(function(){function e(){}return e.sorter=function(e,t){return t.domain_contact&&!e.domain_contact?-1:e.domain_contact&&!t.domain_contact?1:e.sort_key||t.sort_key?e.sort_key?t.sort_key?e.sort_key>t.sort_key?-1:e.sort_key<t.sort_key?1:0:-1:1:0},e.is_valid=function(e){return e.dbx_account_id?e.type===i.default.DBX_ID||e.type===i.default.EMAIL:e.group_id?e.type===i.default.NEW_STYLE_GROUP:!!e.email&&e.type===i.default.EMAIL},e.get_key=function(t){return r.assert(e.is_valid(t),"invalid contact: type: "+t.type),t.dbx_account_id?"DBX_USER-"+t.dbx_account_id:t.group_id?"DBX_GROUP-"+t.group_id:"CONTACT-"+t.type+"-"+t.email},e.get_index_tokens=function(e){var t=[];return e.name&&t.push(e.name),e.email&&t.push(e.email),e.fname&&t.push(e.fname),e.lname&&t.push(e.lname),e.name_tokens&&(t=t.concat(e.name_tokens)),t},e})();t.ContactCommon=a;var l=(function(){function e(e){var t=e.dbx_account_id,n=e.type,i=e.name,r=e.email,s=e.fb_id,o=e.group_id,a=e.group_size,l=e.photo_url,u=e.members,c=e.avatar_url,d=e.invalid,p=e.on_team,h=e.domain_contact,_=e.dbx_team_id,f=e.nameMatch,m=e.emailMatch,g=e.pending,y=e.join_state,v=e.query,b=e.is_directory_restricted,w=void 0!==b&&b,k=e.invitability_state;this.dbx_account_id=t,this.type=n,this.name=i,this.email=r,this.fb_id=s,this.group_id=o,this.group_size=a,this.photo_url=l,this.members=u,this.avatar_url=c,this.invalid=d,this.on_team=p,this.domain_contact=h,this.dbx_team_id=_,this.nameMatch=f,this.emailMatch=m,this.pending=g,this.join_state=y,this.query=v,this.is_directory_restricted=!!w,this.team=this.on_team,this.invitability_state=k}return e.buildFromRawEmail=function(t){var n=(function(e){return e.toLowerCase()})(t);return new e({name:n,email:n,type:i.default.EMAIL,invalid:!o(t),on_team:!1,pending:!0,query:n})},e.prototype.getKey=function(){return a.get_key(this)},e.prototype.getContactID=function(){switch(this.type){case i.default.FB:return this.fb_id;case i.default.NEW_STYLE_GROUP:return this.group_id;default:return this.email}},e})();t.Contact=l})),define("modules/clean/contacts/contact_token_state",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContactTokenState=void 0,t.ContactTokenState={invalid:"invalid",warn:"warn",pending:"pending",ok:"ok"}})),define("modules/clean/contacts/data_v2",["require","exports","tslib","modules/clean/deprecated_ajax/ajax_jquery","modules/clean/contacts/bloodhound_contacts_v2","modules/clean/contacts/config","modules/clean/contacts/contact","modules/clean/contacts/types","modules/clean/fuzzy"],(function(e,t,n,i,r,s,o,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContactsDataSourceV2=void 0,i=n.__importStar(i),s=n.__importStar(s),a=n.__importDefault(a),l=n.__importDefault(l);var u=(function(){function e(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=!0),this.query=this.search,this.query_batch=this.searchBatch,this.user=e,this.filterFunc=t,this.excludeDomainContacts=n,this.excludeDirectoryRestrictedContacts=i,this.searchConfig=s.getSearchConfigForUser(e),this.searchMode=s.getSearchModeForUser(e),this.searchModeName=s.ContactsSearchMode[this.searchMode],r.BloodhoundContactsV2.getOrCreateForUser(this.user)}return e.prototype.search=function(e,t,n){var i=this;if(""===(e=this.normalizeQuery(e)))return t([]),void(n&&n([]));r.BloodhoundContactsV2.search(this.user,e,(function(n){return i.processMatches(n,t,e)}),(function(t){return i.processMatches(t,n,e)}))},e.prototype.searchBatch=function(e,t,n){var i=this,r=this.searchConfig.localCacheStore.getOrCreateForUser(this.user);if(r.is_loaded())return this.searchBatchInternal(e,t,n);r.load_contacts(!0,(function(){return i.searchBatchInternal(e,t,n)}))},e.prototype.searchBatchInternal=function(e,t,n){for(var i=this,s=e.map(this.normalizeQuery).filter((function(e){return e.length>0})),a={},l=function(e){r.BloodhoundContactsV2.search(u.user,e,(function(t){a[e]=i.processMatches(t,void 0,e)}))},u=this,c=0,d=s;c<d.length;c++){l(d[c])}if(t(a),this.searchConfig.remoteBatchEndpoint){this.searchRemoteBatch(s,(function(e){if(n){var t={},r=function(n){if(e.hasOwnProperty(n)){var r=a[n].map(o.ContactCommon.get_key),s=e[n].filter((function(e){var t=o.ContactCommon.get_key(e);return r.every((function(e){return e!==t}))}));t[n]=i.processMatches(s)}};for(var s in e)r(s);n(t)}}))}},e.prototype.normalizeQuery=function(e){return e.trim().toLowerCase()},e.prototype.isSearchLocalOnly=function(){return-1!==s.LOCAL_ONLY_SEARCH_MODES.indexOf(this.searchMode)},e.prototype.getStats=function(){var e=this.searchConfig.localCacheStore.getOrCreateForUser(this.user);return{numLocalContacts:e.get_contacts_count(),localContactsDownloadedTime:e.get_downloaded_time()}},e.prototype.searchRemoteBatch=function(e,t){i.WebRequest({url:this.searchConfig.remoteBatchEndpoint,type:"post",subject_user:this.user.id,dataType:"json",data:{queries:JSON.stringify(e)},success:t})},e.prototype.isTeamContact=function(e){return this.user.is_team&&null!=e.team&&e.team},e.isDirectoryRestrictedContact=function(e,t){var n=!!e.is_directory_restricted,i=t&&t===e.email;return n&&!i},e.prototype.processMatches=function(t,n,i){for(var r=[],s=0,u=t;s<u.length;s++){var c=u[s];i&&(c.nameMatch=l.default.match(i,c.name||""),c.emailMatch=l.default.match(i,c.email||"")),c.on_team=!(c.type===a.default.FB||!this.isTeamContact(c));var d=new o.Contact(c);d.pending=!1;var p=this.excludeDomainContacts&&d.domain_contact,h=this.excludeDirectoryRestrictedContacts&&e.isDirectoryRestrictedContact(d,i);p||h||this.filterFunc&&!this.filterFunc(d)||r.push(d)}return n&&n(r),r},e.prototype.getAll=function(e){var t=this,n=this.searchConfig.localCacheStore.getOrCreateForUser(this.user);if(n.is_loaded()){var i=r.BloodhoundContactsV2.getAll(this.user).map((function(e){return new o.Contact(e)})),s=this.filterFunc?i.filter(this.filterFunc):i;e(s)}else n.load_contacts(!0,(function(n){if(n){var i=n.contacts,r=t.filterFunc?i.filter(t.filterFunc):i;e(r)}}))},e})();t.ContactsDataSourceV2=u})),define("modules/clean/contacts/list",["require","exports","tslib","modules/clean/contacts/types"],(function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i);var r=(function(){function e(e,t){var n=this;this.filterContacts=this.filterContacts.bind(this),this.length=this.length.bind(this),this.slice=this.slice.bind(this),this.includeForUser=this.includeForUser.bind(this),this.includeForViewer=this.includeForViewer.bind(this),this.excludeByEmail=this.excludeByEmail.bind(this),this.excludeMe=this.excludeMe.bind(this),this.excludeNewStyleGroups=this.excludeNewStyleGroups.bind(this),this.excludeFacebook=this.excludeFacebook.bind(this),this.excludeTeamMembers=this.excludeTeamMembers.bind(this),this.excludePairedUserDuplicates=this.excludePairedUserDuplicates.bind(this),this.excludeNonTeam=this.excludeNonTeam.bind(this),this.excludeNonTeamActive=this.excludeNonTeamActive.bind(this),this.excludeSuspended=this.excludeSuspended.bind(this),this.sortByTeamFirst=this.sortByTeamFirst.bind(this),this._excludeType=this._excludeType.bind(this),this._lowercaseContact=this._lowercaseContact.bind(this),this.contacts=e,this.owningUserId=t,this.lcontacts=Array.from(this.contacts).map((function(e){return n._lowercaseContact(e)}))}return e.create_contacts_list=function(t){return new e(t,null)},e.create_per_user_contacts_list=function(t,n){return new e(t,n)},e.prototype.filterContacts=function(t){return new e(this.contacts.filter(t),this.owningUserId)},e.prototype.length=function(){return this.contacts.length},e.prototype.slice=function(t,n){return new e(this.contacts.slice(t,n),this.owningUserId)},e.prototype.includeForUser=function(t){return null!=this.owningUserId?this.owningUserId===t?this:new e([],t):new e(this.contacts.filter((function(e){return e.owning_user_id===t})),t)},e.prototype.includeForViewer=function(e){var t=e.get_user_ids();return this.filterContacts((function(e){return Array.from(t).includes(e.owning_user_id)}))},e.prototype.excludeByEmail=function(e){return e=e?e.toLowerCase():"",this.filterContacts((function(t){return!(e===t.email.toLowerCase())}))},e.prototype.excludeMe=function(){return this.filterContacts((function(e){return!e.is_owner}))},e.prototype.excludeNewStyleGroups=function(){return this._excludeType(i.default.NEW_STYLE_GROUP)},e.prototype.excludeFacebook=function(){return this._excludeType(i.default.FB)},e.prototype.excludeTeamMembers=function(){return this.filterContacts((function(e){return!e.team}))},e.prototype.excludePairedUserDuplicates=function(){return this.filterContacts((function(e){return!e.paired_user_duplicate}))},e.prototype.excludeNonTeam=function(){return this.filterContacts((function(e){return e.team}))},e.prototype.excludeNonTeamActive=function(){return this.filterContacts((function(e){return e.team&&"active"===e.join_state}))},e.prototype.excludeSuspended=function(){return this.filterContacts((function(e){return"suspended"!==e.join_state}))},e.prototype.sortByTeamFirst=function(){return new e(e.sortContactsByTeamFirst(this.contacts),this.owningUserId)},e.sortContactsByTeamFirst=function(e){for(var t=[],n=[],i=0,r=Array.from(e);i<r.length;i++){var s=r[i];s.team?t.push(s):n.push(s)}return t.concat(n)},e.prototype._excludeType=function(e){return this.filterContacts((function(t){return t.type!==e}))},e.prototype._lowercaseContact=function(e){var t={};for(var n in e){var i=e[n];("string"==typeof i||i instanceof String)&&(i=i.toLowerCase()),t[n]=i}return t},e})();t.default=r})),define("modules/clean/contacts/tokenizer",["require","exports","tslib","classnames","react","prop-types","modules/clean/analytics","modules/clean/avatar/contact_avatar","modules/clean/contacts/config","modules/clean/contacts/contact","modules/clean/contacts/contact_token_state","modules/clean/contacts/data_v2","modules/clean/contacts/typeahead","modules/clean/contacts/types","modules/clean/em_string","modules/clean/tokenizer","modules/clean/validators/validators","modules/core/browser","modules/core/i18n"],(function(e,t,n,i,r,s,o,a,l,u,c,d,p,h,_,f,m,g,y){"use strict";var v,b;Object.defineProperty(t,"__esModule",{value:!0}),t.SLOW_CONTACT_SEARCH_THRESHOLD=t.ContactTokenState=t.ContactTokenValidator=t.ContactsTokenizer=t.validate_email=void 0,i=n.__importDefault(i),r=n.__importDefault(r),s=n.__importDefault(s),a=n.__importDefault(a),l=n.__importStar(l),h=n.__importDefault(h),g=n.__importStar(g),Object.defineProperty(t,"ContactTokenState",{enumerable:!0,get:function(){return c.ContactTokenState}});t.SLOW_CONTACT_SEARCH_THRESHOLD=100,t.validate_email=m.validators.check(m.validators.create(["EmailValidator"]));var w=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._getTokenName=function(){switch(t.props.contact.type){case h.default.FB:return"fb_ids";case h.default.EMAIL:return"emails";case h.default.NEW_STYLE_GROUP:return"new_style_group_ids";default:return"invalids"}},t._getTokenValue=function(){switch(t.props.contact.type){case h.default.FB:return t.props.contact.fb_id;case h.default.NEW_STYLE_GROUP:return t.props.contact.group_id;default:return t.props.contact.email}},t._renderIcon=function(){return t.props.contact.type===h.default.FB?r.default.createElement("img",{className:"token-icon",src:"/static/images/icons/fb_16-vflbiYTkC.png"}):t.props.contact.type===h.default.NEW_STYLE_GROUP||t.props.contact.dbx_account_id||t.props.contact.photo_url?r.default.createElement(a.default,{dimension:16,contact:t.props.contact,optionalClass:"token-icon"}):""},t._renderInput=function(){return r.default.createElement("input",{type:"hidden",name:t._getTokenName(),value:t._getTokenValue()})},t._renderText=function(){var e=t.props.contact.name||t.props.contact.email;return _.Emstring.em_snippet(e,22)},t._makeCloseButton=function(){return t.props.onRemove?r.default.createElement("span",{className:"tokenizer-token-close",onClick:function(e){return e.preventDefault(),e.stopPropagation(),t.props.onRemove(t.props.contact),!1},dangerouslySetInnerHTML:{__html:"&nbsp;"}}):""},t}return n.__extends(t,e),t.prototype.render=function(){var e={"tokenizer-token":!0,"contact-token":!0,invalid:this.props.tokenState===c.ContactTokenState.invalid,warned:this.props.tokenState===c.ContactTokenState.warn,pending:this.props.tokenState===c.ContactTokenState.pending};e[this.props.customClass]=null!=this.props.customClass,e[this.props.className]=null!=this.props.className;var t=i.default(e);return r.default.createElement("a",n.__assign({tabIndex:-1},this.props,{className:t}),this._renderInput(),this._renderIcon(),this._renderText(),this._makeCloseButton())},t.displayName="ContactsToken",t.propTypes={customClass:s.default.string,className:s.default.string,contact:s.default.object.isRequired,onRemove:s.default.func,tabIndex:s.default.number,tokenState:s.default.oneOf((function(){var e=[];for(v in c.ContactTokenState)b=c.ContactTokenState[v],e.push(b);return e})()).isRequired},t})(r.default.Component),k={basic:function(e){var t=e.name&&!e.invalid&&e.email!==e.name;return{state:e.invalid?c.ContactTokenState.invalid:c.ContactTokenState.ok,msg:t?e.email:null}},warn:function(e){return{state:e.pending?c.ContactTokenState.pending:e.on_team?c.ContactTokenState.ok:e.invalid?c.ContactTokenState.invalid:c.ContactTokenState.warn,msg:null}},forbid:function(e){return{state:e.pending?c.ContactTokenState.pending:e.on_team?c.ContactTokenState.ok:c.ContactTokenState.invalid,msg:null}}};t.ContactTokenValidator=k;var M=(function(e){function i(i){var s=e.call(this,i)||this;return s._initContactsDataSource=function(e){var t=e.user,n=e.customContactFilter,i=e.excludeDomainContacts,r=e.customContactsDataSourceFactory;return r?r(t,n):new d.ContactsDataSourceV2(t,n,i)},s._validateTokens=function(e,n){if(void 0===n&&(n=!1),(null!=e?e.length:void 0)>0)return(function(){for(var i=[],r=0,s=Array.from(e);r<s.length;r++){var o=s[r];o.type===h.default.EMAIL&&(o.invalid=!t.validate_email(o.email)),n?(o.query=o.query||o.email||o.name,i.push(o.pending=!0)):i.push(void 0)}return i})()},s.finishLogging=function(e){var t=s.contactsDataSource.getStats().numLocalContacts;if(s._flush_unfinished_queries_cache(),s.props.shouldLogContactSearch)return s.contact_search_logger.log_records(s.props.user.id,e,t)},s._logTokenChangeEvent=function(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n={}),s.contact_search_logger){if(t)return s.contact_search_logger.flag_record_as_removed(e.getContactID());var i={context:s._getLoggingContext(),contact_type:e.type,contact_id:e.getContactID(),contact_name:e.name,sort_variant:null,event_ts:S(g.performance(),"now",(function(e){return e.now()}))};for(v in n)b=n[v],i[v]=b;return s.contact_search_logger.add_record(i)}},s._logSearchComplete=function(e,t,n){if(void 0===n&&(n=!0),s._shouldLogSearch()&&e){var i=g.performance().now(),r=s.unfinished_contact_search_queries[e];if(r){var o=r.begin_time;!("ttfr"in r)&&t>0&&(r.ttfr=Math.floor(i-o)),n?(r.local_duration=Math.floor(i-o),r.num_local_results=t):(r.remote_duration=Math.floor(i-o),r.num_additional_remote_results=t),r.num_results+=t;return s.contactsDataSource.isSearchLocalOnly()&&n||!n?(r=s._prepareSearchStatsForLogging(r,e,i,!0),s.contact_search_logger.add_timing_record(r),s.contact_search_logger.count_search(r.is_slow),delete s.unfinished_contact_search_queries[e]):void 0}}},s._logSearchBegin=function(e){if(s._shouldLogSearch()&&e){var t=g.performance().now();return s._flush_unfinished_queries_cache(t),s.unfinished_contact_search_queries[e]={begin_time:t,num_results:0}}},s._shouldLogSearch=function(){var e;return s.props.shouldLogContactSearch&&null!=s.contact_search_logger&&null!=(null===(e=g.performance())||void 0===e?void 0:e.now)},s._flush_unfinished_queries_cache=function(e){if(s._shouldLogSearch()){for(var t in null==e&&(e=g.performance().now()),s.unfinished_contact_search_queries){var n=s.unfinished_contact_search_queries[t];e-n.begin_time<l.CONTACTS_SEARCH_PREEMPTED_THRESHOLD&&(n.is_preempted=!0),n=s._prepareSearchStatsForLogging(n,t,e,!1),s.contact_search_logger.add_timing_record(n),s.contact_search_logger.count_search(n.is_slow)}return s.unfinished_contact_search_queries={}}},s._prepareSearchStatsForLogging=function(e,t,n,i){var r=e.begin_time;e.duration=Math.floor(n-r),"ttfr"in e?e.is_slow=e.ttfr>100:i&&0===e.num_results?e.is_slow=!1:e.is_slow=e.duration>100;var o=s.contactsDataSource.getStats().localContactsDownloadedTime;return e.started_before_download=null==o||r<o,"is_preempted"in e||(e.is_preempted=!1),e.context=s._getLoggingContext(),e.query_length=t.length,e.is_finished=i,e},s._getLoggingContext=function(){var e="react_tokenizer";return null!=s.props.context&&(e+="_"+s.props.context),e},s.addExternalContacts=function(e){return s.refs.tokenizer.addExternalTokens(e)},s._renderToken=function(e){return r.default.createElement(w,{contact:e,tabIndex:s.props.disableAdditionalInput?0:-1,tokenState:s.props.customContactValidator(e).state})},s._renderTokenHover=function(e){return s.props.customContactValidator(e).msg},s._autoSelectMatch=function(e,t){if(!t||!e)return null;e=s.contactsDataSource.normalizeQuery(e);for(var n={email:[],name:[]},i=0,r=Array.from(t);i<r.length;i++){var o=r[i],a=o.email?s.contactsDataSource.normalizeQuery(o.email):null,l=o.name?s.contactsDataSource.normalizeQuery(o.name):null;e===a?n.email.push(o):e===l&&n.name.push(o)}for(var u=0,c=["email","name"];u<c.length;u++){var d=c[u];if(1===n[d].length)return n[d][0]}return null},s._queryTokens=function(e,t){var n=e.filter((function(e){return e.pending&&e.query}));if(n.length){var i=Array.from(n).map((function(e){return e.query})),r=[],o=function(n){var i=[];e=[];for(var o=s.serializeInputData(t).tokens,a=0,l=Array.from(o);a<l.length;a++){var u=l[a],c=u;if(u.pending&&u.query){var d=s.contactsDataSource.normalizeQuery(u.query),p=s._autoSelectMatch(d,n[d]);p&&(c=p,r.push(p))}v=c.getKey(),Array.from(i).includes(v)||(i.push(v),e.push(c))}return r.length>0&&Promise.resolve(s._asyncValidateContacts(r)),t.replaceTokens(e)},a=o,l=o;return s.contactsDataSource.searchBatch(i,a,l)}},s.tokenizeEmails=function(e,n){var i;void 0===n&&(n=!1);var r=e.split(/[,|;\n ]+/);2===r.length&&t.validate_email(r[0]+r[1])?(i=[r[0]+r[1]],n=!0):i=2===r.length&&t.validate_email(r[0])&&""===r[1]?r:e.split(/[,|;\n]+/);var o="";n||(o=i.pop());for(var a=[],l=0,c=Array.from(i);l<c.length;l++){var d=c[l].trim();""!==d&&a.push(new u.Contact({name:d,email:d,type:h.default.EMAIL,invalid:!t.validate_email(d),on_team:!1,pending:!0,query:d}))}return Promise.resolve(s._asyncValidateContacts(a)),{tokens:a,value:o}},s._asyncValidateContacts=function(e){return n.__awaiter(s,void 0,Promise,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return this.props.asyncValidateContacts&&e.length>0?[4,this.props.asyncValidateContacts(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},s._postSelect=function(e){s._asyncValidateContacts([e])},s.getInputValue=function(e){return void 0===e&&(e=void 0),(e||s.refs.tokenizer).getInputValue()},s.getContacts=function(){var e=s.serializeInputData(),t=e.tokens,n=e.value,i=s.tokenizeEmails(n,!0);return t.concat(i.tokens)},s.removeAllTokens=function(){var e=s.serializeInputData().tokens;s.refs.tokenizer.removeTokens(e)},s.tokenizeAll=function(){return s.refs.tokenizer.tokenizeAll()},s.serializeInputData=s.serializeInputData.bind(s),s}return n.__extends(i,e),i.prototype.componentWillReceiveProps=function(e){e.user===this.props.user&&e.customContactFilter.toString()===this.props.customContactFilter.toString()||(this.contactsDataSource=this._initContactsDataSource(e)),this._validateTokens(null!=e.populatedInputData?e.populatedInputData.tokens:void 0)},i.prototype.componentWillMount=function(){this.contactsDataSource=this._initContactsDataSource(this.props),this._validateTokens(null!=this.props.populatedInputData?this.props.populatedInputData.tokens:void 0,!0)},i.prototype.componentDidMount=function(){var e=this.props,t=e.shouldLogContactSearch,n=e.populatedInputData,i=e.onContentsChange;if(t&&(this.contact_search_logger=new o.ContactSearchLogger(this._getLoggingContext(),this.contactsDataSource.searchModeName),this.unfinished_contact_search_queries={}),n.tokens&&n.tokens.length||n.value&&n.value.length){var r=this.serializeInputData(),s=r.tokens,a=r.value;"function"==typeof i&&i(s,a)}},i.prototype.render=function(){var e=this;return r.default.createElement(f.Tokenizer,{ref:"tokenizer",dataSource:this.contactsDataSource,customClass:this.props.customClass,initialInputText:this.props.populatedInputData.value,placeholderText:this.props.placeholder,renderSelector:function(){return r.default.createElement(p.ContactsTypeaheadSelector,{showContactImport:e.props.showContactImport,teamGroupInfo:e.props.teamGroupInfo,user:e.props.user,listHeight:e.props.listHeight})},renderInput:function(){return r.default.createElement("textarea",{className:"contacts-tokenizer-input",id:e.props.id,rows:1,autoCapitalize:"off"})},renderToken:this._renderToken,renderTokenHover:this._renderTokenHover,onContentsChange:this.props.onContentsChange,onTokensAdd:this._queryTokens,stringTokenizer:this.tokenizeEmails,populatedTokenData:this.props.populatedInputData.tokens,tabIndex:this.props.tabIndex,tokenSpacing:this.props.tokenSpacing,focusOnMount:this.props.focusOnMount,logSearchBegin:this._logSearchBegin,logSearchComplete:this._logSearchComplete,logTokenChangeEvent:this._logTokenChangeEvent,disableAdditionalInput:this.props.disableAdditionalInput,disabled:this.props.disabled,resetTokenData:this.props.resetTokenData,tokenizeOnOutOfFocus:this.props.tokenizeOnOutOfFocus,postSelect:this._postSelect,validatedTokenMap:this.props.validatedContactMap},this.props.children)},i.prototype.serializeInputData=function(e){return(e=e||this.refs.tokenizer).serializeInputData()},i.displayName="ContactsTokenizer",i.propTypes={user:s.default.object.isRequired,context:s.default.string,customClass:s.default.string,customContactFilter:s.default.func,excludeDomainContacts:s.default.bool,customContactValidator:s.default.func,focusOnMount:s.default.bool,id:s.default.string,onContentsChange:s.default.func,placeholder:s.default.string,populatedInputData:s.default.shape({tokens:s.default.array,value:s.default.string}),tabIndex:s.default.number,showContactImport:s.default.bool,shouldLogContactSearch:s.default.bool,teamGroupInfo:s.default.shape({id:s.default.string,name:s.default.string}),tokenSpacing:s.default.number,disableAdditionalInput:s.default.bool,disabled:s.default.bool,resetTokenData:s.default.bool,customContactsDataSourceFactory:s.default.func,listHeight:s.default.number,tokenizeOnOutOfFocus:s.default.bool,asyncValidateContacts:s.default.func,validatedContactMap:s.default.object},i.defaultProps={customContactFilter:function(e){return!0},customContactValidator:k.basic,excludeDomainContacts:!0,focusOnMount:!1,id:null,placeholder:y.intl.formatMessage({id:"dpTWyj",defaultMessage:"Invite more people"}),populatedInputData:{tokens:[],value:""},tokenSpacing:4,showContactImport:!1,shouldLogContactSearch:!1,teamGroupInfo:null,disableAdditionalInput:!1,disabled:!1,resetTokenData:!1,tokenizeOnOutOfFocus:!1,asyncValidateContacts:null,validatedContactMap:null},i})(r.default.Component);function S(e,t,n){return null!=e&&"function"==typeof e[t]?n(e,t):void 0}t.ContactsTokenizer=M})),define("modules/clean/contacts/typeahead",["require","exports","tslib","classnames","create-react-class","react","prop-types","lodash","modules/clean/avatar/contact_avatar","modules/clean/contacts/types","modules/clean/contacts/util","modules/clean/css","modules/clean/em_string","modules/clean/profile_services/popup_handler","modules/clean/profile_services/profile_services_constants","modules/clean/profile_services/profile_services_link","modules/clean/react/flag","modules/clean/react/image","modules/clean/react/paging_list","modules/clean/react/sprite","modules/clean/react/title_bubble","modules/clean/static_urls","modules/clean/typeahead","modules/core/assert","modules/core/i18n","modules/core/notify","modules/clean/react/sticky_position"],(function(e,t,n,i,r,s,o,a,l,u,c,d,p,h,_,f,m,g,y,v,b,w,k,M,S,E,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThirdPartyImportOption=t.ExpandImportOption=t.ContactsTypeaheadSelectorOption=t.ContactsTypeaheadSelector=void 0,i=n.__importDefault(i),r=n.__importDefault(r),s=n.__importDefault(s),o=n.__importDefault(o),a=n.__importStar(a),l=n.__importDefault(l),u=n.__importDefault(u),c=n.__importDefault(c),d=n.__importStar(d),_=n.__importDefault(_),m=n.__importStar(m),y=n.__importDefault(y);var A=function(e,t){return a.assignIn({},e,t)},D=A(k.TypeaheadSelectorMixin,{getOptions:function(){var e=this;if(null==this.props.queryOptions)return[];if(this.state.importsExpanded)return Array.from(_.default.importable_contact_services()).map((function(t){return new P({provider:t,connected:e.profile_services.service_is_connected(t)})}));var t=this.props.queryOptions.slice();return this.props.teamGroupInfo?t.push(c.default.teamGroupInfoToContact(this.props.teamGroupInfo)):(null!=this.profile_services?this.profile_services.has_unconnected_services(!0):void 0)&&t.push(new R),t},renderOption:function(e){return e instanceof R?s.default.createElement(x,null):e instanceof P?s.default.createElement(L,{import:e}):this.props.renderQueryOption(e)},onSelect:function(e){if(e instanceof R)return this._changeSelectionIndex(0),this.setState({importsExpanded:!0});if(e instanceof P){var t;if(M.assert((t=e.provider,Array.from(_.default.importable_contact_services()).includes(t)),"invalid party contact provider "+e.provider),this.profile_services.service_is_connected(e.provider)){var n=S.intl.formatMessage({id:"68wybz",defaultMessage:"You're already connected to {service_name}"},{service_name:_.default.to_name(e.provider)});return void E.Notify.success(n)}return this.link_handler.auth_service_with_user(e.provider,this.props.user.id,(function(e){return f.ProfileServicesLinkingHandler.show_import_notifications(e)}))}return this.props.onSelect(e)},reset:function(){return this._changeSelectionIndex(0),this.setState({importsExpanded:!1})}}),T=r.default({displayName:"ContactsTypeaheadSelector",mixins:[D],propTypes:{customClass:o.default.string,onSelect:o.default.func.isRequired,queryOptions:o.default.array,renderQueryOption:o.default.func.isRequired,showContactImport:o.default.bool,teamGroupInfo:o.default.shape({id:o.default.string,name:o.default.string}),user:o.default.object.isRequired,listHeight:o.default.number},componentWillMount:function(){if(this.link_handler=new f.ProfileServicesLinkingHandler,this.profile_services=null,null===this.props.teamGroupInfo&&this.props.showContactImport&&null!=this.props.user)return this.profile_services=f.LinkedProfileServices.get_linked_profile_services_for_user(this.props.user.id)},componentWillReceiveProps:function(e){return 0===(null!=e.queryOptions?e.queryOptions.length:void 0)?this._changeSelectionIndex(-1):(null!=e.queryOptions?e.queryOptions.length:void 0)>0&&-1===this.state.selectionIndex?this._changeSelectionIndex(0):void 0},shouldComponentUpdate:function(e,t){return!a.isEqual(e,this.props)||!a.isEqual(t,this.state)},getDefaultProps:function(){return{showContactImport:!1,teamGroupInfo:null,onSelect:function(e){},renderQueryOption:function(e){return s.default.createElement(I,{contact:e})}}},onSelectionIndexChange:function(e){return null!=this.refs.pagingList?this.refs.pagingList.scrollAround(e):void 0},render:function(){if(d.require_css("/static/css/react/contacts_typeahead-vflRzfV9H.css"),!this.getOptions().length)return s.default.createElement("div",null);var e={"typeahead-selector":!0,"contacts-selector":!0};e[this.props.customClass]=null!=this.props.customClass;var t=this.props.listHeight;return s.default.createElement(y.default,{customClass:i.default(e),pageSize:4,itemSize:54,ref:"pagingList",listHeight:t},this.renderOptions())}});t.ContactsTypeaheadSelector=T;var I=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderPrimary=function(){return t._renderMatch(t.props.contact.name,t.props.contact.nameMatch)},t._renderSecondary=function(){switch(t.props.contact.type){case u.default.EMAIL:return t.props.contact.email===t.props.contact.name?"":t._renderMatch(t.props.contact.email,t.props.contact.emailMatch);case u.default.FB:return S.intl.formatMessage({id:"k5ONol",defaultMessage:"Facebook message"});case u.default.NEW_STYLE_GROUP:return t.props.contact.members;default:return""}},t._renderMatch=function(e,t){if(e&&(e=p.Emstring.em_snippet(e,22)),!t)return e;for(var n=e.indexOf("â€¦"),i=0,r=[],o=0,a=Array.from(t.highlighted);o<a.length;o++){var l=a[o],u=l[0],c=l[1];u>i&&r.push(e.slice(i,u));var d=u+c;d>n&&-1!==n&&(d=n);var h=e.slice(u,d);r.push(s.default.createElement("strong",{key:"highlight-"+h+"-"+u},h)),i=d}return i<e.length&&r.push(e.slice(i)),r},t._renderIcon=function(){return s.default.createElement("div",{className:"u-pad-right-xs"},s.default.createElement(l.default,{dimension:32,contact:t.props.contact,optionalClass:"contact-icon"}))},t._renderDomainTooltip=function(){return s.default.createElement("div",{className:"u-pad-right-xs"},s.default.createElement(b.TitleBubble,{content:S.intl.formatMessage({id:"r+IKuD",defaultMessage:"Suggested contact from your domain"}),position:C.StickyPosition.BOTTOM},s.default.createElement(v.Sprite,{group:"web",name:"info",alt:S.intl.formatMessage({id:"0BRgfC",defaultMessage:"Domain contact"})})))},t}return n.__extends(t,e),t.prototype.render=function(){var e;(e={"contacts-typeahead-option":!0})[this.props.customClass]=null!=this.props.customClass,null!=this.props.className&&(e[this.props.className]=!0);var t={primary:this._renderPrimary(),secondary:this._renderSecondary()};return t=a.pickBy(t,(function(e){return""!==e})),s.default.createElement("li",n.__assign({},A(this.props,{className:i.default(e)})),s.default.createElement(m.Flag,{leftAttachment:this._renderIcon(),rightAttachment:this.props.contact.domain_contact?this._renderDomainTooltip():void 0},(function(){var n=[];for(var r in t){var o=t[r];(e={"option-only":1===a.size(t)})["option-"+r]=!0,n.push(s.default.createElement("div",{className:i.default(e),key:"option-"+r},o))}return n})()))},t.displayName="ContactsTypeaheadSelectorOption",t.propTypes={contact:o.default.object.isRequired,customClass:o.default.string},t})(s.default.Component);t.ContactsTypeaheadSelectorOption=I;var R=(function(){function e(){}return e.prototype.getKey=function(){return"expand-importer"},e})(),x=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e={"expand-imports-option":!0,"contacts-typeahead-option":!0};return null!=this.props.className&&(e[this.props.className]=!0),s.default.createElement("li",n.__assign({},A(this.props,{className:i.default(e)})),s.default.createElement(m.Flag,{leftAttachment:s.default.createElement(g.Image,{className:"u-pad-right-xs",src:w.static_url("/static/images/icons/icon-import-vflOL9sCs.png"),srcHiRes:w.static_url("/static/images/icons/icon-import@2x-vfluE8TBO.png")})},s.default.createElement("div",{className:"option-primary option-only"},S.intl.formatMessage({id:"Zq8VvX",defaultMessage:"Import contacts"}))))},t.displayName="ExpandImportOption",t})(s.default.Component);t.ExpandImportOption=x;var P=(function(){function e(e){var t=e.provider,n=e.connected;this.provider=t,this.connected=n}return e.prototype.getKey=function(){return"third-party-import"+this.provider},e})(),L=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={showSpinner:!1},t.show_contact_import_spinner=function(e){if(t.props.import.provider===e.provider)return t.setState({showSpinner:!0})},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){return this.authCompleteListenerToken=h.addAuthCompleteListener(this.show_contact_import_spinner)},t.prototype.componentWillUnmount=function(){return h.removeAuthCompleteListener(this.authCompleteListenerToken)},t.prototype.render=function(){var e=this.props.import,t=e.provider,r=e.connected,o=_.default.to_name(t);!r&&this.state.showSpinner&&(o=S.intl.formatMessage({id:"95l3d4",defaultMessage:"Importing {service_name} Contacts"},{service_name:o}));var a=r?S.intl.formatMessage({id:"wvm3tI",defaultMessage:"Connected"}):"",l={"third-party-option":!0,"contacts-typeahead-option":!0};return null!=this.props.className&&(l[this.props.className]=!0),s.default.createElement("li",n.__assign({},A(this.props,{className:i.default(l)})),!r&&this.state.showSpinner?s.default.createElement("div",{className:"option-spinner"},s.default.createElement("img",{src:"/static/images/icons/ajax-loading-small-blue-vflVk_QNP.gif"})):void 0,s.default.createElement(m.Flag,{spacing:"xs",leftAttachment:s.default.createElement(g.Image,{alt:"",src:w.static_url(_.default.to_img_legacy(t)[0]),srcHiRes:w.static_url(_.default.to_img_legacy(t)[1])})},s.default.createElement("div",{className:i.default({"option-primary":!0,"option-only":!r})},o,r?s.default.createElement("div",{className:"option-secondary u-font-meta"},a):void 0)))},t.displayName="ThirdPartyImportOption",t.propTypes={import:o.default.object.isRequired},t})(s.default.Component);t.ThirdPartyImportOption=L})),define("modules/clean/contacts/types",["require","exports"],(function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e[e.EMAIL=0]="EMAIL",e[e.FB=1]="FB",e[e.INVALID_ID=2]="INVALID_ID",e[e.NEW_STYLE_GROUP=4]="NEW_STYLE_GROUP",e[e.DBX_ID=5]="DBX_ID"})(n||(n={})),t.default=n})),define("modules/clean/contacts/util",["require","exports","tslib","modules/clean/contacts/contact","modules/clean/contacts/types"],(function(e,t,n,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=n.__importDefault(r);var s=(function(){function e(){}return e.activityUserToContact=function(e,t){return void 0===t&&(t=0),{dbx_account_id:e.unique_id,fname:e.fname,lname:e.lname,name:e.display_name,name_tokens:[e.fname,e.lname],email:e.email,type:r.default.DBX_ID,priority:t,photo_url:e.photo_circle_url}},e.teamGroupInfoToContact=function(e){return new i.Contact({group_id:e.id,group_size:e.group_size,type:r.default.NEW_STYLE_GROUP,name:e.name,on_team:!0,pending:!1})},e})();t.default=s})),define("modules/clean/react/calendar",["require","exports","tslib","classnames","spectrum/dropdown_button/index","react","react-dom","modules/clean/datetime/datetime","modules/clean/react/components/css","modules/clean/react/sprite","modules/core/i18n"],(function(e,t,n,i,r,s,o,a,l,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Calendar=t.CalendarView=t.CalendarComponent=void 0,i=n.__importDefault(i),s=n.__importDefault(s),o=n.__importStar(o),a=n.__importStar(a);var d=37,p=38,h=39,_=40,f=function(){},m=0,g=function(e){void 0===e&&(e=new Date);var t=new Date(e.getTime());t.setFullYear(t.getFullYear()-1);var n=new Date(e.getTime());return n.setFullYear(n.getFullYear()+1),{disabled:!1,isMaestroDesign:!1,firstDay:t,lastDay:n,alignAtLeft:!0,onDateChange:f,calendarIsInitiallyVisible:!1}},y=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={currentDate:t.props.initDate,calendarIsVisible:t.props.calendarIsInitiallyVisible},t.setCalendarDateViewRef=function(e){t.refCalendarDateView=o.findDOMNode(e)},t.setCalendarViewRef=function(e){t.refCalendarView=o.findDOMNode(e)},t._handleDocumentClick=function(e){if(t.refCalendarView&&t.refCalendarDateView){var n=e.target;!t.state.calendarIsVisible||t.refCalendarView.contains(n)||t.refCalendarDateView.contains(n)||(e.preventDefault(),e.stopPropagation(),t.closeCalendar())}},t.toggleCalendarView=function(){t.setState({calendarIsVisible:!t.state.calendarIsVisible})},t.handleDateSelected=function(e){t.setState({currentDate:e}),t.props.onDateChange(e),t.closeCalendar()},t.closeCalendar=function(){t.setState({calendarIsVisible:!1}),t.refCalendarDateView&&t.refCalendarDateView.focus(),t.props.onCalendarClose&&t.props.onCalendarClose()},t._startOfDay=function(e){var t=new Date(e.getTime());return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t},t._getDateViewText=function(){var e=function(e){return a.format_date(e,a.localized_date_format)};return t.props.placeholderText&&!t.props.initDate?t.props.placeholderText:t.state.currentDate?e(t.state.currentDate):e(new Date)},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){document.addEventListener("click",this._handleDocumentClick)},t.prototype.componentWillUnmount=function(){document.removeEventListener("click",this._handleDocumentClick)},t.prototype.render=function(){var e,t={"c-datepicker":!0,"scooter-css u-l-fl clearfix":!this.props.isMaestroDesign};return this.state.calendarIsVisible&&(e=s.default.createElement(w,{ref:this.setCalendarViewRef,alignAtLeft:this.props.alignAtLeft,firstDay:this._startOfDay(this.props.firstDay),lastDay:this._startOfDay(this.props.lastDay),initDate:this.state.currentDate||new Date,onDateChange:this.handleDateSelected,onCalendarClose:this.props.onCalendarClose,onEscapePressed:this.closeCalendar})),s.default.createElement("div",{className:i.default(t)},s.default.createElement(b,{buttonText:this._getDateViewText(),ref:this.setCalendarDateViewRef,calendarVisible:this.state.calendarIsVisible,disabled:this.props.disabled,isMaestroDesign:this.props.isMaestroDesign,onClick:this.toggleCalendarView}),e)},t.displayName="Calendar",t.__updateDefaultProps=function(e){t.defaultProps=g(e)},t.defaultProps=g(),t})(s.default.Component);function v(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}t.CalendarComponent=y;var b=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderLegacyCaret=function(){return s.default.createElement(u.Sprite,{group:"web",name:"calendar_view_month",className:"u-l-fr",alt:t.props.description})},t}return n.__extends(t,e),t.prototype.render=function(){var e={"is-active":this.props.calendarVisible,"c-input":!this.props.isMaestroDesign,"filter-item__filter-input":this.props.isMaestroDesign};if(this.props.isMaestroDesign)return s.default.createElement(r.DropdownButton,{disabled:this.props.disabled,onClick:this.props.onClick,"aria-expanded":this.props.calendarVisible},this.props.buttonText);var t=s.default.createElement("span",{className:"c-calendar__date-text"},this.props.buttonText);return s.default.createElement("button",{className:i.default(e),disabled:this.props.disabled,onClick:this.props.onClick,"aria-expanded":this.props.calendarVisible},this.renderLegacyCaret(),t)},t.displayName="CalendarDateView",t.defaultProps={isMaestroDesign:!1,calendarVisible:!0,onClick:function(){},disabled:!1,description:c.intl.formatMessage({id:"iOUGcl",defaultMessage:"Change deadline"})},t})(s.default.Component),w=(function(e){function t(t){var n=e.call(this,t)||this;return n.state={viewDate:n.props.initDate,currentlyActiveDate:n.props.initDate},n.clampToFirstLastDate=function(e){e<n.props.firstDay?e.setTime(n.props.firstDay.getTime()):e>n.props.lastDay&&e.setTime(n.props.lastDay.getTime())},n.getDaysInMonth=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},n.setPrevMonthButtonRef=function(e){n.refPrevButton=e},n.setNextMonthButtonRef=function(e){n.refNextButton=e},n.setCurrentDayButtonRefAndMaintainFocus=function(e){var t=document.activeElement&&document.activeElement.getAttribute("data-day-in-month");n.refCurrentDayButton=e,n.refCurrentDayButton&&t&&n.refCurrentDayButton.focus()},n.handleDayClicked=function(e){var t=e.target,i=parseInt(t.getAttribute("data-day-in-month")||"",10),r=new Date(n.state.viewDate.getFullYear(),n.state.viewDate.getMonth(),i);n.setState({currentlyActiveDate:r}),n.props.onDateChange(r)},n.handleKeyDownOnDay=function(e){if(27===e.which)return n.props.onEscapePressed(),void e.preventDefault();if(9===e.which){var t=void 0,i=n.refNextButton.classList.contains("u-l-dn")?null:n.refNextButton,r=n.refPrevButton.classList.contains("u-l-dn")?null:n.refPrevButton;return(t=e.shiftKey?i||r:r||i)&&t.focus(),void e.preventDefault()}if(-1!==[p,h,_,d].indexOf(e.which)){var s=n.getDaysInMonth(n.props.initDate),o=(n.state.currentlyActiveDate||n.props.initDate).getDate(),a=null;switch(e.which){case p:a=Math.max(1,o-7);break;case h:a=Math.min(s,o+1);break;case _:a=Math.min(s,o+7);break;case d:a=Math.max(1,o-1)}if(null!=a){var l=new Date(n.state.viewDate.getTime());l.setDate(a),n.clampToFirstLastDate(l),n.setState({currentlyActiveDate:l})}e.preventDefault()}},n.renderDay=function(e,t){var r=!t;n.props.lastDay&&(t=t||e>n.props.lastDay),n.props.firstDay&&(t=t||e<n.props.firstDay);var o=v(n.state.currentlyActiveDate,e),a={"button-as-link":!t,"c-calendar__date":!0,"c-calendar__date--disabled":t,"current-month":r,"c-calendar__date--was-initially-active":v(n.props.initDate,e),"c-calendar__date--is-active":o},l=f;v(n.state.currentlyActiveDate,e)&&(l=n.setCurrentDayButtonRefAndMaintainFocus);var u="day"+e.getDate()+"-"+e.getMonth(),d=c.intl.formatDate(e,{year:"numeric",month:"long",day:"numeric"});return s.default.createElement("td",{key:u},s.default.createElement("button",{className:i.default(a),disabled:t,onClick:t?void 0:n.handleDayClicked,onKeyDown:n.handleKeyDownOnDay,"data-day-in-month":e.getDate(),"aria-label":d,ref:l},e.getDate()))},n.renderDays=function(){for(var e=[],t=new Date(n.state.viewDate.getFullYear(),n.state.viewDate.getMonth(),1),i=t.getDay();i>0;i--){var r=new Date(t.getFullYear(),t.getMonth(),t.getDate());r.setDate(r.getDate()-i),e.push(n.renderDay(r,!0))}for(var o=new Date(n.state.viewDate.getFullYear(),n.state.viewDate.getMonth(),1);o.getMonth()===n.state.viewDate.getMonth();)e.push(n.renderDay(o)),o=new Date(n.state.viewDate.getFullYear(),n.state.viewDate.getMonth(),o.getDate()+1);for(var a=new Date(n.state.viewDate.getFullYear(),n.state.viewDate.getMonth()+1,0);6!==a.getDay();)a=new Date(a.getFullYear(),a.getMonth(),a.getDate()+1),e.push(n.renderDay(a,!0));var l=[],u=[];return e.forEach((function(e,t){u.push(e),(t+1)%7==0&&(l.push(s.default.createElement("tr",{key:"week-"+t},u)),u=[])})),l},n.offsetViewDateByMonth=function(e){n.setState({viewDate:new Date(n.state.viewDate.getFullYear(),n.state.viewDate.getMonth()+e,1)})},n.handleClickNextMonth=function(){n.offsetViewDateByMonth(1)},n.handleClickPrevMonth=function(){n.offsetViewDateByMonth(-1)},n.handleKeyDownMonthButton=function(e){if(27===e.which)return n.props.onEscapePressed(),void e.preventDefault();if(9===e.which){var t=!e.shiftKey,i=void 0,r=n.refNextButton.classList.contains("u-l-dn")?null:n.refNextButton,s=n.refPrevButton.classList.contains("u-l-dn")?null:n.refPrevButton,o=n.refCurrentDayButton;(i=e.target===n.refPrevButton?t?r||o:o||r:t?o||s:s||o)&&i.focus(),e.preventDefault()}},n.renderMonthChangers=function(){var e=[],t=new Date(n.state.viewDate.getFullYear(),n.state.viewDate.getMonth(),1),r=new Date(n.state.viewDate.getFullYear(),n.state.viewDate.getMonth(),n.getDaysInMonth(n.state.viewDate)),o={"arrow-select":!0,"u-l-dn":t<=n.props.firstDay,"ax-focusable":!0,"u-l-fl":!0};e.push(s.default.createElement("button",{className:i.default(o),onClick:n.handleClickPrevMonth,ref:n.setPrevMonthButtonRef,onKeyDown:n.handleKeyDownMonthButton},s.default.createElement("span",{className:"c-arrow c-arrow--left u-thide"},c.intl.formatMessage({id:"RqKZIV",defaultMessage:"Previous month"}))));var a={"arrow-select":!0,"u-l-dn":r>=n.props.lastDay,"ax-focusable":!0,"u-l-fr":!0};return e.push(s.default.createElement("button",{className:i.default(a),onClick:n.handleClickNextMonth,ref:n.setNextMonthButtonRef,onKeyDown:n.handleKeyDownMonthButton},s.default.createElement("span",{className:"c-arrow c-arrow--right u-thide"},c.intl.formatMessage({id:"ir988d",defaultMessage:"Next month"})))),e},n.renderWeekdayRows=function(){return[c.intl.formatMessage({id:"vF3QRb",defaultMessage:"Sunday"}),c.intl.formatMessage({id:"ky7rEH",defaultMessage:"Monday"}),c.intl.formatMessage({id:"QuQ7YS",defaultMessage:"Tuesday"}),c.intl.formatMessage({id:"Vla5t5",defaultMessage:"Wednesday"}),c.intl.formatMessage({id:"dgMd35",defaultMessage:"Thursday"}),c.intl.formatMessage({id:"0WboRK",defaultMessage:"Friday"}),c.intl.formatMessage({id:"FwY8UG",defaultMessage:"Saturday"})].map((function(e){return s.default.createElement("th",{key:e},s.default.createElement("abbr",{title:e},e.slice(0,3)))}))},n.calendarId=++m,n}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.refCurrentDayButton&&this.refCurrentDayButton.focus()},t.prototype.UNSAFE_componentWillUpdate=function(e,t){if(t.viewDate&&t.viewDate.getMonth()!==this.state.viewDate.getMonth()){var n=new Date(t.viewDate.getTime()),i=this.getDaysInMonth(t.viewDate);n.setDate(Math.min(i,this.state.currentlyActiveDate.getDate())),this.clampToFirstLastDate(n),this.setState({currentlyActiveDate:n})}},t.prototype.render=function(){var e={"c-calendar":!0,"c-card":!0,"u-pad-xs":!0,"u-left":this.props.alignAtLeft,"u-right":!this.props.alignAtLeft},t="calendar-header-"+ ++this.calendarId,n=this.renderMonthChangers(),r=n[0],o=n[1],a=s.default.createElement("strong",{id:t,"aria-live":"assertive","aria-atomic":"true"},c.intl.formatDate(this.state.viewDate,{year:"numeric",month:"long"}));return s.default.createElement("div",{className:i.default(e)},s.default.createElement("div",{className:"c-calendar__nav u-mar-bottom-s u-font-center u-cf"},r,o,a),s.default.createElement("table",{className:"c-calendar__picker"},s.default.createElement("thead",{className:"ax-visually-hidden"},s.default.createElement("tr",null,this.renderWeekdayRows())),s.default.createElement("tbody",null,this.renderDays())))},t.displayName="CalendarView",t.defaultProps={onDateChange:f,onEscapePressed:f,alignAtLeft:!1},t})(s.default.Component);t.CalendarView=w,t.Calendar=l.requireCssWithComponent(y,["/static/css/scooter/scooter-scoped-vflpl9JSl.css","/static/css/components/calendar-vflL_rFOa.css"])})),define("modules/clean/react/pass/constants",["require","exports"],(function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_FACEPILE_CLASSNAME=t.PRESENCE_RECEIVED_CLASSNAME=t.FACEPILE_CLASSNAME=t.MAX_OVERFLOW_BUTTON_INDICATOR=t.MAX_FACES_NORMAL=t.fetchingStatusIsError=t.fetchingStatusIsComplete=t.fetchingStatusIsSuccessful=t.fetchingStatusCanLogAsShown=t.fetchingStatusSeenStateIsComplete=t.PassPlatform=t.PassFetchingStatus=t.LoggingActions=t.EventTypes=t.ActionTypes=void 0,t.ActionTypes={PASS_PERMISSION_REQUEST:"PASS_PERMISSION_REQUEST",UPDATE_PERMISSIONS:"UPDATE_PERMISSIONS",FETCH_PASS_CONCLUDED:"FETCH_PASS_CONCLUDED",FETCH_PASS_ERROR:"FETCH_PASS_ERROR",UPDATE_USER_TEAM_INTERACTION_INFO:"UPDATE_USER_TEAM_INTERACTION_INFO",RECEIVE_PRESENCE_DELTA:"RECEIVE_PRESENCE_DELTA",RECEIVE_PRESENCE_SNAPSHOT:"RECEIVE_PRESENCE_SNAPSHOT",RESET_PASS_INFO:"RESET_PASS_INFO",UPDATE_SEEN_STATE_INFO:"UPDATE_SEEN_STATE_INFO",UPDATE_SEEN_STATE_INFO_CONTINUE:"UPDATE_SEEN_STATE_INFO_CONTINUE",DISCONTINUE_SEEN_STATE_INFO:"DISCONTINUE_SEEN_STATE_INFO",UPDATE_SEEN_STATE_UNAVAILABLE:"FETCH_SEEN_STATE_UNAVAILABLE"},t.EventTypes={PASS_CLICK:"PASS_CLICK",PASS_SHOWN:"PASS_SHOWN",PASS_HOVER:"PASS_HOVER"},t.LoggingActions={STATUS_BEGIN:"status_begin",STATUS_RECEIVE:"status_receive",SEEN_STATE_BEGIN:"seen_state_begin",SEEN_STATE_RECEIVE:"seen_state_receive",SEEN_STATE_USERS_BEGIN:"seen_state_users_begin",SEEN_STATE_USERS_RECEIVE:"seen_state_users_receive",TRANSMITTER_TOKEN_BEGIN:"transmitter_token_begin",TRANSMITTER_TOKEN_RECEIVE:"transmitter_token_receive",RECEIVER_TOKEN_BEGIN:"receiver_token_begin",RECEIVER_TOKEN_RECEIVE:"receiver_token_receive",PRESENCE_RECEIVE:"presence_receive",MEMBER_COUNTS_BEGIN:"member_counts_begin",MEMBER_COUNTS_RECEIVE:"member_counts_receive",LIST_MEMBERS_BEGIN:"list_members_begin",LIST_MEMBERS_RECEIVE:"list_members_receive",LIST_MEMBERS_NO_SEEN_STATE:"list_members_no_seen_state"},(function(e){e[e.NOT_YET_KNOWN=0]="NOT_YET_KNOWN",e[e.FETCHING=1]="FETCHING",e[e.ERROR=2]="ERROR",e[e.SEEN_STATE_SUCCESS=3]="SEEN_STATE_SUCCESS",e[e.SEEN_STATE_DISALLOWED=4]="SEEN_STATE_DISALLOWED",e[e.PRESENCE_SUCCESS=5]="PRESENCE_SUCCESS",e[e.PASS_SUCCESS=6]="PASS_SUCCESS",e[e.PASS_MIXED_SUCCESS=7]="PASS_MIXED_SUCCESS",e[e.CONCLUDED=8]="CONCLUDED"})(n=t.PassFetchingStatus||(t.PassFetchingStatus={})),(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEB=1]="WEB",e[e.MOBILE=2]="MOBILE",e[e.DESKTOP=3]="DESKTOP"})(t.PassPlatform||(t.PassPlatform={})),t.fetchingStatusSeenStateIsComplete=function(e){return-1!==[n.SEEN_STATE_SUCCESS,n.SEEN_STATE_DISALLOWED,n.PASS_SUCCESS,n.PASS_MIXED_SUCCESS,n.CONCLUDED].indexOf(e)},t.fetchingStatusCanLogAsShown=function(e){return e===n.PASS_SUCCESS||e===n.PASS_MIXED_SUCCESS},t.fetchingStatusIsSuccessful=function(e){return-1!==[n.PASS_SUCCESS,n.PASS_MIXED_SUCCESS,n.CONCLUDED].indexOf(e)},t.fetchingStatusIsComplete=function(e){return-1!==[n.PASS_SUCCESS,n.PASS_MIXED_SUCCESS,n.ERROR,n.CONCLUDED].indexOf(e)},t.fetchingStatusIsError=function(e){return e===n.ERROR},t.MAX_FACES_NORMAL=5,t.MAX_OVERFLOW_BUTTON_INDICATOR=99,t.FACEPILE_CLASSNAME="react-pass__facepile",t.PRESENCE_RECEIVED_CLASSNAME="facepile-presence-received",t.EMPTY_FACEPILE_CLASSNAME="react-pass__facepile--empty"})),define("modules/clean/react/pass/utils",["require","exports","tslib","lodash","modules/clean/react/pass/constants","modules/core/user_i18n","modules/core/browser","modules/core/uri"],(function(e,t,n,i,r,s,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.navigateToSuggestModal=t.navigateToInviteModal=t.shouldIncrementOverflowBasisForAccessType=t.parsePlatformString=t.AnonymousViewerUtils=void 0,i=n.__importStar(i),s=n.__importStar(s),o=n.__importStar(o),(function(e){function t(e){return e.startsWith("dbafvid:")}e.isAnonymousUserId=t,e.isAnonymousSeenState=function(e){return t(e.seen_state_user.user_id)},e.getAnonymousUserIds=function(e){return i.filter(e,t)},e.filterAnonymousUserIds=function(e){return i.reject(e,t)},e.getAnonymousViewerInitials=function(e){return s.isCjkLocale()&&1===e.split(" ").length?e.substring(0,1):s.getInitials(e)}})(t.AnonymousViewerUtils||(t.AnonymousViewerUtils={})),t.parsePlatformString=function(e){switch(e){case"web":return r.PassPlatform.WEB;case"mobile":return r.PassPlatform.MOBILE;case"desktop":return r.PassPlatform.DESKTOP}return r.PassPlatform.UNKNOWN},t.shouldIncrementOverflowBasisForAccessType=function(e){if(e)switch(e.type){case"link_only":case"view_link_access":case"edit_link_access":return!0;case"view_member_access":case"edit_member_access":return e.value.group_access_only}return!1},t.navigateToInviteModal=function(e){void 0===e&&(e=[]);var t={};return e.length>0&&btoa?t.invite_emails=btoa(e.join(",")):t.show_invite_members="1",o.redirect(new a.URI({path:"/team/admin/members",query:t}))},t.navigateToSuggestModal=function(e){void 0===e&&(e=[]);var t={suggest_members:"1"};return e.length>0&&btoa&&(t.invite_emails=btoa(e.join(","))),o.redirect(new a.URI({path:"/team",query:t}))}})),define("modules/clean/react/select",["require","exports","tslib","classnames","create-react-class","react","react-dom","prop-types","lodash","jquery","ts-keycode-enum","modules/clean/react/form_error_mixin","modules/clean/react/hidden","modules/clean/react/sprite","modules/clean/react/util","modules/core/dom"],(function(e,t,n,i,r,s,o,a,l,u,c,d,p,h,_,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.option=t.input=void 0,i=n.__importDefault(i),r=n.__importDefault(r),s=n.__importDefault(s),o=n.__importStar(o),a=n.__importDefault(a),l=n.__importStar(l),u=n.__importDefault(u),d=n.__importDefault(d),_=n.__importStar(_),f=n.__importStar(f);var m=a.default.oneOfType([a.default.string,a.default.number]),g=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={id:l.uniqueId("option")},t}return n.__extends(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){if(null!=e.id)return this.setState({id:e.id})},t.prototype.render=function(){var e={"list-item":!0,"select-option":!0,"select-option-disabled":this.props.disabled};null!=this.props.className&&(e[this.props.className]=!0);var t=this.props.value;return s.default.createElement("div",n.__assign({},this.props,{"data-value":t,id:this.state.id,role:"option",className:i.default(e),"aria-disabled":this.props.disabled}),this.props.children)},t.displayName="selectOption",t.propTypes={id:a.default.string,className:a.default.string,disabled:a.default.bool,title:a.default.string,value:m,error:a.default.shape({message_text:a.default.string,message_html:a.default.string})},t})(s.default.Component);t.option=g;var y=r.default({displayName:"selectInput",mixins:[d.default],mouseInput:!0,propTypes:{name:a.default.string,onChange:a.default.func,defaultValue:m,style:a.default.object,value:m,variant:a.default.string,className:a.default.string,ariaLabelId:a.default.string,ariaDescriptionId:a.default.string,valueLink:a.default.object,isDisabled:a.default.bool,headerElement:a.default.element},getDefaultProps:function(){return{errorWrapperClassName:"select-input-error-wrapper",ariaLabelId:"",ariaDescriptionId:"",style:null,headerElement:null}},getInitialState:function(){return{open:!1,focused:null,keyboarsSelectPrefix:"",selectOptionId:l.uniqueId("selected-option"),listboxId:l.uniqueId("listbox"),value:this.props.defaultValue}},_getFilteredChildren:function(){return l.isArray(this.props.children)?l.filter(this.props.children,(function(e){return e})):this.props.children},render:function(){var e=this,t={"select-input":!0,"select-input-dropdown-shown":this.state.open,"select-input-disabled":this.props.isDisabled};this.props.variant&&(t[this.props.variant]=!0),this.props.className&&(t[this.props.className]=!0);var n={"list-menu":!0,"select-input-dropdown":!0,"select-input-disable-error":this.props["disable-errors"]},r=this.renderErrorIfEnabled(),o=this.props.ariaDescriptionId;((null!=this.props.error?this.props.error.message_text:void 0)||null!=(null!=this.props.error?this.props.error.message_html:void 0))&&(o=r.props.id);var a,l=this.selectedOption();return s.default.createElement("div",{className:i.default(t),style:this.props.style,ref:"wrapperDiv"},r,s.default.createElement("button",{className:"select-input-button","aria-expanded":this.state.open,"aria-describedby":o,"aria-controls":this.state.listboxId,"aria-labelledby":this.props.ariaLabelId+" "+l.props.id,ref:"selectButton",tabIndex:0,onClick:this.handleClickOnInputButton},s.default.createElement("div",{className:"select-input-input filter-item__filter-input",ref:"label"},l,s.default.createElement("div",{className:"select-input-dropdown-arrow"},s.default.createElement(h.Sprite,{group:"web",name:"arrow-down-gray",alt:""})))),s.default.createElement(p.HiddenSelect,{name:this.props.name,defaultValue:this.props.defaultValue,value:this.getValue(),options:(a=[],s.default.Children.forEach(e._getFilteredChildren(),(function(e){return a.push(e.props.value)})),a)}),s.default.createElement("div",{className:"hidden-option-container"},s.default.createElement("div",{id:this.state.listboxId,className:i.default(n),role:"listbox",onKeyDown:this.handleKeydown,onMouseMove:this.handleMouseMove,tabIndex:-1,ref:"dropdown"},this.menuChildren())))},handleMouseMove:function(e){var t;if(!this.props.isDisabled){e.pageX===n&&e.pageY===t||(this.mouseInput=!0);var n=e.pageX;return e.pageY}},_commonPrefixLen:function(e,t){e=e.trim().toLowerCase(),t=t.trim().toLowerCase();for(var n=0;n<e.length&&n<t.length&&e.charAt(n)===t.charAt(n);)n++;return n},_keyboardSelect:function(e){var t=l.sortedIndexBy(this.sortedOptions,{text:e.toLowerCase()},"text"),n=this.sortedOptions[Math.max(t-1,0)],i=this.sortedOptions[Math.min(t,this.sortedOptions.length-1)];return this._commonPrefixLen(e,n.text)>=this._commonPrefixLen(e,i.text)?this.setState({keyboarsSelectPrefix:e,focused:n.value}):this.setState({keyboarsSelectPrefix:e,focused:i.value})},handleKeydown:function(e){var t=this;if(!this.props.isDisabled){switch(this.mouseInput=!1,e.keyCode){case c.Key.Tab:return this.setState({open:!1,focused:null}),!0;case c.Key.Enter:case c.Key.Space:this.state.open&&this.state.focused?(this.setValue(this.state.focused),this.setState({open:!1})):this.toggle();break;case c.Key.Escape:if(this.state.open){var n=this.getValue();this.setValue(n),this.setState({open:!1})}break;case c.Key.UpArrow:this.state.open?this.setState({focused:this.prev(this.state.focused)}):this.setState({open:!0});break;case c.Key.DownArrow:this.state.open?this.setState({focused:this.next(this.state.focused)}):this.setState({open:!0});break;default:if(!this.state.open)return!0;if(!l.values(c.Key).includes(e.keyCode)){var i=String.fromCharCode(e.which),r=this.state.keyboarsSelectPrefix+i;this._keyboardSelect(r),this._keyboardSelect_timeout&&clearTimeout(this._keyboardSelect_timeout),this._keyboardSelect_timeout=setTimeout((function(){return t.setState({keyboarsSelectPrefix:""}),t._keyboardSelect_timeout=null}),500)}}return!1}},prev:function(e){var t=null,n=null;return s.default.Children.forEach(this._getFilteredChildren(),(function(i){if(n||i.props.disabled||(n=i),i.props.value===e&&(t=n),!i.props.disabled)return n=i})),null!=t?t.props.value:void 0},next:function(e){var t,n=null,i=null;return s.default.Children.forEach(this._getFilteredChildren(),(function(t){if(!t.props.disabled)return(null!=i?i.props.value:void 0)===e&&(n=t),i=t})),null===(t=n||i)||void 0===t?void 0:t.props.value},menuChildren:function(){var e=this,t=this.getValue();return s.default.Children.map(this._getFilteredChildren(),(function(n){return s.default.cloneElement(n,{onMouseEnter:function(){if(f.scroll_lock_document(),e.mouseInput)return e.setState({focused:n.props.value})},onMouseOut:function(){return f.scroll_unlock_document()},onClick:function(){if(!n.props.disabled)return e.setState({open:!1}),e.setValue(n.props.value)},className:i.default({"focused-option":null!=e.state.focused&&e.state.focused===n.props.value,"selected-option":t===n.props.value},n.props.className)})}))},componentWillMount:function(){var e=s.default.Children.map(this._getFilteredChildren(),(function(e){return{value:e.props.value,text:_.getText(e).trim().toLowerCase()}}));return this.sortedOptions=l.sortBy(e,"text")},componentDidMount:function(){var e=this;return this.globalMenuCloser=function(t){if(e.state.open){var n=u.default(t.target).closest(".select-input");if(!n.length||n[0]!==o.findDOMNode(e.refs.wrapperDiv))return e.setState({open:!1,focused:null})}},u.default(document).on("click",this.globalMenuCloser)},componentWillUnmount:function(){return u.default(document).off("click",this.globalMenuCloser)},componentDidUpdate:function(e,t){var n,i=u.default(o.findDOMNode(this.refs.dropdown)),r=u.default(o.findDOMNode(this.refs.selectButton));this.state.open&&(n=i.find("[data-value='"+this.state.focused+"']"),i.attr("aria-activedescendant",n.attr("id"))),this.state.open&&this.state.focused&&null==this.props.headerElement&&(n=i.find("[data-value='"+this.state.focused+"']"),i.attr("aria-activedescendant",n.attr("id")),(function(e,t){var n=e.scrollTop(),i=n+e.height(),r=t.position().top+n,s=r+t.height();r<n?e.scrollTop(r):s>i&&e.scrollTop(s-e.height())})(i,n));var s=t.open&&!this.state.open;if(!t.open&&this.state.open&&i.focus(),s)return r.focus()},selectedOption:function(){var e=this,t=null;return null!=this.props.headerElement?this.props.headerElement:(s.default.Children.forEach(this._getFilteredChildren(),(function(n){if(t||(t=n),(null!=n?n.props.value:void 0)===e.getValue())return t=n})),t?s.default.cloneElement(t,{id:this.state.selectOptionId}):null)},handleClickOnInputButton:function(e){return e.preventDefault(),this.toggle()},toggle:function(){if(!this.props.isDisabled)return this.state.open?this.setState({open:!1,focused:null}):this.setState({open:!0,focused:this.getValue()})},getValue:function(){var e,t;return null!=(e=null!=(t=null!=this.props.value?this.props.value:null!=this.props.valueLink?this.props.valueLink.value:void 0)?t:this.state.value)?e:this.props.defaultValue},setValue:function(e){var t=this.getValue();if(this.props.valueLink?this.props.valueLink.requestChange(e):this.setState({value:e}),t!==e||null!=this.props.headerElement)return"function"==typeof this.props.onChange?this.props.onChange(t,e):void 0}});t.input=y})),define("modules/clean/sharing/api/client",["require","exports","tslib","immutable","lodash","api_v2/error","api_v2/types","api_v2/user_client","modules/clean/sharing/api/types/metadata","modules/clean/sharing/api/util/types","modules/clean/sharing/access_level","spectrum-sharing/utils/sharing_constants","modules/clean/viewer","modules/core/assert","modules/constants/sharing"],(function(e,t,n,i,r,s,o,a,l,u,c,d,p,h,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TeamSharingPolicies=t.ShareApiClient=t.ShareError=t.parseFolderPolicy=t.MockShareApiClient=t.FolderShareApiClient=t.FolderPolicy=t.FileShareApiClient=t.FilePolicy=void 0,i=n.__importStar(i),r=n.__importStar(r),Object.defineProperty(t,"FilePolicy",{enumerable:!0,get:function(){return l.FilePolicy}}),Object.defineProperty(t,"FolderPolicy",{enumerable:!0,get:function(){return l.FolderPolicy}}),Object.defineProperty(t,"TeamSharingPolicies",{enumerable:!0,get:function(){return l.TeamSharingPolicies}}),Object.defineProperty(t,"parseFolderPolicy",{enumerable:!0,get:function(){return u.parseFolderPolicy}});var f=(function(e){function t(t){var n=e.call(this)||this;return n.message=t,n.name="ShareError",n.stack=(new Error).stack,n}return n.__extends(t,e),t})(Error);t.ShareError=f;var m=(function(e){function t(t,n){var i=t.userId,r=t.isNonUserRelativeContext,s=e.call(this,n)||this;return null==r&&(r=!1),s.userId=i,r&&null==s.teamMemberId&&(s.teamMemberId=p.Viewer.get_viewer().work_user.team_member_id),s}return n.__extends(t,e),t.initClass=function(){this.prototype._getAccountBatchCache={},this.prototype._getCurrentAccountCache=null},t.prototype._headers=function(t){var i;return null!=this.teamMemberId?n.__assign(((i={})[o.ApiV2HeaderNames.DropboxApiSelectAdmin]=this.teamMemberId,i),e.prototype._headers.call(this,t)):e.prototype._headers.call(this,t)},t.prototype.targetsSearch=function(e,t){return this.ns("sharing").rpc("targets/search",e,{signal:t,subjectUserId:this.userId})},t.prototype.validateMembers=function(e){e.contentId,e.accessLevel,e.members;throw new TypeError("Not implemented")},t.prototype._validateMembers=function(e){var t=e.contentId,n=e.contentType,i=e.accessLevel,r=e.members;return this.ns("sharing").rpc("targets/validate",{access_level:u.accessLevelConstToApi(i),content_type:n,content_id:t,members:r},{subjectUserId:this.userId})},t.prototype.addMembers=function(e){e.contentId,e.members,e.accessLevel,e.customMessage,e.quiet,e.addMessageAsComment;throw new TypeError("Not implemented")},t.prototype.addMembersWithAccessLevel=function(e){e.contentId,e.members,e.customMessage,e.quiet;throw new TypeError("Not implemented")},t.prototype.removeMember=function(e){e.contentId,e.memberId;throw new TypeError("Not implemented")},t.prototype.getMetadata=function(e){e.contentId,e.isInSharedFolder,e.actions;throw new TypeError("Not implemented")},t.prototype.getMetadataInternal=function(e){e.contentId,e.actions;throw new TypeError("Not implemented")},t.prototype.getMetadataAlpha=function(e){e.contentId,e.actions;throw new TypeError("Not implemented")},t.prototype.listMembers=function(e){e.contentId,e.isAlpha;throw new TypeError("Not implemented")},t.prototype.listMembersContinue=function(e){e.cursor,e.isAlpha;throw new TypeError("Not implemented")},t.prototype.getMemberCounts=function(e){e.contentId;throw new TypeError("Not implemented")},t.prototype.getParentFolderAccess=function(e){e.contentId,e.memberId,e.accessLevel;throw new TypeError("Not implemented")},t.prototype.updateMember=function(e){e.contentId,e.memberId,e.accessLevel;throw new TypeError("Not implemented")},t.prototype.dismissInviteNotification=function(e){var t=e.contentId;return this.ns("sharing").rpc("dismiss_invite_notification",{content_id:t},{subjectUserId:this.userId})},t.prototype.getSharingPrefs=function(){return this.ns("users").rpc("get_sharing_prefs",void 0,{subjectUserId:this.userId}).then(u.sharingPrefsApiToRecord)},t.prototype.setSharingPrefs=function(e){return this.ns("users").rpc("set_sharing_prefs",e,{subjectUserId:this.userId})},t.prototype.claimMembership=function(e){var t=e.contentUrl;return this.ns("sharing").rpc("claim_membership",{content_url:t},{subjectUserId:this.userId})},t.prototype.checkJobStatus=function(e){var t=e.jobId;return this.ns("sharing").rpc("check_job_status",{async_job_id:t},{subjectUserId:this.userId})},t.prototype.getAccountBatch=function(e){var t=e.accountIds;return t.length>0?(_.SHARING_EXPERIMENTS.FIX_MAX_ACCOUNT_BATCH_SIZE&&t.length>300&&(t=t.slice(0,300)),this.ns("users").rpc("get_account_batch",{account_ids:t},{subjectUserId:this.userId}).then((function(e){return e.map(u.accountInfoApiToRecord)}))):Promise.resolve([])},t.prototype.getAccountBatchCached=function(e){var t=this,i=e.accountIds,s=this._getAccountBatchCache,o=Array.from(r.partition(i,(function(e){return e in s}))),a=o[0],l=o[1],u=r.values(r.pick(s,a));return this.getAccountBatch({accountIds:l}).then((function(e){var i=r.zipObject(e.map((function(e){return e.account_id})),e);return t._getAccountBatchCache=n.__assign(n.__assign({},s),i),e.concat(u)}))},t.prototype.resetGetAccountBatchCache=function(){return this._getAccountBatchCache={}},t.prototype.getCurrentAccount=function(e){return this.ns("users").rpc("get_current_account",void 0,{subjectUserId:this.userId}).then((function(e){return u.fullAccountApiToRecord(e)}))},t.prototype.getCurrentAccountCached=function(e){return null==this._getCurrentAccountCache&&(this._getCurrentAccountCache=this.getCurrentAccount()),this._getCurrentAccountCache},t.prototype.resetGetCurrentAccountCache=function(){return this._getCurrentAccountCache={}},t.prototype.requestAccess=function(e){var t=e.contentUrl,n=e.customMessage;return this.ns("sharing").rpc("request_access",{content_url:t,custom_message:n},{subjectUserId:this.userId})},t.prototype.sharedLinkInfo=function(e){var t=e.fileIdOrPath;return h.assert(null!=t,"an fqPath or fileId must be present to retrieve shared link info"),this.ns("sharing").rpc("alpha/list_shared_links",{path:t,direct_only:!0},{subjectUserId:this.userId}).then((function(e){return e.links.map((function(e){return u.linkMetadataApiToRecord(e)}))}))},t.prototype.createSharedLinkNonAlpha=function(e){var t=e.fileIdOrPath,n=e.settings;return h.assert(null!=t,"an fqPath or fileId must be present to retrieve shared link info"),this.ns("sharing").rpc("create_shared_link_with_settings",{path:t,settings:n},{subjectUserId:this.userId}).then(u.linkMetadataApiToRecord)},t.prototype.createSharedLink=function(e){var t=e.fileIdOrPath,n=e.settings;return h.assert(null!=t,"an fqPath or fileId must be present to retrieve shared link info"),this.ns("sharing").rpc("alpha/create_shared_link_with_settings",{path:t,settings:n},{subjectUserId:this.userId}).then(u.linkMetadataApiToRecord)},t.prototype.modifySharedLinkSettings=function(e){var t=e.url,n=e.settings,i=e.remove_expiration;return this.ns("sharing").rpc("alpha/modify_shared_link_settings",{url:t,settings:n,remove_expiration:i},{subjectUserId:this.userId}).then(u.linkMetadataApiToRecord)},t.prototype.revokeSharedLink=function(e){var t=e.url;return this.ns("sharing").rpc("revoke_shared_link",{url:t},{subjectUserId:this.userId})},t.prototype.listReceivedContent=function(e,t){return void 0===e&&(e=5),this.ns("sharing").rpc("received",{limit:e,share_type:t},{subjectUserId:this.userId}).then(u.listContentResultApiToRecord)},t.prototype.listReceivedContentContinue=function(e,t){return this.ns("sharing").rpc("received/continue",{cursor:e,share_type:t},{subjectUserId:this.userId}).then(u.listContentResultApiToRecord)},t.prototype.listSentContent=function(e){return void 0===e&&(e=5),this.ns("sharing").rpc("sent",{limit:e},{subjectUserId:this.userId}).then(u.listContentResultApiToRecord)},t.prototype.listSentContentContinue=function(e){return this.ns("sharing").rpc("sent/continue",{cursor:e},{subjectUserId:this.userId}).then(u.listContentResultApiToRecord)},t.prototype._addAccountsToMembership=function(e){return this._addAccountsToMembershipBatch(i.Map([[1,e]])).then((function(e){return e.get(1)}))},t.prototype._addAccountsToMembershipBatch=function(e){var t=e.valueSeq().flatMap((function(e){return e.users.valueSeq()})).map((function(e){return e.memberId()})).toSet().toArray();return t.length>0?this.getAccountBatchCached({accountIds:t}).then((function(t){var n=i.Map(t.map((function(e){return[e.account_id,e]})));return e.map((function(e,t){return e.set("users",e.users.map((function(e){var t=n.get(e.account_id);return null!=t?e.set("account",t):e})))}))})):Promise.resolve(e)},t})(a.UserApiV2Client);t.ShareApiClient=m,m.initClass();var g=(function(e){function t(t){var n=t.userId,i=t.isNonUserRelativeContext,r=e.call(this,{userId:n,isNonUserRelativeContext:i})||this;return r.getMetadata=r.getMetadata.bind(r),r.getMetadataInternal=r.getMetadataInternal.bind(r),r.getMetadataAlpha=r.getMetadataAlpha.bind(r),r.validateFqPath=r.validateFqPath.bind(r),r._promises={},r}return n.__extends(t,e),t.prototype.targetsSearch=function(e,t){return this.createPromise("targetsSearch")},t.prototype.validateMembers=function(e){e.contentId,e.accessLevel,e.members;return this.createPromise("validateMembers")},t.prototype.addMembers=function(e){e.contentId,e.members,e.accessLevel,e.customMessage,e.quiet,e.addMessageAsComment;return this.createPromise("addMembers")},t.prototype.addMembersWithAccessLevel=function(e){e.contentId,e.members,e.customMessage,e.quiet;return this.createPromise("addMembersWithAccessLevel")},t.prototype.getMetadata=function(e){e.contentId,e.isInSharedFolder,e.actions;return this.createPromise("getMetadata")},t.prototype.getMetadataInternal=function(e){e.contentId,e.actions;return this.createPromise("getMetadataInternal")},t.prototype.getMetadataAlpha=function(e){e.contentId,e.actions;return this.createPromise("getMetadataAlpha")},t.prototype.dismissInviteNotification=function(e){e.contentId,e.cursor;return this.createPromise("dismissInviteNotification")},t.prototype.getSharingPrefs=function(){return this.createPromise("getSharingPrefs")},t.prototype.listMembers=function(e){e.contentId,e.isAlpha;return this.createPromise("listMembers")},t.prototype.listMembersContinue=function(e){e.cursor,e.isAlpha;return this.createPromise("listMembersContinue")},t.prototype.getMemberCounts=function(e){e.contentId;return this.createPromise("getMemberCounts")},t.prototype.getParentFolderAccess=function(e){e.contentId,e.memberId,e.accessLevel;return this.createPromise("getParentFolderAccess")},t.prototype.removeMember=function(e){e.contentId,e.memberId;return this.createPromise("removeMember")},t.prototype.setLinkSettings=function(e){e.linkSettings,e.url;return this.createPromise("setLinkSettings")},t.prototype.share=function(e){e.fqPath,e.memberPolicy,e.aclUpdatePolicy,e.sharedLinkPolicy,e.forceAsync;return this.createPromise("share")},t.prototype.shareInternal=function(e){e.fqPath,e.folderPolicy,e.forceAsync,e.confidential;return this.createPromise("shareInternal")},t.prototype.requestAccess=function(e){e.contentUrl,e.customMessage;return this.createPromise("requestAccess")},t.prototype.sharedLinkInfo=function(e){e.fileIdOrPath;return this.createPromise("sharedLinkInfo")},t.prototype.transferContent=function(e){e.contentId,e.memberId;return this.createPromise("transferContent")},t.prototype.createSharedLink=function(e){e.fileIdOrPath;return this.createPromise("createSharedLink")},t.prototype.updateMember=function(){return this.createPromise("updateMember")},t.prototype.updatePolicyAlpha=function(){return this.createPromise("updatePolicyAlpha")},t.prototype.validateFqPath=function(e){e.fqPath,e.actions;return this.createPromise("validateFqPath")},t.prototype.getCurrentAccountCached=function(e){return this.createPromise("getCurrentAccountCached")},t.prototype.modifySharedLinkSettings=function(e){e.url,e.settings,e.remove_expiration;return this.createPromise("modifySharedLinkSettings")},t.prototype.revokeSharedLink=function(e){e.url;return this.createPromise("revokeSharedLink")},t.prototype.relinquishMembership=function(e){e.contentId,e.leaveACopy;return this.createPromise("relinquishMembership")},t.prototype.setConfidentiality=function(e){e.contentId,e.confidential,e.keep_inherited_members;return this.createPromise("setConfidentiality")},t.prototype.validatePathContinue=function(e,t){return this.createPromise("validatePathContinue")},t.prototype.createPromise=function(e){var t=this._promises[e];return t&&t.calledBeforeCreatePromise?(this._promises[e]=null,t.promise):((t={}).promise=new Promise((function(e,n){return t.resolve=e,t.reject=n})),this._promises[e]=t,t.promise)},t.prototype.getPromise=function(e){return null!=this._promises[e]?this._promises[e].promise:void 0},t.prototype.resolvePromise=function(e,t,n){void 0===n&&(n=!1),this._promises[e]||this.createPromise(e);var i=this._promises[e];return i.calledBeforeCreatePromise=n,i.resolve.apply(null,t),i.promise},t.prototype.rejectPromise=function(e,t,n){void 0===n&&(n=!1),this._promises[e]||this.createPromise(e);var i=this._promises[e];return i.calledBeforeCreatePromise=n,i.reject.apply(null,t),i.promise},t})(m);t.MockShareApiClient=g;var y=(function(e){function t(t){var n=t.userId,i=t.isNonUserRelativeContext,r=e.call(this,{userId:n,isNonUserRelativeContext:i})||this;return r.getMetadata=r.getMetadata.bind(r),r.getMetadataAlpha=r.getMetadataAlpha.bind(r),r.getMetadataBatchAlpha=r.getMetadataBatchAlpha.bind(r),r}return n.__extends(t,e),t.prototype.validateMembers=function(e){var t=e.contentId,n=e.accessLevel,i=e.members;return this._validateMembers({accessLevel:n,contentId:t,members:i,contentType:l.ContentTypes.File})},t.prototype.addMembers=function(e){var t=e.contentId,n=e.members,i=e.customMessage,r=void 0===i?null:i,s=e.quiet,o=void 0!==s&&s,a=e.accessLevel,l=e.addMessageAsComment,d=void 0!==l&&l;null==a&&(a=c.ACCESS_LEVEL.READER);var p=u.accessLevelConstToApi(a);return 0===(null!=r?r.length:void 0)&&(r=null),this.ns("sharing").rpc("add_file_member",{file:t,members:n,custom_message:r,quiet:o,access_level:p,add_message_as_comment:d},{subjectUserId:this.userId})},t.prototype.removeMember=function(e){var t=this,n=e.contentId,i=e.memberId;return this.ns("sharing").rpc("remove_file_member_2",{file:n,member:u.makeMemberSelector(i)},{subjectUserId:this.userId}).then((function(e){return u.memberAccessLevelApiToRecord(t.userId,e)}))},t.prototype.getMetadata=function(e){var t=e.contentId,n=(e.isInSharedFolder,e.actions),i=void 0===n?[]:n;return this.ns("sharing").rpc("get_file_metadata",{file:t,actions:i},{subjectUserId:this.userId}).then(u.fileMetadataApiToRecord)},t.prototype.getMetadataAlpha=function(e){var t=e.contentId,n=e.actions,i=void 0===n?[]:n,r=e.sourceURL;return this.ns("sharing").rpc("alpha/get_file_metadata",{file:t,actions:i,url:r},{subjectUserId:this.userId}).then(u.fileMetadataApiToRecord)},t.prototype.getMetadataBatchAlpha=function(e){var t=e.contentIds,n=e.actions,i=void 0===n?[]:n;return this.ns("sharing").rpc("alpha/get_file_metadata/batch",{files:t,actions:i},{subjectUserId:this.userId}).then((function(e){return e.map((function(e){return u.fileMetadataApiToRecord(e.result)}))}))},t.prototype.listMembers=function(e){var t=e.contentId,n=e.url,i=void 0===n?null:n,r=e.limit,s=e.isAlpha,o=void 0!==s&&s,a=e.includeSeenState;null==r&&(r=100),null==a&&(a=!0);var l={file:t,actions:d.MEMBER_ACTION.ALL,include_inherited:!0,limit:r,url:o?i:void 0,include_seen_state:a},c=this.ns("sharing");return(o?c.rpc("alpha/list_file_members",l,{subjectUserId:this.userId}):c.rpc("list_file_members",l,{subjectUserId:this.userId})).then(u.membershipApiToRecord).then(this._addAccountsToMembership.bind(this))},t.prototype.listMembersContinue=function(e){var t=e.cursor,n=e.url,i=void 0===n?null:n,r=e.isAlpha,s=void 0!==r&&r,o={cursor:t,url:s?i:void 0},a=this.ns("sharing");return(s?a.rpc("alpha/list_file_members/continue",o,{subjectUserId:this.userId}):a.rpc("list_file_members/continue",o,{subjectUserId:this.userId})).then((function(e){return u.membershipApiToRecord(e,null)})).then(this._addAccountsToMembership.bind(this))},t.prototype.listMembersBatch=function(e){var t=e.contentIds,n=e.limit;return null==n&&(n=10),this.ns("sharing").rpc("list_file_members/batch",{files:t,limit:n},{subjectUserId:this.userId}).then((function(e){for(var t={},n=0,r=Array.from(e);n<r.length;n++){var s=r[n];"result"===s.result[".tag"]&&(t[s.file]=u.membershipApiToRecord(s.result.members,s.result.member_count))}return i.Map(t)})).then(this._addAccountsToMembershipBatch.bind(this))},t.prototype.getMemberCounts=function(e){var t=e.contentId,n=e.limit,i=e.countGroupsAsMembers,r=void 0!==i&&i,s=e.url,o=void 0===s?null:s,a=e.runViewerInfoChecks,l=void 0!==a&&a;return this.ns("sharing").rpc("get_file_member_counts",{file:t,limit:n,count_groups_as_members:r,url:o,run_viewer_info_checks:l},{subjectUserId:this.userId})},t.prototype.getParentFolderAccess=function(e){e.contentId,e.memberId,e.accessLevel;throw new f("Parent folder access points not implemented for files")},t.prototype.relinquishMembership=function(e){var t=e.contentId;return this.ns("sharing").rpc("relinquish_file_membership",{file:String(t)},{subjectUserId:this.userId})},t.prototype.listReceivedFiles=function(e){var t=e.limit,n=e.actions,i=e.descending;return null==t&&(t=100),null==n&&(n=[]),null==i&&(i=!1),this.ns("sharing").rpc("list_received_files",{limit:t,actions:n,descending:i},{subjectUserId:this.userId}).then(u.listFilesResultApiToRecord)},t.prototype.listReceivedFilesContinue=function(e){var t=e.cursor;return this.ns("sharing").rpc("list_received_files/continue",{cursor:t},{subjectUserId:this.userId}).then(u.listFilesResultApiToRecord)},t.prototype.updateMember=function(e){var t=this,n=e.contentId,i=e.memberId,r=e.accessLevel;return this.ns("sharing").rpc("update_file_member",{file:String(n),member:u.makeMemberSelector(i),access_level:u.accessLevelConstToApi(r)},{subjectUserId:this.userId}).then((function(e){return u.memberAccessLevelApiToRecord(t.userId,e)}))},t.prototype.updatePolicy=function(e){var t=e.contentId,n=e.newPolicy,i=e.actions,r=u.combinedPolicyDiffToApi(n);return r.actions=i,r.file=t,this.ns("sharing").rpc("alpha/update_file_policy",r,{subjectUserId:this.userId}).then((function(e){return null!=e.metadata&&(e=e.metadata),u.fileMetadataApiToRecord(e)}))},t.prototype.unshare=function(e){var t=e.contentId;return this.ns("sharing").rpc("unshare_file",{file:String(t)},{subjectUserId:this.userId})},t})(m);t.FileShareApiClient=y;var v=(function(e){function t(t){var n=t.userId,i=t.isNonUserRelativeContext,r=e.call(this,{userId:n,isNonUserRelativeContext:i})||this;return r.getMetadata=r.getMetadata.bind(r),r.validateFqPath=r.validateFqPath.bind(r),r.updatePolicy=r.updatePolicy.bind(r),r.updatePolicyAlpha=r.updatePolicyAlpha.bind(r),r}return n.__extends(t,e),t.prototype.share=function(e){var t=this,n=e.fqPath,i=e.folderPolicy,r=e.confidential,s=void 0!==r&&r,o=e.checkFSWs,a=void 0!==o&&o,l=e.syncSetting,c=void 0===l?null:l,d=e.should_be_new_path,p=void 0===d?null:d,h=e.intervalMs,_=void 0===h?1e3:h,f=e.timeoutMs,m=void 0===f?null:f,g=u.combinedPolicyDiffToApi(i);return g.path=n,g.confidentiality=s?"confidential":"not_confidential",a&&(g.fsw_request="check"),null!==c&&(g.sync_setting=c),null!==p&&(g.should_be_new_path=p),this.ns("sharing").rpc("alpha/share_folder",g,{subjectUserId:this.userId}).then((function(e){return("complete"===e[".tag"]?Promise.resolve(e):b(t.checkShareJobStatus.bind(t,{jobId:e.async_job_id}),{interval:_,timeout:m})).then(u.folderMetadataApiToRecord)}))},t.prototype.shareWithFsws=function(e){return this.share(n.__assign(n.__assign({},e),{checkFSWs:!0})).then((function(e){return{metadata:e}})).catch(s.catchApiError((function(e){var t=function(e,t){return e&&e[".tag"]&&e[".tag"]===t};if(e&&t(e.error,"bad_path")&&t(e.error.bad_path,"file_system_warnings"))return{fsws:e.error.bad_path.details};throw e})))},t.prototype.shareWithoutFsws=function(e){return this.share(n.__assign(n.__assign({},e),{checkFSWs:!1})).then((function(e){return{metadata:e}})).catch(s.catchApiError((function(e){throw e})))},t.prototype.checkShareJobStatus=function(e){var t=e.jobId;return this.ns("sharing").rpc("check_share_internal_job_status",{async_job_id:t},{subjectUserId:this.userId})},t.prototype.checkRemoveMemberJobStatus=function(e){var t=e.jobId;return this.ns("sharing").rpc("check_remove_member_job_status",{async_job_id:t},{subjectUserId:this.userId})},t.prototype.validateMembers=function(e){var t=e.contentId,n=e.accessLevel,i=e.members;return this._validateMembers({accessLevel:n,contentId:t,members:i,contentType:l.ContentTypes.Folder})},t.prototype.addMembers=function(e){var t=e.contentId,n=e.members,i=e.accessLevel,r=e.customMessage,s=void 0===r?null:r,o=e.quiet,a=void 0!==o&&o,l=(e.addMessageAsComment,u.accessLevelConstToApi(i)),c=Array.from(n).map((function(e){return{member:e,access_level:l}}));return this.addMembersWithAccessLevel({contentId:t,members:c,customMessage:s,quiet:a})},t.prototype.addMembersWithAccessLevel=function(e){var t=e.contentId,n=e.members,i=e.customMessage,r=void 0===i?null:i,s=e.quiet,o=void 0!==s&&s;0===(null!=r?r.length:void 0)&&(r=null);var a={shared_folder_id:String(t),members:n,custom_message:r,quiet:o};return null!=this.teamMemberId?this.ns("sharing").rpc("add_folder_member_v2",a,{subjectUserId:this.userId}):this.ns("sharing").rpc("add_folder_member",a,{subjectUserId:this.userId})},t.prototype.fetchNsId=function(e){return this.ns("files").rpc("get_metadata",{path:e},{subjectUserId:this.userId}).then((function(e){return null!=e.sharing_info?e.sharing_info.shared_folder_id:void 0}))},t.prototype.getMetadata=function(e){var t=e.contentId,n=e.isInSharedFolder,i=e.actions,r=void 0===i?[]:i;return null==this.teamMemberId||n?this.ns("sharing").rpc("alpha/get_folder_metadata",{shared_folder_id:String(t),actions:r},{subjectUserId:this.userId}).then(u.folderMetadataApiToRecord):this.ns("sharing").rpc("alpha/get_folder_metadata_v2",{shared_folder_id:String(t),actions:r},{subjectUserId:this.userId}).then(u.folderMetadataApiToRecord)},t.prototype._metadataAndInheritMembers=function(e){var t=e.members_cursor;return t?this.listMembersContinue({cursor:t}).then((function(t){return{metadata:e,inheritedMembers:t}})):{metadata:e,inheritedMembers:new l.SharingMembership}},t.prototype.validateFqPath=function(e){var t=e.fqPath,n=e.actions,i=e.listMembersArg,r=e.shouldParseMetadataFromError,s=void 0!==r&&r,o=e.shareAsConfidential,a=void 0!==o&&o;null==n&&(n=[]),null==i&&(i={});var l=this.ns("sharing").rpc("validate_folder_path",{path:t,actions:n,list_members_arg:i,confidentiality:a?{".tag":"confidential"}:{".tag":"not_confidential"}},{subjectUserId:this.userId});return this.validatePathContinue(l,s)},t.prototype.validatePathContinue=function(e,t){return e.catch(s.catchApiError((function(e){var n,i;if("already_shared"===(null===(i=null===(n=e.error)||void 0===n?void 0:n.bad_path)||void 0===i?void 0:i[".tag"]))return e.error.bad_path;if(t&&e instanceof s.AppError&&e.error&&"no_permission"===e.error[".tag"]&&u.hasFolderMetadataRecordInMetadata(e.error))return e.error;throw e}))).then(u.folderMetadataApiToRecord).then(this._metadataAndInheritMembers.bind(this))},t.prototype.validateFolderPathBatch=function(e){var t=e.paths;return this.ns("sharing").rpc("validate_folder_path/batch",{paths:t},{subjectUserId:this.userId}).then((function(e){return e.entries.map((function(e){var t,n,i=e.result,r=null;"metadata"===i[".tag"]?r=i:"no_permission"===(null!=i.path_error?i.path_error[".tag"]:void 0)?r=i.path_error:"already_shared"===(null===(n=null===(t=i.path_error)||void 0===t?void 0:t.bad_path)||void 0===n?void 0:n[".tag"])&&(r=i.path_error.bad_path);var s=null;return r&&r.link_metadata&&(s=u.folderMetadataApiToRecord(r)),{path:e.path,metadata:s}}))}))},t.prototype.updatePolicy=function(e){var t=e.contentId,n=e.newPolicy;return n.shared_folder_id=String(t),null!=this.teamMemberId?this.ns("sharing").rpc("update_folder_policy_v2",n,{subjectUserId:this.userId}).then(u.folderMetadataApiToRecord):this.ns("sharing").rpc("update_folder_policy",n,{subjectUserId:this.userId}).then(u.folderMetadataApiToRecord)},t.prototype.updatePolicyAlpha=function(e){var t=e.contentId,n=e.newPolicy,i=u.combinedPolicyDiffToApi(n);return i.shared_folder_id=String(t),null!=this.teamMemberId?this.ns("sharing").rpc("alpha/update_folder_policy_v2",i,{subjectUserId:this.userId}).then(u.folderMetadataApiToRecord):this.ns("sharing").rpc("alpha/update_folder_policy",i,{subjectUserId:this.userId}).then(u.folderMetadataApiToRecord)},t.prototype.unshare=function(e){var t=this,n=e.contentId,i=e.leaveACopy,r=void 0!==i&&i;return this.ns("sharing").rpc("unshare_folder",{shared_folder_id:String(n),leave_a_copy:r},{subjectUserId:this.userId}).then((function(e){return"complete"===e[".tag"]?Promise.resolve(e):b(t.checkJobStatus.bind(t,{jobId:e.async_job_id}))}))},t.prototype.listMembers=function(e){var t=e.contentId,n=e.limit;e.isAlpha;return null==n&&(n=100),this.ns("sharing").rpc("list_folder_members",{shared_folder_id:String(t),actions:d.MEMBER_ACTION.ALL,limit:n},{subjectUserId:this.userId}).then(u.membershipApiToRecord).then(this._addAccountsToMembership.bind(this))},t.prototype.listMembersContinue=function(e){var t=e.cursor;e.isAlpha;return this.ns("sharing").rpc("list_folder_members/continue",{cursor:t},{subjectUserId:this.userId}).then((function(e){return u.membershipApiToRecord(e,null)})).then(this._addAccountsToMembership.bind(this))},t.prototype.listMountableFolders=function(e){var t=void 0===e?{}:e,n=t.limit,i=t.actions;return null==n&&(n=100),null==i&&(i=[]),this.ns("sharing").rpc("list_mountable_folders",{limit:n,actions:i},{subjectUserId:this.userId}).then(u.listFoldersResultApiToRecord)},t.prototype.listMountableFoldersContinue=function(e){var t=e.cursor;return this.ns("sharing").rpc("list_mountable_folders/continue",{cursor:t},{subjectUserId:this.userId}).then(u.listFoldersResultApiToRecord)},t.prototype.listMountableFoldersAlpha=function(e){var t=void 0===e?{}:e,n=t.limit,i=t.actions,r=t.show_mounted,s=t.get_invite_data;return null==n&&(n=100),null==i&&(i=[]),null==s&&(s=!1),this.ns("sharing").rpc("alpha/list_mountable_folders",{limit:n,actions:i,show_mounted:r,get_invite_data:s},{subjectUserId:this.userId}).then(u.listFoldersResultApiToRecord)},t.prototype.listMountableFoldersContinueAlpha=function(e){var t=e.cursor;return this.ns("sharing").rpc("alpha/list_mountable_folders/continue",{cursor:t},{subjectUserId:this.userId}).then(u.listFoldersResultApiToRecord)},t.prototype.getMemberCounts=function(e){var t=e.contentId;return null!=this.teamMemberId?this.ns("sharing").rpc("get_folder_member_counts_v2",{shared_folder_id:String(t)},{subjectUserId:this.userId}).then(u.memberCountsApiToRecord):this.ns("sharing").rpc("get_folder_member_counts",{shared_folder_id:String(t)},{subjectUserId:this.userId}).then(u.memberCountsApiToRecord)},t.prototype.getParentFolderAccess=function(e){var t=e.contentId,n=e.memberId,i=e.accessLevel;return this.ns("sharing").rpc("get_parent_folder_access",{shared_folder_id:String(t),member:u.makeMemberSelector(n),access_level:null!=i?u.accessLevelConstToApi(i):void 0},{subjectUserId:this.userId}).then(u.memberAccessLevelApiToRecord.bind(null,this.userId))},t.prototype.relinquishMembership=function(e){var t=this,n=e.contentId,i=e.leaveACopy,r=void 0!==i&&i;return this.ns("sharing").rpc("relinquish_folder_membership",{shared_folder_id:String(n),leave_a_copy:r},{subjectUserId:this.userId}).then((function(e){return"complete"===e[".tag"]?Promise.resolve():b(t.checkJobStatus.bind(t,{jobId:e.async_job_id}))}))},t.prototype.removeMember=function(e){var t=this,n=e.contentId,i=e.memberId,r=e.leaveACopy,s=void 0!==r&&r;return(null!=this.teamMemberId?this.ns("sharing").rpc("remove_folder_member_v2",{shared_folder_id:String(n),member:u.makeMemberSelector(i),leave_a_copy:s},{subjectUserId:this.userId}):this.ns("sharing").rpc("remove_folder_member",{shared_folder_id:String(n),member:u.makeMemberSelector(i),leave_a_copy:s},{subjectUserId:this.userId})).then((function(e){return"complete"===e[".tag"]?Promise.resolve(e):b(t.checkRemoveMemberJobStatus.bind(t,{jobId:e.async_job_id}))})).then((function(e){return u.memberAccessLevelApiToRecord(t.userId,e)}))},t.prototype.transferContent=function(e){var t=e.contentId,n=e.memberId;return null!=this.teamMemberId?this.ns("sharing").rpc("transfer_folder_v2",{shared_folder_id:String(t),to_dropbox_id:n},{subjectUserId:this.userId}):this.ns("sharing").rpc("transfer_folder",{shared_folder_id:String(t),to_dropbox_id:n},{subjectUserId:this.userId})},t.prototype.updateMember=function(e){var t=this,n=e.contentId,i=e.memberId,r=e.accessLevel;return(null!=this.teamMemberId?this.ns("sharing").rpc("update_folder_member_v2",{shared_folder_id:String(n),member:u.makeMemberSelector(i),access_level:u.accessLevelConstToApi(r)},{subjectUserId:this.userId}):this.ns("sharing").rpc("update_folder_member",{shared_folder_id:String(n),member:u.makeMemberSelector(i),access_level:u.accessLevelConstToApi(r)},{subjectUserId:this.userId})).then((function(e){return u.memberAccessLevelApiToRecord(t.userId,e)}))},t.prototype.mount=function(e){var t=e.contentId;return this.ns("sharing").rpc("mount_folder",{shared_folder_id:String(t)},{subjectUserId:this.userId}).then(u.folderMetadataApiToRecord)},t.prototype.unmount=function(e){var t=e.contentId;return this.ns("sharing").rpc("unmount_folder",{shared_folder_id:String(t)},{subjectUserId:this.userId})},t.prototype.setConfidentiality=function(e){var t=this,n=e.contentId,i=e.confidential,r=e.keepInheritedMembers,s=void 0!==r&&r;return this.ns("sharing").rpc("set_access_inheritance",{shared_folder_id:String(n),access_inheritance:i?{".tag":"no_inherit"}:{".tag":"inherit"},keep_inherited_members:s},{subjectUserId:this.userId}).then((function(e){return"complete"===e[".tag"]?Promise.resolve(e):b(t.checkShareJobStatus.bind(t,{jobId:e.async_job_id}))})).then(u.folderMetadataApiToRecord)},t.prototype.checkConfidentialRelocateJobStatus=function(e){var t=e.jobId;return this.ns("sharing").rpc("confidential_relocate/check",{async_job_id:t},{subjectUserId:this.userId})},t.prototype.relocateConfidentially=function(e){var t=e.fromPath,i=e.toPath;return n.__awaiter(this,void 0,void 0,(function(){var e,r,s;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,this.ns("sharing").rpc("confidential_relocate",{from_path:t,to_path:i},{subjectUserId:this.userId})];case 1:return e=n.sent(),r=e.result.async_job_id,s=e.converted_folder_id,[4,b(this.checkConfidentialRelocateJobStatus.bind(this,{jobId:r}))];case 2:return[2,{result:n.sent(),convertedFolderId:s}]}}))}))},t})(m);t.FolderShareApiClient=v;var b=function(e,t){var n=1e3,i=null;t&&t.interval&&(n=t.interval),t&&t.timeout&&(i=t.timeout);var r=null!=i?Date.now()+i:null,o=function(t,i){return null!=r&&Date.now()>r?i():e().then((function(e){switch(e[".tag"]){case"failed":return i(e);case"complete":return t(e);case"in_progress":return window.setTimeout(o,n,t,i)}})).catch(s.catchApiError((function(e){return i(e)})))};return new Promise(o)}})),define("modules/clean/sharing/api/types/metadata",["require","exports","tslib","immutable","api_v2/types","modules/clean/sharing/access_level","spectrum-sharing/utils/sharing_util"],(function(e,t,n,i,r,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowsePiscesBizBasicVariant=t.ContentTypes=t.AudienceRestrictingSharedFolder=t.SharingPrefs=t.LinkAudienceOption=t.LinkAudienceDisallowedReason=t.LinkVisibilityPolicy=t.LinkPermissions=t.LinkPolicy=t.LinkMetadata=t.MountLimitInfo=t.ParentFolderInfo=t.MemberAccessLevelResult=t.MemberCounts=t.MemberPermissions=t.GroupMembershipInfo=t.InviteeMembershipInfo=t.UserMembershipInfo=t.MembershipType=t.makeMemberKey=t.SharingMembership=t.ListContentResult=t.ListFilesResult=t.FilePolicy=t.FilePermissions=t.SharedFileMetadata=t.ListFoldersResult=t.FolderPermissions=t.FolderPolicy=t.SharedFolderMetadata=t.PermissionSetting=t.FullAccount=t.BasicAccount=t.TeamSharingPolicies=t.FullTeam=t.TeamMemberInfo=t.Team=t.GroupManagementType=t.LinkAudience=t.DownloadPolicy=t.ViewerInfoPolicy=t.VisibilityDisallowedReason=t.ResolvedVisibilityPolicy=t.RequestedVisibilityPolicy=t.SharedLinkCreatePolicy=t.SharedFolderJoinPolicy=t.SharedFolderMemberMemberPolicy=t.SharedLinkPolicy=t.AclUpdatePolicy=t.MemberPolicy=void 0,i=n.__importStar(i),t.MemberPolicy={team:new r.UnionScalar("team"),anyone:new r.UnionScalar("anyone")},t.AclUpdatePolicy={owner:new r.UnionScalar("owner"),editors:new r.UnionScalar("editors")},t.SharedLinkPolicy={anyone:new r.UnionScalar("anyone"),members:new r.UnionScalar("members")},t.SharedFolderMemberMemberPolicy={team:new r.UnionScalar("team"),anyone:new r.UnionScalar("anyone")},t.SharedFolderJoinPolicy={from_team_only:new r.UnionScalar("from_team_only"),from_anyone:new r.UnionScalar("from_anyone")},t.SharedLinkCreatePolicy={default_public:new r.UnionScalar("default_public"),default_team_only:new r.UnionScalar("default_team_only"),team_only:new r.UnionScalar("team_only")},t.RequestedVisibilityPolicy={policy_name:"requested_visibility",password:"password",public:"public",team_only:"team_only"},t.ResolvedVisibilityPolicy={policy_name:"resolved_visibility",only_you:"only_you",password:"password",public:"public",shared_folder_only:"shared_folder_only",team_and_password:"team_and_password",team_only:"team_only"},t.VisibilityDisallowedReason={delete_and_recreate:"delete_and_recreate",restricted_by_shared_folder:"restricted_by_shared_folder",restricted_by_team:"restricted_by_team",user_account_type:"user_account_type",user_not_on_team:"user_not_on_team",permission_denied:"permission_denied"},t.ViewerInfoPolicy={policy_name:"viewer_info_policy",enabled:"enabled",disabled:"disabled"},t.DownloadPolicy={policy_name:"download_policy",allow:"allow",disallow:"disallow"},t.LinkAudience={public:"public",team:"team",password:"password",no_one:"no_one",members:"members"},t.GroupManagementType={user_managed:new r.UnionScalar("user_managed"),company_managed:new r.UnionScalar("company_managed"),system_managed:new r.UnionScalar("system_managed")};var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(i.Record({id:null,name:null},"Team"));t.Team=a;var l=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(i.Record({display_name:null,member_id:null,team_info:null},"TeamMemberInfo"));t.TeamMemberInfo=l;var u=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(i.Record({id:null,name:null,sharing_policies:null},"FullTeam"));t.FullTeam=u;var c=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(i.Record({shared_folder_member_policy:null,shared_folder_join_policy:null,shared_link_create_policy:null},"TeamSharingPolicies"));t.TeamSharingPolicies=c;var d=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(i.Record({account_id:null,display_name:null,disabled:!1,email:null,email_verified:!1,familiar_name:null,given_name:null,is_teammate:!1,profile_photo_url:null,surname:null,team_member_id:null},"BasicAccount"));t.BasicAccount=d;var p=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(i.Record({account_id:null,display_name:null,disabled:!1,email:null,email_verified:!1,familiar_name:null,given_name:null,profile_photo_url:null,surname:null,team:null,team_member_id:null,is_family_user:!1},"FullAccount"));t.FullAccount=p;var h=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(i.Record({allow:!1,reason:null},"PermissionSetting"));t.PermissionSetting=h;var _=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.contentId=function(){return this.shared_folder_id||this.path_lower},t.prototype.isFolder=function(){return!0},t.prototype.isSharedFolder=function(){return Boolean(this.shared_folder_id)},t.prototype.isNewSharedFolder=function(){return!this.shared_folder_id},t.prototype.isViewOnly=function(){return Boolean(this.access_type===s.ACCESS_LEVEL.READER)},t.prototype.nsId=function(){return this.isSharedFolder()?this.shared_folder_id:void 0},t.prototype.canCreateEditLink=function(){return!1},t.prototype.canCreateViewLink=function(){return!(this.is_confidential||this.is_team_folder&&this.isSharedFolder()||null===this.path_lower)},t.prototype.canEditInbandInvite=function(){return this.permissions&&this.permissions.invite_editor&&this.permissions.invite_editor.get("allow")},t.prototype.canViewInbandInvite=function(){return this.permissions&&this.permissions.invite_viewer&&this.permissions.invite_viewer.get("allow")},t})(i.Record({access_type:null,is_confidential:!1,is_inside_team_folder:!1,is_team_folder:!1,link_metadata:null,members_cursor:null,name:null,owner_team:null,parent_shared_folder_id:null,path_lower:null,permissions:null,policy:null,preview_url:null,shared_folder_id:null,time_invited:null,can_mount:null,folder_size:null,invite_info:null,parent_folder_name:null},"SharedFolderMetadata"));t.SharedFolderMetadata=_;var f=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(i.Record({acl_update_policy:null,download_policy:null,member_policy:null,viewer_info_policy:null,resolved_member_policy:null,shared_link_policy:null},"FolderPolicy"));t.FolderPolicy=f;var m=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(i.Record({change_options:null,disable_viewer_info:null,edit_contents:null,enable_viewer_info:null,invite_editor:null,invite_viewer:null,invite_viewer_no_comment:null,leave_a_copy:null,relinquish_membership:null,remove_download_policy:null,set_download_policy:null,update_confidentiality:null,unmount:null,unshare:null,create_link:null},"FolderPermissions"));t.FolderPermissions=m;var g=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(i.Record({entries:i.Map(),cursor:null},"ListFoldersResult"));t.ListFoldersResult=g;var y=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.contentId=function(){return this.id},t.prototype.isFolder=function(){return!1},t.prototype.isSharedFolder=function(){return!1},t.prototype.isNewSharedFolder=function(){return!1},t.prototype.nsId=function(){},t.prototype.canCreateEditLink=function(){return this.permissions&&this.permissions.create_edit_link&&this.permissions.create_edit_link.get("allow")},t.prototype.canCreateViewLink=function(){return this.permissions&&this.permissions.create_view_link&&this.permissions.create_view_link.get("allow")},t.prototype.canEditInbandInvite=function(){return this.permissions&&this.permissions.invite_editor&&this.permissions.invite_editor.get("allow")},t.prototype.canViewInbandInvite=function(){return this.permissions&&this.permissions.invite_viewer&&this.permissions.invite_viewer.get("allow")},t})(i.Record({access_type:null,id:null,file_policy:null,link_metadata:null,name:null,owner_team:null,policy:null,parent_shared_folder_id:null,path_display:null,path_lower:null,permissions:null,preview_url:null,time_invited:null,is_cloud_doc:null,invite_info:null},"SharedFileMetadata"));t.SharedFileMetadata=y;var v=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(i.Record({change_options:null,disable_viewer_info:null,edit_contents:null,enable_viewer_info:null,invite_viewer:null,invite_editor:null,invite_viewer_no_comment:null,relinquish_membership:null,remove_download_policy:null,set_download_policy:null,unshare:null,view_members:null,create_link:null,create_edit_link:null,create_view_link:null,share_message_as_comment:null},"FilePermissions"));t.FilePermissions=v;var b=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(i.Record({audience:null,download_policy:null,viewer_info_policy:null},"FilePolicy"));t.FilePolicy=b;var w=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(i.Record({entries:i.Map(),cursor:null},"ListFilesResult"));t.ListFilesResult=w;var k=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(i.Record({contentEntries:i.Map(),cursor:null},"ListContentResult"));t.ListContentResult=k;var M,S=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.getMemberCount=function(){return this.memberCount||this.invitees.count()+this.groups.count()+this.users.count()},t.prototype.getTotalMemberCount=function(e){return void 0===e&&(e=[]),this.groups.map((function(e){return e.member_count||1})).reduce((function(e,t){return e+t}),0)+this.invitees.count()+this.users.filter((function(t){return!e.includes(t.memberId())})).count()},t.prototype.hasInheritedUsers=function(){return this.users.some((function(e){return e.is_inherited}))},t})(i.Record({cursor:null,invitees:i.Map(),groups:i.Map(),users:i.Map(),memberCount:null},"SharingMembership"));t.SharingMembership=S,t.makeMemberKey=function(e,t){return e+":"+t},(function(e){e.USERS="users",e.GROUPS="groups",e.INVITEES="invitees"})(M=t.MembershipType||(t.MembershipType={}));var E=(function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(i,e),i.prototype.memberId=function(){return this.account_id},i.prototype.memberKey=function(){return t.makeMemberKey(this.is_inherited,this.memberId())},i.prototype.displayName=function(){return this.account?this.account.display_name:void 0},i.prototype.contactId=function(){return this.account_id},i.prototype.contactType=function(){return"dropbox_id"},i.prototype.type=function(){return M.USERS},i.prototype.email=function(){return this.account?this.account.email:void 0},i})(i.Record({access_type:null,inherited_access_type:null,account:null,account_id:null,initials:null,is_inherited:!1,permissions:null,platform_type:null,same_team:null,team_member_id:null,time_last_seen:null},"UserMembershipInfo"));t.UserMembershipInfo=E;var C=(function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(i,e),i.prototype.memberId=function(){return this.contact_type+":"+this.contact},i.prototype.memberKey=function(){return t.makeMemberKey(this.is_inherited,this.memberId())},i.prototype.displayName=function(){return this.contact},i.prototype.contactId=function(){return this.contact},i.prototype.contactType=function(){return"email"},i.prototype.type=function(){return M.INVITEES},i})(i.Record({access_type:null,inherited_access_type:null,contact:null,contact_type:null,initials:!1,is_inherited:null,permissions:null,same_team:null},"InviteeMembershipInfo"));t.InviteeMembershipInfo=C;var A=(function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(i,e),i.prototype.memberId=function(){return this.group_id},i.prototype.memberKey=function(){return t.makeMemberKey(this.is_inherited,this.memberId())},i.prototype.displayName=function(){return this.group_name},i.prototype.contactId=function(){return this.group_id},i.prototype.contactType=function(){return"dropbox_id"},i.prototype.type=function(){return M.GROUPS},i})(i.Record({access_type:null,inherited_access_type:null,group_external_id:null,group_id:null,group_management_type:null,group_name:null,group_type:null,initials:null,is_inherited:!1,is_member:!1,is_owner:!1,member_count:null,permissions:null,same_team:!0},"GroupMembershipInfo"));t.GroupMembershipInfo=A;var D=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(i.Record({leave_a_copy:null,make_editor:null,make_owner:null,make_viewer:null,make_viewer_no_comment:null,remove:null},"MemberPermissions"));t.MemberPermissions=D;var T=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(i.Record({total_unique_users:null,total_unique_inherited_members:null,users_outside_team:null,exceeds_count:!1},"MemberCounts"));t.MemberCounts=T;var I=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(i.Record({access_level:null,warning:null,parentFolders:null},"MemberAccessLevelResult"));t.MemberAccessLevelResult=I;var R=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(i.Record({name:null,shared_folder_id:null,path:null,permissions:null},"ParentFolderInfo"));t.ParentFolderInfo=R;var x=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(i.Record({limit:null,current_count:null,new_count:null},"MountLimitInfo"));t.MountLimitInfo=x;var P=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.isFolder=function(){return"folder"===this.file_type},t.prototype.teamInfo=function(){return this.content_owner_team_info?this.content_owner_team_info:this.team_member_info?this.team_member_info.team_info:void 0},t.prototype.accessLevel=function(){return this.link_permissions.link_access_level},t.prototype.isRighteousLink=function(){return o.isRighteousLink(this.link_permissions)},t.prototype.canChangePassword=function(){return Boolean(this.link_permissions&&this.link_permissions.require_password?this.link_permissions.can_remove_password:this.link_permissions.can_set_password)},t.prototype.canChangeExpiration=function(){return Boolean(null!=this.expires?this.link_permissions.can_remove_expiry:this.link_permissions.can_set_expiry)},t.prototype.canChangeDownload=function(){return Boolean(this.link_permissions&&this.link_permissions.allow_download?this.link_permissions.can_disallow_download:this.link_permissions.can_allow_download)},t})(i.Record({url:null,client_modified:null,content_owner_team_info:null,expires:null,require_password:null,file_type:null,id:null,link_permissions:null,name:null,path_lower:null,rev:null,server_modified:null,size:null,team_member_info:null,preview_type:null},"LinkMetadata"));t.LinkMetadata=P;var L=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(i.Record({link_password:null,expires:null,allow_download:null,audience:null,require_password:null,display_expiration_warning:null,display_password_warning:null},"LinkPolicy"));t.LinkPolicy=L;var N=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.canChangeDownload=function(){return null!=this.can_disallow_download&&null!=this.can_allow_download&&null!=this.allow_download},t})(i.Record({allow_comments:null,can_revoke:null,allow_download:null,can_allow_download:null,can_disallow_download:null,can_set_expiry:null,can_remove_expiry:null,can_set_password:null,can_remove_password:null,require_password:null,effective_audience:null,link_access_level:null,requested_visibility:null,resolved_visibility:null,restricting_shared_folder_path:null,revoke_failure_reason:null,team_restricts_comments:null,visibility_policies:null,audience_options:null,can_use_extended_sharing_controls:null,days_to_expire_policy:null,change_shared_link_expiration_policy:null,enforce_shared_link_password_policy:null},"LinkPermissions"));t.LinkPermissions=N;var O=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(i.Record({policy:null,resolved_policy:null,allowed:null,disallowed_reason:null},"LinkVisibilityPolicy"));t.LinkVisibilityPolicy=O,(function(e){e.DeleteAndRecreate="delete_and_recreate",e.RestrictedBySharedFolder="restricted_by_shared_folder",e.RestrictedByTeam="restricted_by_team",e.UserAccountType="user_account_type",e.UserNotOnTeam="user_not_on_team",e.PermissionDenied="permission_denied"})(t.LinkAudienceDisallowedReason||(t.LinkAudienceDisallowedReason={}));var F=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(i.Record({audience:null,allowed:null,disallowed_reason:null},"LinkAudienceOption"));t.LinkAudienceOption=F;var U=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(i.Record({in_server_side_contact_validation_settings:!1,in_server_side_contact_search_settings:"OFF",can_create_edit_folder_link:!1,confidential_folder_links_enabled:!1,in_share_modal_upsell_premium_sharing:!1,in_share_modal_upsell_premium_sharing_variant:"OFF",has_seen_share_modal_upsell_premium_sharing_counter:0,exp_browse_pisces_biz_basic_variant:"OFF",invite_after_sharing_modal_variant:"not_enabled",exp_core_o21n_better_team_sharing:"OFF",exp_core_o21n_dnd_moment_pdf_word:"OFF",exp_core_o21n_dnd_moment_ppt_keynote:"OFF",exp_pg_esign_discovery_variant:"OFF",exp_pg_docsend_trial_sharing_modal_variant:"OFF",exp_pg_docsend_sharing_settings_upsell_variant:"OFF",has_seen_esign_post_sharing:!1,is_in_esign_post_sharing_exclusion_period:!1,exp_pg_family_sharing_upsell_gating:"OFF"},"SharingPrefs"));t.SharingPrefs=U;var q=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(i.Record({shared_folder_id:null,name:null,audience:null},"AudienceRestrictingSharedFolder"));t.AudienceRestrictingSharedFolder=q,t.ContentTypes={File:{".tag":"file"},Folder:{".tag":"folder"}},(function(e){e.OFF="OFF",e.CONTROL="CONTROL",e.V1_ADVANCED="V1_ADVANCED",e.V2_ADVANCED="V2_ADVANCED",e.V1_STANDARD="V1_STANDARD",e.V2_STANDARD="V2_STANDARD"})(t.BrowsePiscesBizBasicVariant||(t.BrowsePiscesBizBasicVariant={}))})),define("modules/clean/sharing/api/util/types",["require","exports","tslib","modules/clean/contacts/types","immutable","api_v2/types","modules/clean/react/pass/utils","modules/clean/sharing/access_level","modules/clean/sharing/link_info","modules/clean/sharing/api/types/metadata"],(function(e,t,n,i,r,s,o,a,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combinedPolicyDiffToApi=t.createUnionScalar=t.contactsToMembers=t.contactToMember=t.parseSharedLinkMetadata=t.makeMemberSelector=t.sharingPrefsApiToRecord=t.fullAccountApiToRecord=t.teamSharingPoliciesApiToRecord=t.accountInfoApiToRecord=t.linkMetadataApiToRecord=t.linkPermissionsApiToRecord=t.audienceOptionApiToRecord=t.visibilityPolicyApiToRecord=t.teamMemberInfoApiToRecord=t.memberAccessLevelApiToRecord=t.parentFolderInfoApiToRecord=t.memberCountsApiToRecord=t.membershipApiToRecord=t.userMembershipApiToRecord=t.groupMembershipApiToRecord=t.inviteeMembershipApiToRecord=t.memberPermissionsApiToRecord=t.listContentResultApiToRecord=t.listFilesResultApiToRecord=t.fileMetadataApiToRecord=t.getFilePolicy=t.filePermissionsApiToRecord=t.listFoldersResultApiToRecord=t.folderMetadataApiToRecord=t.folderPermissionsApiToRecord=t.parseFolderPolicy=t.audienceRestrictingSharedFolderToRecord=t.folderPolicyApiToRecord=t.hasFolderMetadataRecordInMetadata=t.platformTypeApiToConst=t.groupManagementTypeApiToConst=t.accessLevelApiToConst=t.rawAccessLevelConstToApi=t.accessLevelConstToApi=void 0,i=n.__importDefault(i),r=n.__importStar(r),t.accessLevelConstToApi=function(e){var n=t.rawAccessLevelConstToApi(e);return new s.UnionScalar(n[".tag"])},t.rawAccessLevelConstToApi=function(e){switch(e){case a.ACCESS_LEVEL.OWNER:return{".tag":"owner"};case a.ACCESS_LEVEL.WRITER:return{".tag":"editor"};case a.ACCESS_LEVEL.READER:return{".tag":"viewer"};case a.ACCESS_LEVEL.READER_NO_COMMENT:return{".tag":"viewer_no_comment"};default:throw new Error("unknown access level: "+e)}},t.accessLevelApiToConst=function(e){switch(e.type||e){case"owner":return a.ACCESS_LEVEL.OWNER;case"editor":return a.ACCESS_LEVEL.WRITER;case"viewer":return a.ACCESS_LEVEL.READER;case"viewer_no_comment":return a.ACCESS_LEVEL.READER_NO_COMMENT}},t.groupManagementTypeApiToConst=function(e){if(!e)return null;switch(e[".tag"]){case"user_managed":return u.GroupManagementType.user_managed;case"company_managed":return u.GroupManagementType.company_managed;case"system_managed":return u.GroupManagementType.system_managed;default:return}},t.platformTypeApiToConst=function(e){return o.parsePlatformString(e.type)},t.hasFolderMetadataRecordInMetadata=function(e){return null!=e.path_lower&&null!=e.access_type&&null!=e.policy},t.folderPolicyApiToRecord=function(e){return null==e?new u.FolderPolicy:new u.FolderPolicy({acl_update_policy:e.acl_update_policy&&e.acl_update_policy[".tag"],download_policy:e.download_policy&&e.download_policy[".tag"],member_policy:e.member_policy&&e.member_policy[".tag"],resolved_member_policy:e.resolved_member_policy&&e.resolved_member_policy[".tag"],shared_link_policy:e.shared_link_policy&&e.shared_link_policy[".tag"],viewer_info_policy:e.viewer_info_policy&&e.viewer_info_policy[".tag"]})};t.audienceRestrictingSharedFolderToRecord=function(e){return new u.AudienceRestrictingSharedFolder({shared_folder_id:e.shared_folder_id,name:e.name,audience:e.audience[".tag"]})},t.parseFolderPolicy=t.folderPolicyApiToRecord,t.folderPermissionsApiToRecord=function(e){var t=(function(e){for(var t={},n=0,i=e;n<i.length;n++){var r=i[n];t[r.action[".tag"]]=new u.PermissionSetting({allow:r.allow,reason:r.reason?r.reason[".tag"]:void 0})}return t})(e);return new u.FolderPermissions(t)},t.folderMetadataApiToRecord=function(e){return new u.SharedFolderMetadata({access_type:t.accessLevelApiToConst(s.Union.parse(e.access_type)),is_inside_team_folder:e.is_inside_team_folder,is_team_folder:e.is_team_folder,members_cursor:e.members_cursor,name:e.name,owner_team:null!=e.owner_team?new u.Team(e.owner_team):void 0,parent_shared_folder_id:e.parent_shared_folder_id,path_lower:e.path_lower,permissions:null!=e.permissions?t.folderPermissionsApiToRecord(e.permissions):void 0,policy:t.parseFolderPolicy(e.policy),preview_url:e.preview_url,shared_folder_id:e.shared_folder_id,time_invited:null!=e.time_invited?new Date(e.time_invited):void 0,is_confidential:null!=e.is_confidential?e.is_confidential:void 0,folder_size:null!=e.folder_size?e.folder_size:void 0,can_mount:null!=e.can_mount?e.can_mount:void 0,invite_info:null!=e.invite_info?e.invite_info:void 0,parent_folder_name:e.parent_folder_name})},t.listFoldersResultApiToRecord=function(e){return new u.ListFoldersResult({entries:r.Map(e.entries.map(t.folderMetadataApiToRecord).map((function(e){return[e.shared_folder_id,e]}))),cursor:e.cursor})},t.filePermissionsApiToRecord=function(e){var t={};if(e)for(var n=0,i=e;n<i.length;n++){var r=i[n];t[r.action[".tag"]]=new u.PermissionSetting({allow:r.allow,reason:r.reason&&r.reason[".tag"]})}return new u.FilePermissions(t)},t.getFilePolicy=function(e){var t={};return t[u.ViewerInfoPolicy.policy_name]=e&&e.viewer_info_policy&&e.viewer_info_policy[".tag"],t[u.DownloadPolicy.policy_name]=e&&e.download_policy&&e.download_policy[".tag"]||u.DownloadPolicy.allow,new u.FilePolicy(t)},t.fileMetadataApiToRecord=function(e){return new u.SharedFileMetadata({access_type:null!=e.access_type?t.accessLevelApiToConst(s.Union.parse(e.access_type)):a.ACCESS_LEVEL.READER,id:e.id,file_policy:t.getFilePolicy(e.policy),is_cloud_doc:null!=e.is_cloud_doc&&e.is_cloud_doc,name:e.name,owner_team:e.owner_team&&new u.Team(e.owner_team),policy:null!=e.policy?t.parseFolderPolicy(e.policy):new u.FolderPolicy,parent_shared_folder_id:e.parent_shared_folder_id,path_display:e.path_display,path_lower:e.path_lower,permissions:t.filePermissionsApiToRecord(e.permissions),preview_url:e.preview_url,time_invited:e.time_invited&&new Date(e.time_invited),invite_info:null!=e.invite_info?e.invite_info:void 0})},t.listFilesResultApiToRecord=function(e){return new u.ListFilesResult({entries:r.Map(e.entries.map((function(e){return[e.id,t.fileMetadataApiToRecord(e)]}))),cursor:e.cursor})},t.listContentResultApiToRecord=function(e){return new u.ListContentResult({contentEntries:r.Map(e.entries.map((function(e){return e.shared_folder_id?[e.shared_folder_id,t.folderMetadataApiToRecord(e)]:[e.id,t.fileMetadataApiToRecord(e)]}))),cursor:e.has_more?e.cursor:null})},t.memberPermissionsApiToRecord=function(e){var t={};if(null!=e)for(var n=0,i=e;n<i.length;n++){var r=i[n];t[r.action[".tag"]]=new u.PermissionSetting({allow:r.allow,reason:r.reason&&r.reason[".tag"]})}return new u.MemberPermissions(t)},t.inviteeMembershipApiToRecord=function(e){var n=void 0;e.inherited_access_type&&(n=t.accessLevelApiToConst(s.Union.parse(e.inherited_access_type)));var i=e.invitee[".tag"];return new u.InviteeMembershipInfo({access_type:t.accessLevelApiToConst(s.Union.parse(e.access_type)),inherited_access_type:n,contact:e.invitee[i],contact_type:i,initials:e.initials,is_inherited:e.is_inherited,permissions:t.memberPermissionsApiToRecord(e.permissions),same_team:Boolean(e.user&&e.user.same_team)})},t.groupMembershipApiToRecord=function(e){var n=void 0;return e.inherited_access_type&&(n=t.accessLevelApiToConst(s.Union.parse(e.inherited_access_type))),new u.GroupMembershipInfo({access_type:t.accessLevelApiToConst(s.Union.parse(e.access_type)),inherited_access_type:n,group_external_id:e.group.group_external_id,group_id:e.group.group_id,group_management_type:t.groupManagementTypeApiToConst(e.group.group_management_type),group_name:e.group.group_name,group_type:e.group.group_type[".tag"],initials:e.initials,is_inherited:e.is_inherited,is_member:e.group.is_member,is_owner:e.group.is_owner,member_count:e.group.member_count,permissions:t.memberPermissionsApiToRecord(e.permissions),same_team:e.group.same_team})},t.userMembershipApiToRecord=function(e){var n=void 0;return e.inherited_access_type&&(n=t.accessLevelApiToConst(s.Union.parse(e.inherited_access_type))),new u.UserMembershipInfo({access_type:t.accessLevelApiToConst(s.Union.parse(e.access_type)),inherited_access_type:n,account_id:e.user.account_id,initials:e.initials,is_inherited:e.is_inherited,permissions:t.memberPermissionsApiToRecord(e.permissions),platform_type:e.platform_type&&t.platformTypeApiToConst(s.Union.parse(e.platform_type)),same_team:e.user.same_team,team_member_id:e.user.team_member_id,time_last_seen:e.time_last_seen&&new Date(e.time_last_seen)})},t.membershipApiToRecord=function(e,n){return void 0===n&&(n=null),new u.SharingMembership({cursor:e.cursor,invitees:r.Map(e.invitees.map((function(e){var n=t.inviteeMembershipApiToRecord(e);return[n.memberKey(),n]}))),groups:r.Map(e.groups.map((function(e){var n=t.groupMembershipApiToRecord(e);return[n.memberKey(),n]}))),users:r.Map(e.users.map((function(e){var n=t.userMembershipApiToRecord(e);return[n.memberKey(),n]}))),memberCount:n})},t.memberCountsApiToRecord=function(e){return new u.MemberCounts(e)},t.parentFolderInfoApiToRecord=function(e){return new u.ParentFolderInfo({name:e.folder_name,shared_folder_id:e.shared_folder_id,path:e.path,permissions:t.memberPermissionsApiToRecord(e.permissions)})},t.memberAccessLevelApiToRecord=function(e,n){return null==n?new u.MemberAccessLevelResult:(null!=n.access_details&&(i=n.access_details.map((function(e){return t.parentFolderInfoApiToRecord(e)}))),new u.MemberAccessLevelResult({access_level:n.access_level&&t.accessLevelApiToConst(s.Union.parse(n.access_level)),warning:n.warning,parentFolders:i}));var i},t.teamMemberInfoApiToRecord=function(e){return null==e?null:new u.TeamMemberInfo({display_name:e.display_name,member_id:e.member_id,team_info:e.team_info&&new u.Team(e.team_info)})},t.visibilityPolicyApiToRecord=function(e){return new u.LinkVisibilityPolicy({policy:e.policy&&e.policy[".tag"],resolved_policy:e.resolved_policy&&e.resolved_policy[".tag"],allowed:e.allowed,disallowed_reason:e.disallowed_reason&&e.disallowed_reason[".tag"]})},t.audienceOptionApiToRecord=function(e){return new u.LinkAudienceOption({audience:e.audience[".tag"],allowed:e.allowed,disallowed_reason:e.disallowed_reason&&e.disallowed_reason[".tag"]})},t.linkPermissionsApiToRecord=function(e){return null==e?new u.LinkPermissions:new u.LinkPermissions({allow_download:e.allow_download,allow_comments:e.allow_comments,can_allow_download:e.can_allow_download,can_disallow_download:e.can_disallow_download,can_revoke:e.can_revoke,can_set_expiry:e.can_set_expiry,can_remove_expiry:e.can_remove_expiry,can_set_password:e.can_set_password,can_remove_password:e.can_remove_password,require_password:e.require_password,requested_visibility:e.requested_visibility&&e.requested_visibility[".tag"],resolved_visibility:e.resolved_visibility&&e.resolved_visibility[".tag"],restricting_shared_folder_path:e.restricting_shared_folder_path,revoke_failure_reason:e.revoke_failure_reason&&e.revoke_failure_reason[".tag"],team_restricts_comments:e.team_restricts_comments,visibility_policies:e.visibility_policies&&e.visibility_policies.map(t.visibilityPolicyApiToRecord),audience_options:e.audience_options&&e.audience_options.map(t.audienceOptionApiToRecord),effective_audience:e.effective_audience&&e.effective_audience[".tag"],link_access_level:e.link_access_level&&e.link_access_level[".tag"],can_use_extended_sharing_controls:e.can_use_extended_sharing_controls,days_to_expire_policy:e.days_to_expire_policy?e.days_to_expire_policy[".tag"]:"none",change_shared_link_expiration_policy:e.change_shared_link_expiration_policy?e.change_shared_link_expiration_policy[".tag"]:"allowed",enforce_shared_link_password_policy:e.enforce_shared_link_password_policy?e.enforce_shared_link_password_policy[".tag"]:"optional"})},t.linkMetadataApiToRecord=function(e){return new u.LinkMetadata({url:e.url,client_modified:e.client_modified&&new Date(e.client_modified),content_owner_team_info:e.content_owner_team_info&&new u.Team(e.content_owner_team_info),expires:e.expires&&new Date(e.expires),file_type:e[".tag"],id:e.id,link_permissions:t.linkPermissionsApiToRecord(e.link_permissions),name:e.name,path_lower:e.path_lower,rev:e.rev,server_modified:e.server_modified&&new Date(e.server_modified),size:e.size,team_member_info:t.teamMemberInfoApiToRecord(e.team_member_info),preview_type:e.preview_type})},t.accountInfoApiToRecord=function(e){return new u.BasicAccount({account_id:e.account_id,disabled:e.disabled,display_name:e.name.display_name,email:e.email,email_verified:e.email_verified,familiar_name:e.name.familiar_name,given_name:e.name.given_name,is_teammate:e.is_teammate,profile_photo_url:e.profile_photo_url,surname:e.name.surname,team_member_id:e.team_member_id})},t.teamSharingPoliciesApiToRecord=function(e){return e&&new u.TeamSharingPolicies({shared_folder_member_policy:e.shared_folder_member_policy&&e.shared_folder_member_policy[".tag"],shared_folder_join_policy:e.shared_folder_join_policy&&e.shared_folder_join_policy[".tag"],shared_link_create_policy:e.shared_link_create_policy&&e.shared_link_create_policy[".tag"]})},t.fullAccountApiToRecord=function(e){var n=e.team&&new u.FullTeam({id:e.team.id,name:e.team.name,sharing_policies:t.teamSharingPoliciesApiToRecord(e.team.sharing_policies)});return new u.FullAccount({account_id:e.account_id,disabled:e.disabled,display_name:e.name.display_name,email:e.email,email_verified:e.email_verified,familiar_name:e.name.familiar_name,given_name:e.name.given_name,profile_photo_url:e.profile_photo_url,surname:e.name.surname,team_member_id:e.team_member_id,team:n,is_family_user:e.is_family_user})},t.sharingPrefsApiToRecord=function(e){var t;return new u.SharingPrefs({in_server_side_contact_validation_settings:Boolean(e.in_server_side_contact_validation_settings),in_server_side_contact_search_settings:e.in_server_side_contact_search_settings,can_create_edit_folder_link:e.can_create_edit_folder_link,confidential_folder_links_enabled:e.confidential_folder_links_enabled,in_share_modal_upsell_premium_sharing:Boolean(e.in_share_modal_upsell_premium_sharing),in_share_modal_upsell_premium_sharing_variant:e.in_share_modal_upsell_premium_sharing_variant,has_seen_share_modal_upsell_premium_sharing_counter:e.has_seen_share_modal_upsell_premium_sharing_counter,exp_browse_pisces_biz_basic_variant:e.exp_browse_pisces_biz_basic_variant,invite_after_sharing_modal_variant:null===(t=e.invite_after_sharing_modal_variant)||void 0===t?void 0:t[".tag"],exp_core_o21n_better_team_sharing:e.exp_core_o21n_better_team_sharing,exp_core_o21n_dnd_moment_pdf_word:e.exp_core_o21n_dnd_moment_pdf_word,exp_core_o21n_dnd_moment_ppt_keynote:e.exp_core_o21n_dnd_moment_ppt_keynote,exp_pg_esign_discovery_variant:e.exp_pg_esign_discovery_variant,exp_pg_family_sharing_upsell_gating:e.exp_pg_family_sharing_upsell_gating,exp_pg_docsend_trial_sharing_modal_variant:e.exp_pg_docsend_trial_sharing_modal_variant,exp_pg_docsend_sharing_settings_upsell_variant:e.exp_pg_docsend_sharing_settings_upsell_variant,has_seen_esign_post_sharing:e.has_seen_esign_post_sharing,is_in_esign_post_sharing_exclusion_period:e.is_in_esign_post_sharing_exclusion_period})},t.makeMemberSelector=function(e){return e.startsWith("email:")?new s.UnionScalar("email",e.substr(6)):new s.UnionScalar("dropbox_id",e)},t.parseSharedLinkMetadata=function(e){if(null==e)return null;var t=s.Union.parse(e.link_permissions.resolved_visibility).type,i=null!=e.team_member_info?{teamId:e.team_member_info.team_info.id,teamName:e.team_member_info.team_info.name}:{teamId:null,teamName:null},r={isFolder:"folder"===e[".tag"],url:e.url,name:e.name,expires:e.expires&&new Date(e.expires),visibility:t,isPackage:e.is_package};return new l.LinkInfo(n.__assign(n.__assign({},r),i))},t.contactToMember=function(e,t){if(void 0===t&&(t=!1),e.type===i.default.NEW_STYLE_GROUP)return{".tag":"dropbox_id",dropbox_id:e.getContactID()};if(t&&e.type===i.default.EMAIL&&e.dbx_account_id)return{".tag":"dropbox_id",dropbox_id:e.dbx_account_id};if(e.type!==i.default.INVALID_ID)return{".tag":"email",email:e.getContactID()};throw new Error("Unknown contact type")},t.contactsToMembers=function(e,n){return void 0===n&&(n=!1),e.map((function(e){return t.contactToMember(e,n)}))},t.createUnionScalar=function(e,t){return new s.UnionScalar(e,t)},t.combinedPolicyDiffToApi=function(e){var t={};return e?(null!=e.acl_update_policy&&(t.acl_update_policy=e.acl_update_policy),null!=e.member_policy&&(t.member_policy=e.member_policy),null!=e.shared_link_policy&&(t.shared_link_policy=e.shared_link_policy),null!=e.download_policy&&(t.download_policy=e.download_policy),null!=e.viewer_info_policy&&(t.viewer_info_policy=e.viewer_info_policy),t):t}})),define("modules/clean/sharing/link_description",["require","exports","tslib","react","modules/constants/trademark","modules/core/i18n","modules/core/assert","modules/clean/sharing/link_description_plain_text","modules/clean/sharing/link_description_advanced_settings"],(function(e,t,n,i,r,s,o,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatLinkDescriptionPlainText=t.formatLinkDescription=t.formatShmodelLinkDescription=t.formatRighteousLinkDescription=void 0,i=n.__importDefault(i);var u=function(e){return null!=e.expires?(function(e){o.assert(!!e.expires,"this function should only be used when there is expiry for linkMetadata");var t=(function(){if(null!=e.expires){var t=e.expires.getTime()-(new Date).getTime();return t<0&&(t=0),Math.floor(t/864e5)}return-1})();return(function(){if(e.isFolder())switch(e.link_permissions.resolved_visibility){case"password":return s.intl.formatMessage({id:"Rt6gCQ",defaultMessage:"{count, plural, one{<strong>Anyone</strong> with the link and the password can <strong>view</strong> this folder. Expires in <strong>a day</strong>.} other{<strong>Anyone </strong>with the link and the password can <strong>view</strong> this folder. Expires in <strong>{count} days</strong>.}}"},{count:t,strong:function(e){return i.default.createElement("strong",null,e)}});case"public":return s.intl.formatMessage({id:"THdx1D",defaultMessage:"{count, plural, one{<strong>Anyone</strong> with the link can <strong>view</strong> this folder. Expires in <strong>a day</strong>.} other{<strong>Anyone</strong> with the link can <strong>view</strong> this folder. Expires in <strong>{count} days</strong>.}}"},{count:t,strong:function(e){return i.default.createElement("strong",null,e)}});case"shared_folder_only":return s.intl.formatMessage({id:"cVhN0Q",defaultMessage:"{count, plural, one{<strong>Members of this folder</strong> with the link can <strong>view</strong> this folder. Expires in <strong>a day</strong>.} other{<strong>Members of this folder</strong> with the link can <strong>view</strong> this folder. Expires in <strong>{count} days</strong>.}}"},{count:t,strong:function(e){return i.default.createElement("strong",null,e)}});case"team_and_password":return s.intl.formatMessage({id:"Pfilk1",defaultMessage:"{count, plural, one{<strong>Anyone on your Dropbox team</strong> with the link and the password can <strong>view</strong> this folder. Expires in <strong>a day</strong>.} other{<strong>Anyone on your Dropbox team</strong> with the link and the password can <strong>view</strong> this folder. Expires in <strong>{count} days</strong>.}}"},{count:t,strong:function(e){return i.default.createElement("strong",null,e)}});case"team_only":return s.intl.formatMessage({id:"M2M2fz",defaultMessage:"{count, plural, one{<strong>Anyone on your Dropbox team</strong> with the link can <strong>view</strong> this folder. Expires in <strong>a day</strong>.} other{<strong>Anyone on your Dropbox team</strong> with the link can <strong>view</strong> this folder. Expires in <strong>{count} days</strong>.}}"},{count:t,strong:function(e){return i.default.createElement("strong",null,e)}});case"only_you":return s.intl.formatMessage({id:"FPEPRA",defaultMessage:"{count, plural, one{<strong>Only you</strong> can <strong>view</strong> via the link. Expires in <strong>a day</strong>.} other{<strong>Only you</strong> can <strong>view</strong> via the link. Expires in <strong>{count} days</strong>.}}"},{count:t,strong:function(e){return i.default.createElement("strong",null,e)}});default:return a.formatUnknownAudience(e.link_permissions.resolved_visibility)}else switch(e.link_permissions.resolved_visibility){case"password":return s.intl.formatMessage({id:"Xphok/",defaultMessage:"{count, plural, one{<strong>Anyone</strong> with the link and the password can <strong>view</strong> this file. Expires in <strong>a day</strong>.} other{<strong>Anyone</strong> with the link and the password can <strong>view</strong> this file. Expires in <strong>{count} days</strong>.}}"},{count:t,strong:function(e){return i.default.createElement("strong",null,e)}});case"public":return s.intl.formatMessage({id:"fMwJMT",defaultMessage:"{count, plural, one{<strong>Anyone</strong> with the link can <strong>view</strong> this file. Expires in <strong>a day</strong>.} other{<strong>Anyone</strong> with the link can <strong>view</strong> this file. Expires in <strong>{count} days</strong>.}}"},{count:t,strong:function(e){return i.default.createElement("strong",null,e)}});case"shared_folder_only":return s.intl.formatMessage({id:"Fbyxe1",defaultMessage:"{count, plural, one{<strong>Members of the containing shared folder</strong> with the link can <strong>view</strong> this file. Expires in <strong>a day</strong>.} other{<strong>Members of the containing shared folder</strong> with the link can <strong>view</strong> this file. Expires in <strong>{count} days</strong>.}}"},{count:t,strong:function(e){return i.default.createElement("strong",null,e)}});case"team_and_password":return s.intl.formatMessage({id:"nZtxjD",defaultMessage:"{count, plural, one{<strong>Anyone on your Dropbox team</strong> with the link and the password can <strong>view</strong> this file. Expires in <strong>a day</strong>.} other{<strong>Anyone on your Dropbox team</strong> with the link and the password can <strong>view</strong> this file. Expires in <strong>{count} days</strong>.}}"},{count:t,strong:function(e){return i.default.createElement("strong",null,e)}});case"team_only":return s.intl.formatMessage({id:"DuTcCA",defaultMessage:"{count, plural, one{<strong>Anyone on your Dropbox team</strong> with the link can <strong>view</strong> this file. Expires in <strong>a day</strong>.} other{<strong>Anyone on your Dropbox team</strong> with the link can <strong>view</strong> this file. Expires in <strong>{count} days</strong>.}}"},{count:t,strong:function(e){return i.default.createElement("strong",null,e)}});case"no_one":return s.intl.formatMessage({id:"+I73e9",defaultMessage:"{count, plural, one{<strong>Members of this file</strong> with the link can <strong>view</strong>. Expires in <strong>a day</strong>.} other{<strong>Members of this file</strong> with the link can <strong>view</strong>. Expires in <strong>{count} days</strong>.}}"},{count:t,strong:function(e){return i.default.createElement("strong",null,e)}});case"only_you":return s.intl.formatMessage({id:"FPEPRA",defaultMessage:"{count, plural, one{<strong>Only you</strong> can <strong>view</strong> via the link. Expires in <strong>a day</strong>.} other{<strong>Only you</strong> can <strong>view</strong> via the link. Expires in <strong>{count} days</strong>.}}"},{count:t,strong:function(e){return i.default.createElement("strong",null,e)}});default:return a.formatUnknownAudience(e.link_permissions.resolved_visibility)}})()})(e):(function(e){return(function(){if(e.isFolder())switch(e.link_permissions.resolved_visibility){case"password":return s.intl.formatMessage({id:"lULsLt",defaultMessage:"<strong>Anyone</strong> with the link and password can <strong>view</strong> this folder"},{strong:function(e){return i.default.createElement("strong",null,e)}});case"public":return s.intl.formatMessage({id:"/D+mkV",defaultMessage:"<strong>Anyone</strong> with the link can <strong>view</strong> this folder"},{strong:function(e){return i.default.createElement("strong",null,e)}});case"no_one":case"shared_folder_only":return s.intl.formatMessage({id:"b0InwQ",defaultMessage:"<strong>Members of this folder</strong> with this link can <strong>view</strong> this folder"},{strong:function(e){return i.default.createElement("strong",null,e)}});case"team_and_password":return s.intl.formatMessage({id:"EtOBfz",defaultMessage:"<strong>Anyone on your Dropbox team</strong> with the link and the password can <strong>view</strong> this folder"},{strong:function(e){return i.default.createElement("strong",null,e)}});case"team_only":return s.intl.formatMessage({id:"SZVADm",defaultMessage:"<strong>Anyone on your Dropbox team</strong> with the link can <strong>view</strong> this folder"},{strong:function(e){return i.default.createElement("strong",null,e)}});case"only_you":return s.intl.formatMessage({id:"stkqXh",defaultMessage:"<strong>Only you</strong> can <strong>view</strong> via the link."},{strong:function(e){return i.default.createElement("strong",null,e)}});default:return a.formatUnknownAudience(e.link_permissions.resolved_visibility)}else switch(e.link_permissions.resolved_visibility){case"password":return s.intl.formatMessage({id:"Qoycwr",defaultMessage:"<strong>Anyone</strong> with the link and password can <strong>view</strong> this file"},{strong:function(e){return i.default.createElement("strong",null,e)}});case"public":return s.intl.formatMessage({id:"7EEE7z",defaultMessage:"<strong>Anyone</strong> with the link can <strong>view</strong> this file"},{strong:function(e){return i.default.createElement("strong",null,e)}});case"shared_folder_only":return s.intl.formatMessage({id:"T1hxp2",defaultMessage:"<strong>Members of the containing shared folder</strong> with the link can <strong>view</strong> this file"},{strong:function(e){return i.default.createElement("strong",null,e)}});case"team_and_password":return s.intl.formatMessage({id:"DRw3WP",defaultMessage:"<strong>Anyone on your Dropbox team</strong> with the link and the password can <strong>view</strong> this file"},{strong:function(e){return i.default.createElement("strong",null,e)}});case"team_only":return s.intl.formatMessage({id:"k3LUkX",defaultMessage:"<strong>Anyone on your Dropbox team</strong> with the link can <strong>view</strong> this file"},{strong:function(e){return i.default.createElement("strong",null,e)}});case"no_one":return s.intl.formatMessage({id:"KmXSRG",defaultMessage:"<strong>Members of the file</strong> with the link can <strong>view</strong>"},{strong:function(e){return i.default.createElement("strong",null,e)}});case"only_you":return s.intl.formatMessage({id:"stkqXh",defaultMessage:"<strong>Only you</strong> can <strong>view</strong> via the link."},{strong:function(e){return i.default.createElement("strong",null,e)}});default:return a.formatUnknownAudience(e.link_permissions.resolved_visibility)}})()})(e)},c=function(e){return null!=e.expires?(function(e){o.assert(!!e.expires,"this function should only be used when there is expiry for linkMetadata");var t=e.expires?e.expires.getTime():0,n=(function(){if(null!=e.expires){var n=t-(new Date).getTime();return n<0&&(n=0),Math.floor(n/864e5)}return-1})();return(function(){if(e.isFolder())switch(e.link_permissions.resolved_visibility){case"password":return s.intl.formatMessage({id:"Zkr/e/",defaultMessage:"{count, plural, one{<strong>Anyone</strong> with the link and the password can <strong>view</strong> this folder. Expires in <strong>a day</strong>. Downloads disabled.} other{<strong>Anyone</strong> with the link and the password can <strong>view</strong> this folder. Expires in <strong>{count} days</strong>. Downloads disabled.}}"},{count:n,strong:function(e){return i.default.createElement("strong",null,e)}});case"public":return s.intl.formatMessage({id:"7V9Fkg",defaultMessage:"{count, plural, one{<strong>Anyone</strong> with the link can <strong>view</strong> this folder. Expires in <strong>a day</strong>. Downloads disabled.} other{<strong>Anyone</strong> with the link can <strong>view</strong> this folder. Expires in <strong>{count} days</strong>. Downloads disabled.}}"},{count:n,strong:function(e){return i.default.createElement("strong",null,e)}});case"no_one":case"shared_folder_only":return s.intl.formatMessage({id:"wou0NI",defaultMessage:"{count, plural, one{<strong>Members of this folder</strong> with the link can <strong>view</strong> this folder. Expires in <strong>a day</strong>. Downloads disabled.} other{<strong>Members of this folder</strong> with the link can <strong>view</strong> this folder. Expires in <strong>{count} days</strong>. Downloads disabled.}}"},{count:n,strong:function(e){return i.default.createElement("strong",null,e)}});case"team_and_password":return s.intl.formatMessage({id:"z5N53p",defaultMessage:"{count, plural, one{<strong>Anyone on your Dropbox team</strong> with the link and the password can <strong>view</strong> this folder. Expires in <strong>a day</strong>. Downloads disabled.} other{<strong>Anyone on your Dropbox team</strong> with the link and the password can <strong>view</strong> this folder. Expires in <strong>{count} days</strong>. Downloads disabled.}}"},{count:n,strong:function(e){return i.default.createElement("strong",null,e)}});case"team_only":return s.intl.formatMessage({id:"quIclB",defaultMessage:"{count, plural, one{<strong>Anyone on your Dropbox team</strong> with the link can <strong>view</strong> this folder. Expires in <strong>a day</strong>. Downloads disabled.} other{<strong>Anyone on your Dropbox team</strong> with the link can <strong>view</strong> this folder. Expires in <strong>{count} days</strong>. Downloads disabled.}}"},{count:n,strong:function(e){return i.default.createElement("strong",null,e)}});case"only_you":return s.intl.formatMessage({id:"SeuQjt",defaultMessage:"{count, plural, one{<strong>Only you</strong> can <strong>view</strong> via the link. Expires in <strong>a day</strong>. Downloads disabled.} other{<strong>Only you</strong> can <strong>view</strong> via the link. Expires in <strong>{count} days</strong>. Downloads disabled.}}"},{count:n,strong:function(e){return i.default.createElement("strong",null,e)}});default:return a.formatUnknownAudience(e.link_permissions.resolved_visibility)}else switch(e.link_permissions.resolved_visibility){case"password":return s.intl.formatMessage({id:"T/2pGm",defaultMessage:"{count, plural, one{<strong>Anyone</strong> with the link and the password can <strong>view</strong> this file. Expires in <strong>a day</strong>. Downloads disabled.} other{<strong>Anyone</strong> with the link and the password can <strong>view</strong> this file. Expires in <strong>{count} days</strong>. Downloads disabled.}}"},{count:n,strong:function(e){return i.default.createElement("strong",null,e)}});case"public":return s.intl.formatMessage({id:"pNbN+L",defaultMessage:"{count, plural, one{<strong>Anyone</strong> with the link can <strong>view</strong> this file. Expires in <strong>a day</strong>. Downloads disabled.} other{<strong>Anyone</strong> with the link can <strong>view</strong> this file. Expires in <strong>{count} days</strong>. Downloads disabled.}}"},{count:n,strong:function(e){return i.default.createElement("strong",null,e)}});case"shared_folder_only":return s.intl.formatMessage({id:"1Bavz9",defaultMessage:"{count, plural, one{<strong>Members of the containing shared folder</strong> with the link can <strong>view</strong> this file. Expires in <strong>a day</strong>. Downloads disabled.} other{<strong>Members of the containing shared folder</strong> with the link can <strong>view</strong> this file. Expires in <strong>{count} days</strong>. Downloads disabled.}}"},{count:n,strong:function(e){return i.default.createElement("strong",null,e)}});case"team_and_password":return s.intl.formatMessage({id:"GbOWVs",defaultMessage:"{count, plural, one{<strong>Anyone on your Dropbox team</strong> with the link and the password can <strong>view</strong> this file. Expires in <strong>a day</strong>. Downloads disabled.} other{<strong>Anyone on your Dropbox team</strong> with the link and the password can <strong>view</strong> this file. Expires in <strong>{count} days</strong>. Downloads disabled.}}"},{count:n,strong:function(e){return i.default.createElement("strong",null,e)}});case"no_one":return s.intl.formatMessage({id:"57YaoK",defaultMessage:"{count, plural, one{<strong>Members of this file</strong> with the link can <strong>view</strong>. Expires in <strong>a day</strong>. Downloads disabled.} other{<strong>Members of this file</strong> with the link can <strong>view</strong>. Expires in <strong>{count} days</strong>. Downloads disabled.}}"},{count:n,strong:function(e){return i.default.createElement("strong",null,e)}});case"team_only":return s.intl.formatMessage({id:"QCwOVh",defaultMessage:"{count, plural, one{<strong>Anyone on your Dropbox team</strong> with the link can <strong>view</strong> this file. Expires in <strong>a day</strong>. Downloads disabled.} other{<strong>Anyone on your Dropbox team</strong> with the link can <strong>view</strong> this file. Expires in <strong>{count} days</strong>. Downloads disabled.}}"},{count:n,strong:function(e){return i.default.createElement("strong",null,e)}});case"only_you":return s.intl.formatMessage({id:"iWlgDz",defaultMessage:"<strong>Only you</strong> can <strong>view</strong> via the link. Expires in <strong>{count, plural, one{a day} other{# days}}</strong>. Downloads disabled."},{count:n,strong:function(e){return i.default.createElement("strong",null,e)}});default:return a.formatUnknownAudience(e.link_permissions.resolved_visibility)}})()})(e):(function(e){return(function(){if(e.isFolder())switch(e.link_permissions.resolved_visibility){case"password":return s.intl.formatMessage({id:"3jdOlz",defaultMessage:"<strong>Anyone</strong> with the link and password can <strong>view</strong> this folder. Downloads disabled."},{strong:function(e){return i.default.createElement("strong",null,e)}});case"public":return s.intl.formatMessage({id:"tZhi73",defaultMessage:"<strong>Anyone</strong> with the link can <strong>view</strong> this folder. Downloads disabled."},{strong:function(e){return i.default.createElement("strong",null,e)}});case"no_one":case"shared_folder_only":return s.intl.formatMessage({id:"TybZfs",defaultMessage:"<strong>Members of this folder</strong> with this link can <strong>view</strong> this folder. Downloads disabled."},{strong:function(e){return i.default.createElement("strong",null,e)}});case"team_and_password":return s.intl.formatMessage({id:"lGq+yR",defaultMessage:"<strong>Anyone on your Dropbox team</strong> with the link and the password can <strong>view</strong> this folder. Downloads disabled."},{strong:function(e){return i.default.createElement("strong",null,e)}});case"team_only":return s.intl.formatMessage({id:"ovhQZO",defaultMessage:"<strong>Anyone on your Dropbox team</strong> with the link can <strong>view</strong> this folder. Downloads disabled."},{strong:function(e){return i.default.createElement("strong",null,e)}});case"only_you":return s.intl.formatMessage({id:"FJLHLl",defaultMessage:"<strong>Only you</strong> can <strong>view</strong> via the link. Downloads disabled."},{strong:function(e){return i.default.createElement("strong",null,e)}});default:return a.formatUnknownAudience(e.link_permissions.resolved_visibility)}else switch(e.link_permissions.resolved_visibility){case"password":return s.intl.formatMessage({id:"TU1rgQ",defaultMessage:"<strong>Anyone</strong> with the link and password can <strong>view</strong> this file. Downloads disabled."},{strong:function(e){return i.default.createElement("strong",null,e)}});case"public":return s.intl.formatMessage({id:"+EsI+X",defaultMessage:"<strong>Anyone</strong> with the link can <strong>view</strong> this file. Downloads disabled."},{strong:function(e){return i.default.createElement("strong",null,e)}});case"shared_folder_only":return s.intl.formatMessage({id:"dDgY49",defaultMessage:"<strong>Members of the containing shared folder</strong> with the link can <strong>view</strong> this file. Downloads disabled."},{strong:function(e){return i.default.createElement("strong",null,e)}});case"team_and_password":return s.intl.formatMessage({id:"Fa+cEy",defaultMessage:"<strong>Anyone on your Dropbox team</strong> with the link and the password can <strong>view</strong> this file. Downloads disabled."},{strong:function(e){return i.default.createElement("strong",null,e)}});case"team_only":return s.intl.formatMessage({id:"ksjqrM",defaultMessage:"<strong>Anyone on your Dropbox team</strong> with the link can <strong>view</strong> this file. Downloads disabled."},{strong:function(e){return i.default.createElement("strong",null,e)}});case"no_one":return s.intl.formatMessage({id:"/TynTR",defaultMessage:"<strong>Members of this file</strong> with the link can <strong>view</strong>. Downloads disabled."},{strong:function(e){return i.default.createElement("strong",null,e)}});case"only_you":return s.intl.formatMessage({id:"FJLHLl",defaultMessage:"<strong>Only you</strong> can <strong>view</strong> via the link. Downloads disabled."},{strong:function(e){return i.default.createElement("strong",null,e)}});default:return a.formatUnknownAudience(e.link_permissions.resolved_visibility)}})()})(e)},d=function(e){return!1===e.link_permissions.allow_download?c(e):u(e)};t.formatShmodelLinkDescription=d;var p=function(e,t){switch(e.link_permissions.link_access_level){case"editor":return h(e,t);case"viewer":return _(e,t);default:throw Error("Unknown link access level: "+e.link_permissions.link_access_level)}};t.formatRighteousLinkDescription=p;t.formatLinkDescription=function(e,t){return e.isRighteousLink()?p(e,t):d(e)};t.formatLinkDescriptionPlainText=function(e,t,n){return e.isRighteousLink()?n?l.formatRighteousLinkAdvancedSettingsDescription(e,t):p(e,t):a.formatShmodelLinkDescriptionPlainText(e)};var h=function(e,t){switch(e.link_permissions.effective_audience){case"public":return s.intl.formatMessage({id:"a3Sd0R",defaultMessage:"Anyone with this link can edit the file."});case"team":return t?s.intl.formatMessage({id:"d2zmmn",defaultMessage:"Anyone on your {trademark_business} team with this link can edit the file."},{trademark_business:r.TRADEMARK_BUSINESS}):s.intl.formatMessage({id:"BjuWgM",defaultMessage:"Anyone on the {trademark_business} team with this link can edit the file."},{trademark_business:r.TRADEMARK_BUSINESS});case"no_one":return s.intl.formatMessage({id:"+csK/m",defaultMessage:"Members of the file with this link can edit."});default:return a.formatUnknownAudience(e.link_permissions.effective_audience)}},_=function(e,t){switch(e.link_permissions.effective_audience){case"public":return s.intl.formatMessage({id:"oxZeg7",defaultMessage:"Anyone with this link can view the file."});case"team":return t?s.intl.formatMessage({id:"KQwzZb",defaultMessage:"Anyone on your {trademark_business} team with this link can view the file."},{trademark_business:r.TRADEMARK_BUSINESS}):s.intl.formatMessage({id:"1rEKxF",defaultMessage:"Anyone on the {trademark_business} team with this link can view the file."},{trademark_business:r.TRADEMARK_BUSINESS});case"no_one":return s.intl.formatMessage({id:"qcHpky",defaultMessage:"Members of the file with this link can view."});default:return a.formatUnknownAudience(e.link_permissions.effective_audience)}}})),define("modules/clean/sharing/link_description_advanced_settings",["require","exports","modules/core/i18n","modules/core/assert","modules/constants/trademark"],(function(e,t,n,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatRighteousLinkAdvancedSettingsDescription=void 0;t.formatRighteousLinkAdvancedSettingsDescription=function(e,t){return!1===e.link_permissions.allow_download?null!=e.expires?!1===e.link_permissions.require_password?p(e,t):h(e,t):!1===e.link_permissions.require_password?l(e,t):o(e,t):null!=e.expires?!1===e.link_permissions.require_password?d(e,t):c(e,t):!1===e.link_permissions.require_password?u(e,t):a(e,t)};var s=function(e){var t=e.expires?e.expires.getTime():0;if(null!=e.expires){var n=t-(new Date).getTime();return n<0&&(n=0),Math.floor(n/864e5)}return-1},o=function(e,t){switch(e.link_permissions.link_access_level){case"editor":switch(e.link_permissions.effective_audience){case"public":return n.intl.formatMessage({id:"cxrZ5f",defaultMessage:"Anyone with this link and password can edit the file. Downloads disabled."});case"team":return t?n.intl.formatMessage({id:"TQmLgY",defaultMessage:"Anyone on your {trademark_business} team with this link and password can edit the file. Downloads disabled."},{trademark_business:r.TRADEMARK_BUSINESS}):n.intl.formatMessage({id:"2bSlge",defaultMessage:"Anyone on the {trademark_business} team with this link and password can edit the file. Downloads disabled."},{trademark_business:r.TRADEMARK_BUSINESS});case"no_one":return n.intl.formatMessage({id:"whxBh0",defaultMessage:"Members of the file with this link and password can edit. Downloads disabled."});default:throw Error("Unknown link audience: "+e.link_permissions.effective_audience)}case"viewer":switch(e.link_permissions.effective_audience){case"public":return n.intl.formatMessage({id:"PqLAde",defaultMessage:"Anyone with this link and password can view the file. Downloads disabled."});case"team":return t?n.intl.formatMessage({id:"AJEVeE",defaultMessage:"Anyone on your {trademark_business} team with this link and password can view the file. Downloads disabled."},{trademark_business:r.TRADEMARK_BUSINESS}):n.intl.formatMessage({id:"aEL0+O",defaultMessage:"Anyone on the {trademark_business} team with this link and password can view the file. Downloads disabled."},{trademark_business:r.TRADEMARK_BUSINESS});case"no_one":return n.intl.formatMessage({id:"dm25xu",defaultMessage:"Members of the file with this link and password can view. Downloads disabled."});default:throw Error("Unknown link audience: "+e.link_permissions.effective_audience)}default:throw Error("Unknown link access level: "+e.link_permissions.link_access_level)}},a=function(e,t){switch(e.link_permissions.link_access_level){case"editor":switch(e.link_permissions.effective_audience){case"public":return n.intl.formatMessage({id:"Y/LBQu",defaultMessage:"Anyone with this link and password can edit the file."});case"team":return t?n.intl.formatMessage({id:"C4C3zD",defaultMessage:"Anyone on your {trademark_business} team with this link and password can edit the file."},{trademark_business:r.TRADEMARK_BUSINESS}):n.intl.formatMessage({id:"QrSEbK",defaultMessage:"Anyone on the {trademark_business} team with this link and password can edit the file."},{trademark_business:r.TRADEMARK_BUSINESS});case"no_one":return n.intl.formatMessage({id:"WsbIo+",defaultMessage:"Members of the file with this link and password can edit."});default:throw Error("Unknown link audience: "+e.link_permissions.effective_audience)}case"viewer":switch(e.link_permissions.effective_audience){case"public":return n.intl.formatMessage({id:"deMB/m",defaultMessage:"Anyone with this link and password can view the file."});case"team":return t?n.intl.formatMessage({id:"jRW/3Y",defaultMessage:"Anyone on your {trademark_business} team with this link and password can view the file."},{trademark_business:r.TRADEMARK_BUSINESS}):n.intl.formatMessage({id:"pxf8F/",defaultMessage:"Anyone on the {trademark_business} team with this link and password can view the file."},{trademark_business:r.TRADEMARK_BUSINESS});case"no_one":return n.intl.formatMessage({id:"gQVZHe",defaultMessage:"Members of the file with this link and password can view."});default:throw Error("Unknown link audience: "+e.link_permissions.effective_audience)}default:throw Error("Unknown link access level: "+e.link_permissions.link_access_level)}},l=function(e,t){switch(e.link_permissions.link_access_level){case"editor":switch(e.link_permissions.effective_audience){case"public":return n.intl.formatMessage({id:"EEvTVP",defaultMessage:"Anyone with this link can edit the file. Downloads disabled."});case"team":return t?n.intl.formatMessage({id:"3+mqzE",defaultMessage:"Anyone on your {trademark_business} team with this link can edit the file. Downloads disabled."},{trademark_business:r.TRADEMARK_BUSINESS}):n.intl.formatMessage({id:"xBbH4N",defaultMessage:"Anyone on the {trademark_business} team with this link can edit the file. Downloads disabled."},{trademark_business:r.TRADEMARK_BUSINESS});case"no_one":return n.intl.formatMessage({id:"nHOq1c",defaultMessage:"Members of the file with this link can edit. Downloads disabled."});default:throw Error("Unknown link audience: "+e.link_permissions.effective_audience)}case"viewer":switch(e.link_permissions.effective_audience){case"public":return n.intl.formatMessage({id:"hgAISZ",defaultMessage:"Anyone with this link can view the file. Downloads disabled."});case"team":return t?n.intl.formatMessage({id:"9j7wtG",defaultMessage:"Anyone on your {trademark_business} team with this link can view the file. Downloads disabled."},{trademark_business:r.TRADEMARK_BUSINESS}):n.intl.formatMessage({id:"HwbdrG",defaultMessage:"Anyone on the {trademark_business} team with this link can view the file. Downloads disabled."},{trademark_business:r.TRADEMARK_BUSINESS});case"no_one":return n.intl.formatMessage({id:"vWPrZf",defaultMessage:"Members of the file with this link can view. Downloads disabled."});default:throw Error("Unknown link audience: "+e.link_permissions.effective_audience)}default:throw Error("Unknown link access level: "+e.link_permissions.link_access_level)}},u=function(e,t){switch(e.link_permissions.link_access_level){case"editor":switch(e.link_permissions.effective_audience){case"public":return n.intl.formatMessage({id:"a3Sd0R",defaultMessage:"Anyone with this link can edit the file."});case"team":return t?n.intl.formatMessage({id:"d2zmmn",defaultMessage:"Anyone on your {trademark_business} team with this link can edit the file."},{trademark_business:r.TRADEMARK_BUSINESS}):n.intl.formatMessage({id:"BjuWgM",defaultMessage:"Anyone on the {trademark_business} team with this link can edit the file."},{trademark_business:r.TRADEMARK_BUSINESS});case"no_one":return n.intl.formatMessage({id:"+csK/m",defaultMessage:"Members of the file with this link can edit."});default:throw Error("Unknown link audience: "+e.link_permissions.effective_audience)}case"viewer":switch(e.link_permissions.effective_audience){case"public":return n.intl.formatMessage({id:"oxZeg7",defaultMessage:"Anyone with this link can view the file."});case"team":return t?n.intl.formatMessage({id:"KQwzZb",defaultMessage:"Anyone on your {trademark_business} team with this link can view the file."},{trademark_business:r.TRADEMARK_BUSINESS}):n.intl.formatMessage({id:"1rEKxF",defaultMessage:"Anyone on the {trademark_business} team with this link can view the file."},{trademark_business:r.TRADEMARK_BUSINESS});case"no_one":return n.intl.formatMessage({id:"qcHpky",defaultMessage:"Members of the file with this link can view."});default:throw Error("Unknown link audience: "+e.link_permissions.effective_audience)}default:throw Error("Unknown link access level: "+e.link_permissions.link_access_level)}},c=function(e,t){i.assert(!!e.expires,"this function should only be used when there is expiry for linkMetadata");var o=s(e);switch(e.link_permissions.link_access_level){case"editor":switch(e.link_permissions.effective_audience){case"public":return n.intl.formatMessage({id:"YGF1+m",defaultMessage:"{count, plural, one{Anyone with this link and password can edit the file. Expires in a day.} other{Anyone with this link and password can edit the file. Expires in {count} days.}}"},{count:o});case"team":return t?n.intl.formatMessage({id:"FmMziB",defaultMessage:"{count, plural, one{Anyone on your {trademark_business} team with this link and password can edit the file. Expires in a day.} other{Anyone on your {trademark_business} team with this link and password can edit the file. Expires in {count} days.}}"},{count:o,trademark_business:r.TRADEMARK_BUSINESS}):n.intl.formatMessage({id:"xBIzV+",defaultMessage:"{count, plural, one{Anyone on the {trademark_business} team with this link and password can edit the file. Expires in a day.} other{Anyone on the {trademark_business} team with this link and password can edit the file. Expires in {count} days.}}"},{count:o,trademark_business:r.TRADEMARK_BUSINESS});case"no_one":return n.intl.formatMessage({id:"Iyx6hS",defaultMessage:"{count, plural, one{Members of the file with this link and password can edit. Expires in a day.} other{Members of the file with this link and password can edit. Expires in {count} days.}}"},{count:o,trademark_business:r.TRADEMARK_BUSINESS});default:throw Error("Unknown link audience: "+e.link_permissions.effective_audience)}case"viewer":switch(e.link_permissions.effective_audience){case"public":return n.intl.formatMessage({id:"ScWMex",defaultMessage:"{count, plural, one{Anyone with this link and password can view the file. Expires in a day.} other{Anyone with this link and password can view the file. Expires in {count} days.}}"},{count:o});case"team":return t?n.intl.formatMessage({id:"q2skMY",defaultMessage:"{count, plural, one{Anyone on your {trademark_business} team with this link and password can view the file. Expires in a day.} other{Anyone on your {trademark_business} team with this link and password can view the file. Expires in {count} days.}}"},{count:o,trademark_business:r.TRADEMARK_BUSINESS}):n.intl.formatMessage({id:"koMmbb",defaultMessage:"{count, plural, one{Anyone on the {trademark_business} team with this link and password can view the file. Expires in a day.} other{Anyone on the {trademark_business} team with this link and password can view the file. Expires in {count} days.}}"},{count:o,trademark_business:r.TRADEMARK_BUSINESS});case"no_one":return n.intl.formatMessage({id:"q6m+2V",defaultMessage:"{count, plural, one{Members of the file with this link and password can view. Expires in a day.} other{Members of the file with this link and password can view. Expires in {count} days.}}"},{count:o});default:throw Error("Unknown link audience: "+e.link_permissions.effective_audience)}default:throw Error("Unknown link access level: "+e.link_permissions.link_access_level)}},d=function(e,t){i.assert(!!e.expires,"this function should only be used when there is expiry for linkMetadata");var o=s(e);switch(e.link_permissions.link_access_level){case"editor":switch(e.link_permissions.effective_audience){case"public":return n.intl.formatMessage({id:"jpA9+q",defaultMessage:"{count, plural, one{Anyone with this link can edit the file. Expires in a day.} other{Anyone with this link can edit the file. Expires in {count} days.}}"},{count:o});case"team":return t?n.intl.formatMessage({id:"aL2iGX",defaultMessage:"{count, plural, one{Anyone on your {trademark_business} team with this link can edit the file. Expires in a day.} other{Anyone on your {trademark_business} team with this link can edit the file. Expires in {count} days.}}"},{count:o,trademark_business:r.TRADEMARK_BUSINESS}):n.intl.formatMessage({id:"gbta7Y",defaultMessage:"{count, plural, one{Anyone on the {trademark_business} team with this link can edit the file. Expires in a day.} other{Anyone on the {trademark_business} team with this link can edit the file. Expires in {count} days.}}"},{count:o,trademark_business:r.TRADEMARK_BUSINESS});case"no_one":return n.intl.formatMessage({id:"1EdolK",defaultMessage:"{count, plural, one{Members of the file with this link can edit. Expires in a day.} other{Members of the file with this link can edit. Expires in {count} days.}}"},{count:o,trademark_business:r.TRADEMARK_BUSINESS});default:throw Error("Unknown link audience: "+e.link_permissions.effective_audience)}case"viewer":switch(e.link_permissions.effective_audience){case"public":return n.intl.formatMessage({id:"VGO9WL",defaultMessage:"{count, plural, one{Anyone with this link can view the file. Expires in a day.} other{Anyone with this link can view the file. Expires in {count} days.}}"},{count:o});case"team":return t?n.intl.formatMessage({id:"6+PaTo",defaultMessage:"{count, plural, one{Anyone on your {trademark_business} team with this link can view the file. Expires in a day.} other{Anyone on your {trademark_business} team with this link can view the file. Expires in {count} days.}}"},{count:o,trademark_business:r.TRADEMARK_BUSINESS}):n.intl.formatMessage({id:"dShAa9",defaultMessage:"{count, plural, one{Anyone on the {trademark_business} team with this link can view the file. Expires in a day.} other{Anyone on the {trademark_business} team with this link can view the file. Expires in {count} days.}}"},{count:o,trademark_business:r.TRADEMARK_BUSINESS});case"no_one":return n.intl.formatMessage({id:"Pa7KCD",defaultMessage:"{count, plural, one{Members of the file with this link can view. Expires in a day.} other{Members of the file with this link can view. Expires in {count} days.}}"},{count:o});default:throw Error("Unknown link audience: "+e.link_permissions.effective_audience)}default:throw Error("Unknown link access level: "+e.link_permissions.link_access_level)}},p=function(e,t){i.assert(!!e.expires,"this function should only be used when there is expiry for linkMetadata");var o=s(e);switch(e.link_permissions.link_access_level){case"editor":switch(e.link_permissions.effective_audience){case"public":return n.intl.formatMessage({id:"CJtjRk",defaultMessage:"{count, plural, one{Anyone with this link can edit the file. Expires in a day. Downloads disabled.} other{Anyone with this link can edit the file. Expires in {count} days. Downloads disabled.}}"},{count:o});case"team":return t?n.intl.formatMessage({id:"5K8k8j",defaultMessage:"{count, plural, one{Anyone on your {trademark_business} team with this link can edit the file. Expires in a day. Downloads disabled.} other{Anyone on your {trademark_business} team with this link can edit the file. Expires in {count} days. Downloads disabled.}}"},{count:o,trademark_business:r.TRADEMARK_BUSINESS}):n.intl.formatMessage({id:"2c8AqX",defaultMessage:"{count, plural, one{Anyone on the {trademark_business} team with this link can edit the file. Expires in a day. Downloads disabled.} other{Anyone on the {trademark_business} team with this link can edit the file. Expires in {count} days. Downloads disabled.}}"},{count:o,trademark_business:r.TRADEMARK_BUSINESS});case"no_one":return n.intl.formatMessage({id:"zUmiuz",defaultMessage:"{count, plural, one{Members of the file with this link can edit. Expires in a day. Downloads disabled.} other{Members of the file with this link can edit. Expires in {count} days. Downloads disabled.}}"},{count:o});default:throw Error("Unknown link audience: "+e.link_permissions.effective_audience)}case"viewer":switch(e.link_permissions.effective_audience){case"public":return n.intl.formatMessage({id:"LhLDTC",defaultMessage:"{count, plural, one{Anyone with this link can view the file. Expires in a day. Downloads disabled.} other{Anyone with this link can view the file. Expires in {count} days. Downloads disabled.}}"},{count:o});case"team":return t?n.intl.formatMessage({id:"b/mGhH",defaultMessage:"{count, plural, one{Anyone on your {trademark_business} team with this link can view the file. Expires in a day. Downloads disabled.} other{Anyone on your {trademark_business} team with this link can view the file. Expires in {count} days. Downloads disabled.}}"},{count:o,trademark_business:r.TRADEMARK_BUSINESS}):n.intl.formatMessage({id:"YxsBme",defaultMessage:"{count, plural, one{Anyone on the {trademark_business} team with this link can view the file. Expires in a day. Downloads disabled.} other{Anyone on the {trademark_business} team with this link can view the file. Expires in {count} days. Downloads disabled.}}"},{count:o,trademark_business:r.TRADEMARK_BUSINESS});case"no_one":return n.intl.formatMessage({id:"9FCQD8",defaultMessage:"{count, plural, one{Members of the file with this link can view. Expires in a day. Downloads disabled.} other{Members of the file with this link can view. Expires in {count} days. Downloads disabled.}}"},{count:o});default:throw Error("Unknown link audience: "+e.link_permissions.effective_audience)}default:throw Error("Unknown link access level: "+e.link_permissions.link_access_level)}},h=function(e,t){i.assert(!!e.expires,"this function should only be used when there is expiry for linkMetadata");var o=s(e);switch(e.link_permissions.link_access_level){case"editor":switch(e.link_permissions.effective_audience){case"public":return n.intl.formatMessage({id:"9DkYwJ",defaultMessage:"{count, plural, one{Anyone with this link and password can edit the file. Expires in a day. Downloads disabled.} other{Anyone with this link and password can edit the file. Expires in {count} days. Downloads disabled.}}"},{count:o});case"team":return t?n.intl.formatMessage({id:"2WlplE",defaultMessage:"{count, plural, one{Anyone on your {trademark_business} team with this link and password can edit the file. Expires in a day. Downloads disabled.} other{Anyone on your {trademark_business} team with this link and password can edit the file. Expires in {count} days. Downloads disabled.}}"},{count:o,trademark_business:r.TRADEMARK_BUSINESS}):n.intl.formatMessage({id:"01SzRQ",defaultMessage:"{count, plural, one{Anyone on the {trademark_business} team with this link and password can edit the file. Expires in a day. Downloads disabled.} other{Anyone on the {trademark_business} team with this link and password can edit the file. Expires in {count} days. Downloads disabled.}}"},{count:o,trademark_business:r.TRADEMARK_BUSINESS});case"no_one":return n.intl.formatMessage({id:"i88LS8",defaultMessage:"{count, plural, one{Members of the file with this link and password can edit. Expires in a day. Downloads disabled.} other{Members of the file with this link and password can edit. Expires in {count} days. Downloads disabled.}}"},{count:o});default:throw Error("Unknown link audience: "+e.link_permissions.effective_audience)}case"viewer":switch(e.link_permissions.effective_audience){case"public":return n.intl.formatMessage({id:"/Ke+Ja",defaultMessage:"{count, plural, one{Anyone with this link and password can view the file. Expires in a day. Downloads disabled.} other{Anyone with this link and password can view the file. Expires in {count} days. Downloads disabled.}}"},{count:o});case"team":return t?n.intl.formatMessage({id:"oSMrQu",defaultMessage:"{count, plural, one{Anyone on your {trademark_business} team with this link and password and password can view the file. Expires in a day. Downloads disabled.} other{Anyone on your {trademark_business} team with this link and password can view the file. Expires in {count} days. Downloads disabled.}}"},{count:o,trademark_business:r.TRADEMARK_BUSINESS}):n.intl.formatMessage({id:"iN+FK7",defaultMessage:"{count, plural, one{Anyone on the {trademark_business} team with this link and password can view the file. Expires in a day. Downloads disabled.} other{Anyone on the {trademark_business} team with this link and password can view the file. Expires in {count} days. Downloads disabled.}}"},{count:o,trademark_business:r.TRADEMARK_BUSINESS});case"no_one":return n.intl.formatMessage({id:"yenocu",defaultMessage:"{count, plural, one{Members of the file with this link and password can view. Expires in a day. Downloads disabled.} other{Members of the file with this link and password can view. Expires in {count} days. Downloads disabled.}}"},{count:o});default:throw Error("Unknown link audience: "+e.link_permissions.effective_audience)}default:throw Error("Unknown link access level: "+e.link_permissions.link_access_level)}}})),define("modules/clean/sharing/link_description_plain_text",["require","exports","modules/core/assert","modules/core/i18n","modules/core/exception"],(function(e,t,n,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatUnknownAudience=t.formatShmodelLinkDescriptionPlainText=void 0;var s=function(e){var t=e.expires?e.expires.getTime():0;if(null!=e.expires){var n=t-(new Date).getTime();return n<0&&(n=0),Math.floor(n/864e5)}return-1};function o(e){return r.reportStack("Unknown audience when building link description: "+e,{severity:r.SEVERITY.CRITICAL,tags:["sharing"]}),""}t.formatShmodelLinkDescriptionPlainText=function(e){return!1===e.link_permissions.allow_download?null!=e.expires?(function(e){n.assert(!!e.expires,"this function should only be used when there is expiry for linkMetadata");var t=s(e);return(function(){if(e.isFolder())switch(e.link_permissions.resolved_visibility){case"password":return i.intl.formatMessage({id:"vZ+Gcq",defaultMessage:"{count, plural, one{Anyone with this link and the password can view the folder. Expires in a day. Downloads disabled.} other{Anyone with this link and the password can view the folder. Expires in {count} days. Downloads disabled.}}"},{count:t});case"public":return i.intl.formatMessage({id:"OrpLrY",defaultMessage:"{count, plural, one{Anyone with this link can view the folder. Expires in a day. Downloads disabled.} other{Anyone with this link can view the folder. Expires in {count} days. Downloads disabled.}}"},{count:t});case"shared_folder_only":return i.intl.formatMessage({id:"dBd/+Q",defaultMessage:"{count, plural, one{Members of the folder with this link can view this folder. Expires in a day. Downloads disabled.} other{Members of the folder with this link can view this folder. Expires in {count} days. Downloads disabled.}}"},{count:t});case"team_and_password":return i.intl.formatMessage({id:"gSChY6",defaultMessage:"{count, plural, one{Anyone on your Dropbox team with this link and the password can view the folder. Expires in a day. Downloads disabled.} other{Anyone on your Dropbox team with this link and the password can view the folder. Expires in {count} days. Downloads disabled.}}"},{count:t});case"team_only":return i.intl.formatMessage({id:"SkY8H3",defaultMessage:"{count, plural, one{Anyone on your Dropbox team with this link can view the folder. Expires in a day. Downloads disabled.} other{Anyone on your Dropbox team with this link can view the folder. Expires in {count} days. Downloads disabled.}}"},{count:t});case"no_one":return i.intl.formatMessage({id:"45l3oV",defaultMessage:"{count, plural, one{Members of the folder with this link can view. Expires in a day. Downloads disabled.} other{Members of the folder with this link can view. Expires in {count} days. Downloads disabled.}}"},{count:t});case"only_you":return i.intl.formatMessage({id:"8vR+GP",defaultMessage:"{count, plural, one{Only you can view via this link. Expires in a day. Downloads disabled.} other{Only you can view via this link. Expires in {count} days. Downloads disabled.}}"},{count:t});default:return o(e.link_permissions.resolved_visibility)}else switch(e.link_permissions.resolved_visibility){case"password":return i.intl.formatMessage({id:"7v6dcE",defaultMessage:"{count, plural, one{Anyone with this link and the password can view the file. Expires in a day. Downloads disabled.} other{Anyone with this link and the password can view the file. Expires in {count} days. Downloads disabled.}}"},{count:t});case"public":return i.intl.formatMessage({id:"LhLDTC",defaultMessage:"{count, plural, one{Anyone with this link can view the file. Expires in a day. Downloads disabled.} other{Anyone with this link can view the file. Expires in {count} days. Downloads disabled.}}"},{count:t});case"shared_folder_only":return i.intl.formatMessage({id:"euxNFl",defaultMessage:"{count, plural, one{Members of the containing shared folder with this link can view the file. Expires in a day. Downloads disabled.} other{Members of the containing shared folder with this link can view this file. Expires in {count} days. Downloads disabled.}}"},{count:t});case"team_and_password":return i.intl.formatMessage({id:"8EZlSa",defaultMessage:"{count, plural, one{Anyone on your Dropbox team with this link and the password can view the file. Expires in a day. Downloads disabled.} other{Anyone on your Dropbox team with this link and the password can view the file. Expires in {count} days. Downloads disabled.}}"},{count:t});case"team_only":return i.intl.formatMessage({id:"+sU/hx",defaultMessage:"{count, plural, one{Anyone on your Dropbox team with this link can view the file. Expires in a day. Downloads disabled.} other{Anyone on your Dropbox team with this link can view the file. Expires in {count} days. Downloads disabled.}}"},{count:t});case"no_one":return i.intl.formatMessage({id:"9FCQD8",defaultMessage:"{count, plural, one{Members of the file with this link can view. Expires in a day. Downloads disabled.} other{Members of the file with this link can view. Expires in {count} days. Downloads disabled.}}"},{count:t});case"only_you":return i.intl.formatMessage({id:"8vR+GP",defaultMessage:"{count, plural, one{Only you can view via this link. Expires in a day. Downloads disabled.} other{Only you can view via this link. Expires in {count} days. Downloads disabled.}}"},{count:t});default:return o(e.link_permissions.resolved_visibility)}})()})(e):(function(e){return(function(){if(e.isFolder())switch(e.link_permissions.resolved_visibility){case"password":return i.intl.formatMessage({id:"vS4Oei",defaultMessage:"Anyone with this link and password can view the folder. Downloads disabled."});case"public":return i.intl.formatMessage({id:"2q+G4r",defaultMessage:"Anyone with this link can view the folder. Downloads disabled."});case"shared_folder_only":return i.intl.formatMessage({id:"eW5qss",defaultMessage:"Members of the folder with this link can view the folder. Downloads disabled."});case"team_and_password":return i.intl.formatMessage({id:"BOIgzx",defaultMessage:"Anyone on your Dropbox team with this link and the password can view the folder. Downloads disabled."});case"team_only":return i.intl.formatMessage({id:"xzbxdc",defaultMessage:"Anyone on your Dropbox team with this link can view the folder. Downloads disabled."});case"no_one":return i.intl.formatMessage({id:"9htZoO",defaultMessage:"Members of the folder with this link can view. Downloads disabled."});case"only_you":return i.intl.formatMessage({id:"fGFHbB",defaultMessage:"Only you can view via this link. Downloads disabled."});default:return o(e.link_permissions.resolved_visibility)}else switch(e.link_permissions.resolved_visibility){case"password":return i.intl.formatMessage({id:"PqLAde",defaultMessage:"Anyone with this link and password can view the file. Downloads disabled."});case"public":return i.intl.formatMessage({id:"hgAISZ",defaultMessage:"Anyone with this link can view the file. Downloads disabled."});case"shared_folder_only":return i.intl.formatMessage({id:"GYDnJ7",defaultMessage:"Members of the containing shared folder with this link can view the file. Downloads disabled."});case"team_and_password":return i.intl.formatMessage({id:"pDYnvf",defaultMessage:"Anyone on your Dropbox team with this link and the password can view the file. Downloads disabled."});case"team_only":return i.intl.formatMessage({id:"dYMwXa",defaultMessage:"Anyone on your Dropbox team with this link can view the file. Downloads disabled."});case"no_one":return i.intl.formatMessage({id:"vWPrZf",defaultMessage:"Members of the file with this link can view. Downloads disabled."});case"only_you":return i.intl.formatMessage({id:"fGFHbB",defaultMessage:"Only you can view via this link. Downloads disabled."});default:return o(e.link_permissions.resolved_visibility)}})()})(e):null!=e.expires?(function(e){n.assert(!!e.expires,"this function should only be used when there is expiry for linkMetadata");var t=s(e);return(function(){if(e.isFolder())switch(e.link_permissions.resolved_visibility){case"password":return i.intl.formatMessage({id:"xYXFPH",defaultMessage:"{count, plural, one{Anyone with this link and the password can view the folder. Expires in a day.} other{Anyone with this link and the password can view the folder. Expires in {count} days.}}"},{count:t});case"public":return i.intl.formatMessage({id:"xZI0xM",defaultMessage:"{count, plural, one{Anyone with this link can view the folder. Expires in a day.} other{Anyone with this link can view the folder. Expires in {count} days.}}"},{count:t});case"shared_folder_only":return i.intl.formatMessage({id:"YUkY7N",defaultMessage:"{count, plural, one{Members of the folder with this link can view the folder. Expires in a day.} other{Members of the folder with this link can view the folder. Expires in {count} days.}}"},{count:t});case"team_and_password":return i.intl.formatMessage({id:"t7SwRy",defaultMessage:"{count, plural, one{Anyone on your Dropbox team with this link and the password can view the folder. Expires in a day.} other{Anyone on your Dropbox team with this link and the password can view the folder. Expires in {count} days.}}"},{count:t});case"team_only":return i.intl.formatMessage({id:"mY+P4M",defaultMessage:"{count, plural, one{Anyone on your Dropbox team with this link can view the folder. Expires in a day.} other{Anyone on your Dropbox team with this link can view the folder. Expires in {count} days.}}"},{count:t});case"no_one":return i.intl.formatMessage({id:"RHtmRP",defaultMessage:"{count, plural, one{Members of the folder with this link can view. Expires in a day.} other{Members of the folder with this link can view. Expires in {count} days.}}"},{count:t});case"only_you":return i.intl.formatMessage({id:"hTH6PN",defaultMessage:"{count, plural, one{Only you can view via this link. Expires in a day.} other{Only you can view via this link. Expires in {count} days.}}"},{count:t});default:return o(e.link_permissions.resolved_visibility)}else switch(e.link_permissions.resolved_visibility){case"password":return i.intl.formatMessage({id:"RwPv2b",defaultMessage:"{count, plural, one{Anyone with this link and the password can view the file. Expires in a day.} other{Anyone with this link and the password can view the file. Expires in {count} days.}}"},{count:t});case"public":return i.intl.formatMessage({id:"VGO9WL",defaultMessage:"{count, plural, one{Anyone with this link can view the file. Expires in a day.} other{Anyone with this link can view the file. Expires in {count} days.}}"},{count:t});case"shared_folder_only":return i.intl.formatMessage({id:"GDSx6k",defaultMessage:"{count, plural, one{Members of the containing shared folder with this link can view the file. Expires in a day.} other{Members of the containing shared folder with this link can view the file. Expires in {count} days.}}"},{count:t});case"team_and_password":return i.intl.formatMessage({id:"Zeh+SK",defaultMessage:"{count, plural, one{Anyone on your Dropbox team with this link and the password can view the file. Expires in a day.} other{Anyone on your Dropbox team with this link and the password can view the file. Expires in {count} days.}}"},{count:t});case"team_only":return i.intl.formatMessage({id:"eTrJTC",defaultMessage:"{count, plural, one{Anyone on your Dropbox team with this link can view the file. Expires in a day.} other{Anyone on your Dropbox team with this link can view the file. Expires in {count} days.}}"},{count:t});case"no_one":return i.intl.formatMessage({id:"Pa7KCD",defaultMessage:"{count, plural, one{Members of the file with this link can view. Expires in a day.} other{Members of the file with this link can view. Expires in {count} days.}}"},{count:t});case"only_you":return i.intl.formatMessage({id:"hTH6PN",defaultMessage:"{count, plural, one{Only you can view via this link. Expires in a day.} other{Only you can view via this link. Expires in {count} days.}}"},{count:t});default:return o(e.link_permissions.resolved_visibility)}})()})(e):(function(e){return(function(){if(e.isFolder())switch(e.link_permissions.resolved_visibility){case"password":return i.intl.formatMessage({id:"sYUe0C",defaultMessage:"Anyone with this link and password can view the folder."});case"public":return i.intl.formatMessage({id:"ysL13U",defaultMessage:"Anyone with this link can view the folder."});case"shared_folder_only":return i.intl.formatMessage({id:"kKbOL4",defaultMessage:"Members of the folder with this link can view the folder."});case"team_and_password":return i.intl.formatMessage({id:"GmhVIx",defaultMessage:"Anyone on your Dropbox team with this link and the password can view the folder."});case"team_only":return i.intl.formatMessage({id:"82WU9J",defaultMessage:"Anyone on your Dropbox team with this link can view the folder."});case"no_one":return i.intl.formatMessage({id:"XqgOD/",defaultMessage:"Members of the folder with this link can view."});case"only_you":return i.intl.formatMessage({id:"MrEDaY",defaultMessage:"Only you can view via this link."});default:return o(e.link_permissions.resolved_visibility)}else switch(e.link_permissions.resolved_visibility){case"password":return i.intl.formatMessage({id:"deMB/m",defaultMessage:"Anyone with this link and password can view the file."});case"public":return i.intl.formatMessage({id:"oxZeg7",defaultMessage:"Anyone with this link can view the file."});case"shared_folder_only":return i.intl.formatMessage({id:"a6Ka8X",defaultMessage:"Members of the containing shared folder with this link can view the file."});case"team_and_password":return i.intl.formatMessage({id:"35NLW6",defaultMessage:"Anyone on your Dropbox team with this link and the password can view the file."});case"team_only":return i.intl.formatMessage({id:"xqds9K",defaultMessage:"Anyone on your Dropbox team with this link can view the file."});case"no_one":return i.intl.formatMessage({id:"qcHpky",defaultMessage:"Members of the file with this link can view."});case"only_you":return i.intl.formatMessage({id:"MrEDaY",defaultMessage:"Only you can view via this link."});default:return o(e.link_permissions.resolved_visibility)}})()})(e)},t.formatUnknownAudience=o})),define("modules/clean/sharing/link_info",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkInfo=void 0;var n=function(e){var t=e.expires,n=e.isFolder,i=e.name,r=e.teamId,s=e.teamName,o=e.url,a=e.visibility,l=e.isPackage;this.expires=t,this.isFolder=n,this.name=i,this.teamId=r,this.teamName=s,this.url=o,this.visibility=a,this.isPackage=l};t.LinkInfo=n})),define("modules/clean/teams/admin/api/admin_console_api_client",["require","exports","tslib","api_v2/types","modules/clean/cloud_docs/types","modules/clean/profile_services/profile_services_constants","api_v2/default_team_client","modules/clean/filepath/filepath","modules/clean/sharing/api/util/types","modules/clean/viewer","modules/clean/teams/admin/widgets/settings_content_management/constants/constants","api_v2/user_client"],(function(e,t,n,i,r,s,o,a,l,u,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AdminConsoleApiClient=void 0,s=n.__importDefault(s),a=n.__importStar(a);var p=function(e){return{".tag":"email",email:e}},h=(function(){function e(e){var t;void 0===e&&(e=!1),this.isCMForCDM=e;var n=u.Viewer.get_viewer().get_user_by_role("work");n&&(n.team_member_id&&(this.selectAdminParams={headers:(t={},t[i.ApiV2HeaderNames.DropboxApiSelectAdmin]=n.team_member_id,t)}),this.teamClient=new o.DefaultTeamApiV2Client(n))}return e.prototype.teamRoutes=function(){return this.teamClient.ns("team")},e.prototype.domainRoutes=function(){return this.teamClient.ns("domains")},e.prototype.teamMembersInternal=function(){return this.teamClient.ns("team_members_internal")},e.prototype.teamInsightsRoutes=function(){return this.teamClient.ns("team_insights")},e.prototype.teamAdminAlertingRoutes=function(){return this.teamClient.ns("admin_alerting")},e.prototype.teamLogRoutes=function(){return this.teamClient.ns("team_log")},e.prototype.usersRoutes=function(){return this.teamClient.ns("users")},e.prototype.filesRoutes=function(){return this.teamClient.ns("files")},e.prototype.sharingRoutes=function(){return this.teamClient.ns("sharing")},e.prototype.federationRoutes=function(){return this.teamClient.ns("federation")},e.prototype.fileTransfersRoutes=function(){return this.teamClient.ns("file_transfers")},e.prototype.emailIngestRoutes=function(){return this.teamClient.ns("email_ingest")},e.prototype.cloudDocsRoutes=function(){return this.teamClient.ns("cloud_docs")},e.prototype.setPermanentDeletePolicy=function(e){return this.teamRoutes().rpc("set_permanent_delete_policy",{permanent_delete_enabled:e},{})},e.prototype.setContentAdministrationPolicy=function(e){var t={".tag":c.ContentAdministrationPolicyValue[e]};return this.teamRoutes().rpc("set_content_administration_policy",{content_administration_policy:t},{})},e.prototype.setRewindPolicy=function(e){var t={".tag":e};return this.teamRoutes().rpc("set_rewind_policy",{rewind_policy:t},{})},e.prototype.setCloudDocsPolicy=function(e,t){var n={};(n[r.CloudDocProviderIntegration.GDD_INTEGRATION.toString()]=e?r.IntegrationCreateAndEdit:r.IntegrationViewOnly,"boolean"==typeof t)&&(n[r.CloudDocProviderIntegration.PAPER_INTEGRATION.toString()]=t?r.IntegrationCreateAndEdit:r.IntegrationViewOnly);return this.cloudDocsRoutes().rpc("team_settings/set",{settings:n},this.selectAdminParams)},e.prototype.setMultipleAccountsPolicy=function(e){return this.teamRoutes().rpc("set_multiple_accounts_policy",{multiple_accounts_enabled:e},{})},e.prototype.setSendForSignaturePolicy=function(e){return this.teamRoutes().rpc("set_send_for_signature_policy",{send_for_signature_enabled:e},{})},e.prototype.setSecondaryEmailsPolicy=function(e){var t=e?{".tag":"enabled"}:{".tag":"disabled"};return this.teamRoutes().rpc("set_secondary_mails_policy",{secondary_mails_policy:t},{})},e.prototype.setClassificationPolicyOld=function(e){var t=e?{".tag":"enabled"}:{".tag":"disabled"};return this.teamRoutes().rpc("classification/set_classification_policy",{classification_policy:t},{})},e.prototype.setClassificationPolicy=function(e){var t=e;return this.teamRoutes().rpc("classification/set_classification_policy",{classification_policy:t},{})},e.prototype.generateClassificationReport=function(){return this.teamRoutes().rpc("classification/generate_report",void 0,{})},e.prototype.setCameraUploadsPolicy=function(e){var t=e?{".tag":"enabled"}:{".tag":"disabled"};return this.teamRoutes().rpc("set_camera_uploads_policy",{camera_uploads_policy:t},{})},e.prototype.setDesktopAppDefaults=function(e){var t=e;return this.teamRoutes().rpc("set_team_default_desktop_pathway",{pathway:t},{})},e.prototype.setFileLockingPolicy=function(e){var t=e?{".tag":"enabled"}:{".tag":"disabled"};return this.teamRoutes().rpc("set_file_locking_policy",{file_locking_policy:t},{})},e.prototype.setSmarterSmartSyncPolicy=function(e){var t=e?{".tag":"enabled"}:{".tag":"disabled"};return this.teamRoutes().rpc("set_smarter_smart_sync_policy",{smarter_smart_sync_policy:t},{})},e.prototype.setComputerBackupPolicy=function(e){var t=e?{".tag":"enabled"}:{".tag":"disabled"};return this.teamRoutes().rpc("set_computer_backup_policy",{computer_backup_policy:t},{})},e.prototype.setExternalDriveBackupPolicy=function(e){var t=e?{".tag":"enabled"}:{".tag":"disabled"};return this.teamRoutes().rpc("set_external_drive_backup_policy",{external_drive_backup_policy:t},{})},e.prototype.updateAppActionSettings=function(e,t){return this.teamRoutes().rpc("app_actions/update_settings",{allow_actions:e,action_state_updates:t.map((function(e){return{id:e.id,is_enabled:!e.isIndividuallyDisabled}}))},{})},e.prototype.updateTeamIntegrationSettings=function(e){var t={},n=e.find((function(e){return"zoom"===e.id}));n&&n.teamSettings&&(t.zoom_team_settings={meeting_recordings_disabled_by_admin:n.teamSettings.zoomMeetingRecordingsDisabledByAdmin});var i=e.find((function(e){return"canvas"===e.id}));i&&i.teamSettings&&(t.canvas_team_settings={canvas_custom_api_domain:i.teamSettings.canvasCustomApiDomain});var r=[],o=e.find((function(e){return"google"===e.id}));return o&&o.teamSettings&&r.push((new d.UserApiV2Client).ns("domain_contacts").rpc("disconnect",{service:s.default.to_api_service_type(s.default.GOOGLE)},{subjectUserId:u.Viewer.get_viewer().work_user.id})),(t.canvas_team_settings||t.zoom_team_settings)&&r.push(this.teamRoutes().rpc("integrations/set_team_integration_settings",t,{})),Promise.all(r)},e.prototype.updateCanvasIntegrationSettings=function(e){return this.teamRoutes().rpc("integrations/set_team_integration_settings",{canvas_team_settings:{canvas_custom_api_domain:e}},{})},e.prototype.updateCommunicationAppSettings=function(e){var t=e.find((function(e){return"google"===e.id}));return t&&((new d.UserApiV2Client).ns("domain_contacts").rpc("set_feature",{service:s.default.to_api_service_type(s.default.GOOGLE),action:{".tag":t.isIndividuallyDisabled?"disable":"enable"}},{subjectUserId:u.Viewer.get_viewer().work_user.id}),t.preventFurtherChanges=!1),this.teamRoutes().rpc("profile_services/set_service_enabled_states",{enabled_state_updates:e.map((function(e){return{service:{".tag":e.id},is_enabled:!e.isIndividuallyDisabled}}))},{})},e.prototype.updateCoordinationAppSettings=function(e){return this.teamRoutes().rpc("profile_services/set_service_enabled_states",{enabled_state_updates:e.map((function(e){return{service:{".tag":e.id},is_enabled:!e.isIndividuallyDisabled}}))},{})},e.prototype.setFileRequestPolicy=function(e){return this.teamRoutes().rpc("sharing/set_file_request_policy",{file_request_enabled:e},{})},e.prototype.setCaptureTranscriptPolicy=function(e){return this.teamRoutes().rpc("ml_platform/set_team_capability_policy",{updated_capability_policies:[{capability:{".tag":"transcription"},product:{".tag":"capture"},opt_policy:{".tag":e?"opt_in":"opt_out"}}]},{})},e.prototype.setEmailIngestPolicy=function(e){return this.emailIngestRoutes().rpc("teams/set_policy",{email_ingest_enabled:e},{})},e.prototype.setOfficeAddInPolicy=function(e){return this.teamRoutes().rpc("set_office_addin_policy",{office_addin_enabled:e},{})},e.prototype.setSharedLinkPolicy=function(e,t){var n={sharing_outside_enabled:e};return e&&(n.default_visibility=t),this.teamRoutes().rpc("sharing/set_shared_link_policy",n,{})},e.prototype.setSharedLinkControlPolicy=function(e,t){var n={days_to_expire_policy:{".tag":e.daysToExpire},change_shared_link_expiration_policy:e.changeSharedLinkExpirationPolicy?{".tag":e.changeSharedLinkExpirationPolicy}:void 0,enforce_shared_link_password_policy:t?{".tag":t}:void 0};return this.teamRoutes().rpc("sharing/set_shared_link_control_policy",n,{})},e.prototype.setSharedFolderSharingPolicy=function(e,t){return t?this.teamRoutes().rpc("sharing/set_shared_folder_sharing_policy",{sharing_outside_enabled:e,external_sharing_policy:{".tag":t}},{}):this.teamRoutes().rpc("sharing/set_shared_folder_sharing_policy",{sharing_outside_enabled:e},{})},e.prototype.setSharedFolderJoiningPolicy=function(e){return this.teamRoutes().rpc("sharing/set_shared_folder_joining_policy",{joining_outside_enabled:e},{})},e.prototype.setFileTransfersPolicy=function(e){return this.fileTransfersRoutes().rpc("teams/set_file_transfers_policy",{file_transfers_enabled:e},{})},e.prototype.setCommentingPolicy=function(e){return this.teamRoutes().rpc("sharing/set_commenting_policy",{commenting_enabled:e},{})},e.prototype.setPasswordStrength=function(e,t){var n="enabled"===e?t:"minimal_requirements";return this.teamRoutes().rpc("set_password_requirements",{password_strength_policy:n},{})},e.prototype.resetAllPasswords=function(){return this.teamRoutes().rpc("reset_all_passwords",void 0,{})},e.prototype.setViewerInfoSetting=function(e){return this.teamRoutes().rpc("set_viewer_info_policy",{viewer_info_policy:e},{})},e.prototype.setPaperPolicy=function(e,t,n,i){var r={paper_enabled:e,paper_deployment_mode:{paper_deployment_type:n,enabled_members_update:{users_to_add:this.make_user_selector_list(i.users_to_add),users_to_remove:this.make_user_selector_list(i.users_to_remove)}}};return t&&(r.dropbox_terms="agree"),this.teamRoutes().rpc("paper/set_paper_policy",r,{})},e.prototype.setPaperSharingPolicy=function(e,t){void 0===e&&(e=!0);var n={external_sharing_allowed:void 0===e||e,default_visibility:t};return this.teamRoutes().rpc("paper/set_paper_sharing_policy",n,{})},e.prototype.setPaperDefaultFolderPolicy=function(e){return this.teamRoutes().rpc("paper/set_paper_default_folder_policy",{default_folder_policy:e},{})},e.prototype.setPaperDesktopPolicy=function(e){return this.teamRoutes().rpc("paper/set_paper_desktop_policy",{enabled:e},{})},e.prototype.schedulePiFSMigration=function(e,t){return this.teamRoutes().rpc("paper/schedule_pifs_migration",{scheduled_migration_timestamp:e,admin_wants_team_members_notified:t},{})},e.prototype.removeScheduledPiFSMigration=function(){return this.teamRoutes().rpc("paper/remove_scheduled_pifs_migration",void 0,{})},e.prototype.setShowcasePolicy=function(e,t,n){var i={showcase_enabled:e,external_sharing_enabled:t,download_enabled:n};return this.teamRoutes().rpc("showcase/set_showcase_policy",i,{})},e.prototype.setRequestMembershipPolicy=function(e){return this.teamRoutes().rpc("set_request_membership_policy",{request_membership:e},{})},e.prototype.setSuggestMembersPolicy=function(e){return this.teamRoutes().rpc("set_suggest_members_policy",{suggest_members_enabled:e},{})},e.prototype.setInviteAcceptanceEmailPolicy=function(e){return this.teamRoutes().rpc("set_invite_acceptance_email_policy",{enable:e},{})},e.prototype.setMembersSendInvitePolicy=function(e,t,n,i){var r={member_send_invite_policy:e,can_send_invite_member_list_changes:{users_to_add:t.users_to_add.map(p),users_to_remove:t.users_to_remove.map(p)},source:n,domain_restriction_enabled:i};return this.teamRoutes().rpc("set_member_send_invite_policy",r,{})},e.prototype.setWatermarkingPolicy=function(e){return this.teamRoutes().rpc("workflows/set_watermarking_policy",{watermarking_policy:{".tag":e?"on":"off"}},{})},e.prototype.deviceManagementGetExcludedUsers=function(){return this.teamRoutes().rpc("device_management/get_excluded_users",void 0,{})},e.prototype.deviceManagementConfigureSettings=function(e){return this.teamRoutes().rpc("device_management/configure_settings",e,{})},e.mapValueToRolloutMethod=function(e){return 0===e?"unlink_all":1===e?"unlink_most_inactive":"add_member_to_exceptions"},e.prototype.deviceManagementConfigureSettingsForAcf=function(t,n,i,r,s){var o={is_enabled:!0,can_user_remove_device:n,rollout_method:{".tag":e.mapValueToRolloutMethod(s)},users_to_add:t.users_to_add,users_to_remove:t.users_to_remove,desktop_devices_limit:-1===i?{".tag":"unlimited"}:{limited:Number(i),".tag":"limited"},mobile_devices_limit:-1===r?{".tag":"unlimited"}:{limited:Number(r),".tag":"limited"}};return this.teamRoutes().rpc("device_management/configure_settings",o,{})},e.prototype.deviceManagementConfigureSettingsDisable=function(){return this.teamRoutes().rpc("device_management/configure_settings",{is_enabled:!1},{})},e.prototype.deviceManagementRemoveDevice=function(e,t,n){return this.teamRoutes().rpc("device_management/remove_device",{user_id:e,device_id:t,delete_data:n},{})},e.prototype.deviceManagementRemoveClient=function(e,t,n,i){return this.teamRoutes().rpc("device_management/remove_client",{user_id:e,device_id:t,client_unique_identifier:n,delete_data:i},{})},e.prototype.webSessionManagementConfigureSettings=function(e,t,n){return this.teamRoutes().rpc("web_session_management/configure_settings",{remember_session_expires:e,idle_session_timeout:t,number_of_allowed_sessions:n},{})},e.prototype.teamFolderArchive=function(e,t){return void 0===t&&(t=!1),this.teamRoutes().rpc("team_folder/archive",{team_folder_id:String(e),force_async_off:!t},{})},e.prototype.teamFolderUnarchive=function(e){return this.teamRoutes().rpc("team_folder/activate",{team_folder_id:String(e)},{})},e.prototype.teamFolderCreate=function(e,t){var n={name:e};return void 0!==t&&(n.sync_setting=t?{".tag":"default"}:{".tag":"not_synced"}),this.teamRoutes().rpc("team_folder/create",n,{})},e.prototype.teamFolderUpdateSyncSetting=function(e){var t=e.teamFolderId,n=e.syncSetting,i=e.fileIds,r={team_folder_id:t},s={".tag":n};return i?r.content_sync_settings=i.map((function(e){return{id:e,sync_setting:s}})):r.sync_setting=s,this.teamRoutes().rpc("team_folder/update_sync_settings",r,{})},e.prototype.teamFoldersList=function(e){return void 0===e&&(e=1e3),this.teamRoutes().rpc("team_folder/list",{limit:e},{})},e.prototype.teamFoldersListContinue=function(e){return this.teamRoutes().rpc("team_folder/list/continue",{cursor:e},{})},e.prototype.teamNamespacesList=function(){return this.teamRoutes().rpc("namespaces/list",{filter:{".tag":"eligible_for_cm_top_level_page"}},{})},e.prototype.teamNamespacesListContinue=function(e){return this.teamRoutes().rpc("namespaces/list/continue",{cursor:e,filter:{".tag":"eligible_for_cm_top_level_page"}},{})},e.prototype.teamFolderRename=function(e,t){return this.teamRoutes().rpc("team_folder/rename",{team_folder_id:String(e),name:t},{})},e.prototype.teamFolderPermanentlyDelete=function(e){return this.teamRoutes().rpc("team_folder/permanently_delete",{team_folder_id:String(e)},{})},e.prototype.teamIntegrationSettings=function(){return this.teamRoutes().rpc("integrations/get_team_integration_settings",void 0,{})},e.prototype.setGroupsCreationPolicy=function(e){return this.teamRoutes().rpc("groups/set_creation_policy",{group_creation:e},{})},e.prototype.setNTSBlockTrafficPolicy=function(e){return this.teamRoutes().rpc("nts/set_block_traffic_policy",{block_traffic_enabled:e},{})},e.prototype.setSyncPolicy=function(e,t){return void 0===t&&(t=void 0),this.teamRoutes().rpc("set_infinite_policy",{setting:e,admin_sync_defaults_enabled:t},{})},e.prototype.configureSsoAndGoogleLoginPolicy=function(e,t,n,i,r,s){return this.teamRoutes().rpc("configure_sso_and_google_login_policy",{sso_policy:e,sign_in_url:t,sign_out_url:n,saml_cert:i,saml_nameid_format:r,google_login_enabled:s},{})},e.prototype.configureSso=function(e,t,n,i,r){return this.teamRoutes().rpc("configure_sso",{sso_policy:e,saml_cert:t,sign_in_url:n,sign_out_url:i,nameid_format:r},{})},e.prototype.configureDirectoryRestrictions=function(e){var t={users_to_add:e.users_to_add,users_to_remove:e.users_to_remove};return this.teamRoutes().rpc("directory_restrictions/configure_settings",t,{})},e.prototype.configureGoogleLoginPolicy=function(e){return this.teamRoutes().rpc("configure_google_login_policy",{google_login_enabled:e},{})},e.prototype.setResellerSupportSetting=function(e){return this.teamRoutes().rpc("change_reseller_support",{reseller_support_enabled:e},{})},e.prototype.setTeamBrandingPolicy=function(e){return this.teamRoutes().rpc("set_team_branding_policy",{team_branding_policy:{".tag":e?"enabled":"disabled"}},{})},e.prototype.folderCreate=function(e,t,n){"/"!==t&&(t+="/");var i="ns:"+e+t+n;return this.filesRoutes().rpc("create_folder",{path:i},this.selectAdminParams)},e.prototype.bulkFileDelete=function(e){for(var t=[],n=null,i=0,r=e.length;i<r;i++)n=e[i],t.push({path:"ns:"+n.ns_id+n.ns_path});return this.filesRoutes().rpc("delete_batch_with_changeset_sync",{entries:t},this.selectAdminParams)},e.prototype.fileRename=function(e,t,n){var i="ns:"+e+t,r="ns:"+e+(t.substring(0,t.lastIndexOf("/"))+"/"+n);return this.filesRoutes().rpc("move",{from_path:i,to_path:r,autorename:!0},this.selectAdminParams)},e.prototype.userUiInfo=function(e){return this.usersRoutes().rpc("get_user_ui_info",{user_id:e},{})},e.prototype.shareFolder=function(e,t,i,r){void 0===i&&(i=null),void 0===r&&(r=!1);var s="ns:"+e+t,o=n.__assign(n.__assign({},l.combinedPolicyDiffToApi(i)),{confidentiality:r?"confidential":"not_confidential",path:s});return this.sharingRoutes().rpc("alpha/share_folder",o,this.selectAdminParams)},e.prototype.validateFolderPath=function(e,t,n,i){var r="ns:"+e+t;return this.sharingRoutes().rpc("validate_folder_path",{path:r,actions:n,list_members_arg:i},this.selectAdminParams)},e.prototype.restoreFile=function(e,t,n){var i="ns:"+e+t;return this.filesRoutes().rpc("restore",{path:i,rev:n},this.selectAdminParams)},e.prototype.restorePaths=function(e){for(var t,n=[],i=0,r=e;i<r.length;i++){var s=r[i];t="ns:"+s.ns_id+s.ns_path,n.push(t)}return this.filesRoutes().rpc("restore_path_batch_sync",{entries:n},this.selectAdminParams)},e.prototype.permanentDeleteFile=function(e,t){var n="ns:"+e+t;return this.filesRoutes().rpc("permanently_delete",{path:n},this.selectAdminParams)},e.prototype.listRevisions=function(e,t){var n="ns:"+e+t;return this.filesRoutes().rpc("list_revisions",{path:n},this.selectAdminParams)},e.prototype.setTSDWritePolicy=function(e){return this.teamRoutes().rpc("team_folder/set_tsd_writable_setting",{is_writable:e},{})},e.prototype.setInfinitePolicy=function(e){return this.teamRoutes().rpc("set_infinite_policy",{setting:e},{})},e.prototype.setSmartSyncDesktopPolicy=function(e){return this.teamRoutes().rpc("set_smart_sync_desktop_policy",{setting:e},{})},e.prototype.getTeamFolderNsPathForFile=function(e){return this.isCMForCDM?e.fq_path:"/"+e.fq_path.split("/").slice(2).join("/")},e.prototype.bulkFileMove=function(e,t,n,i,r){void 0===r&&(r=null);for(var s,o,l=[],u=0,c=n;u<c.length;u++){var d=c[u];o=this.getTeamFolderNsPathForFile(d),s=a.filename(d.fq_path),l.push({from_path:"ns:"+e+o,to_path:"ns:"+t+i+"/"+s})}return this.filesRoutes().rpc("move_batch_sync",{entries:l,autorename:!0,fsw_request:r},this.selectAdminParams)},e.prototype.bulkFileCopy=function(e,t,n,i,r){void 0===r&&(r=null);for(var s,o,l=[],u=0,c=n;u<c.length;u++){var d=c[u];o=this.getTeamFolderNsPathForFile(d),s=a.filename(d.fq_path),l.push({from_path:"ns:"+e+o,to_path:"ns:"+t+i+"/"+s})}return this.filesRoutes().rpc("copy_batch_sync",{entries:l,autorename:!0,allow_shared_folder:!0,fsw_request:r},this.selectAdminParams)},e.prototype.setMemberSpaceLimits=function(e){return this.teamRoutes().rpc("member_space_limits/set_default_limit",{limit_level:e},{})},e.prototype.setMslCapsType=function(e){return this.teamRoutes().rpc("member_space_limits/set_caps_type",{caps_type:e},{})},e.prototype.setCustomQuota=function(e,t){return this.teamRoutes().rpc("member_space_limits/set_custom_quota",{users_and_quotas:[{user:this._create_user_selector_json(e),quota_gb:t}]},{})},e.prototype.removeCustomQuota=function(e){return this.teamRoutes().rpc("member_space_limits/remove_custom_quota",{users:[this._create_user_selector_json(e)]},{})},e.prototype._create_user_selector_json=function(e){return{".tag":"email",email:e}},e.prototype.make_user_selector_list=function(e){return void 0===e&&(e=[]),e.map(this._create_user_selector_json)},e.prototype.memberSpaceLimitsUpdateExclusionList=function(e){var t=this.make_user_selector_list(e.users_to_add),n=this.make_user_selector_list(e.users_to_remove);return this.teamRoutes().rpc("member_space_limits/update_excluded_users",{users_to_add:t,users_to_remove:n},{})},e.prototype.getUserInfos=function(e){return this.usersRoutes().rpc("get_account_batch",{account_ids:e},this.selectAdminParams)},e.prototype.emmConfigureSettings=function(e,t){var n={users_to_add:this.make_user_selector_list(t.users_to_add),users_to_remove:this.make_user_selector_list(t.users_to_remove)};return this.teamRoutes().rpc("emm/configure_settings",{emm_policy:{".tag":e},exclusion_list:n},{})},e.prototype.twofaConfigureSettings=function(e,t){var n={users_to_add:this.make_user_selector_list(t.users_to_add),users_to_remove:this.make_user_selector_list(t.users_to_remove)};return this.teamRoutes().rpc("two_step_verification/configure_settings",{tfa_policy:{".tag":e},exclusion_list:n},{})},e.prototype.twofaSendReminders=function(){return this.teamRoutes().rpc("two_step_verification/send_a_reminder",void 0,{})},e.prototype.sharingWhitelistConfigureSettings=function(e){var t={subjects_to_add:e.subjects_to_add,subjects_to_remove:e.subjects_to_remove};return this.teamRoutes().rpc("sharing_whitelist/update",t,{})},e.prototype.emmRefreshToken=function(){return this.teamRoutes().rpc("emm/refresh_token",void 0,{})},e.prototype.emmGenerateUsageReport=function(){return this.teamRoutes().rpc("emm/generate_report",{report_type:{".tag":"mobile_app_usage"}},{})},e.prototype.teamContentGetMetadata=function(e){return this.teamRoutes().rpc("team_content/get_metadata",e,{})},e.prototype.createLegalHoldPolicy=function(e){return this.teamRoutes().rpc("legal_holds/create",e,{})},e.prototype.updateLegalHoldPolicy=function(e){return this.teamRoutes().rpc("legal_holds/update",e,{})},e.prototype.legalHoldCreateExport=function(e){return this.teamRoutes().rpc("legal_holds/export_v2",e,{})},e.prototype.releaseLegalHoldPolicy=function(e){return this.teamRoutes().rpc("legal_holds/release",e,{})},e.prototype.getLegalHoldPolicy=function(e){return this.teamRoutes().rpc("legal_holds/get",e,{})},e.prototype.listLegalHoldPolicies=function(){return this.teamRoutes().rpc("legal_holds/list",void 0,{})},e.prototype.listLegalHoldExports=function(e){return this.teamRoutes().rpc("legal_holds/list_exports",e,{})},e.prototype.cancelLegalHoldExport=function(e){var t=e.legalHoldId,n=e.exportId;return this.teamRoutes().rpc("legal_holds/export/update",{legal_hold_id:t,export_id:n,status:{".tag":"canceled"}},{})},e.prototype.removeLegalHoldExport=function(e){var t=e.legalHoldId,n=e.exportId;return this.teamRoutes().rpc("legal_holds/export/update",{legal_hold_id:t,export_id:n,status:{".tag":"removed"}},{})},e.prototype.getExportDownloadsMetadata=function(e){var t=e.legalHoldId,n=e.exportId;return this.teamRoutes().rpc("legal_holds/export/downloads/metadata",{id:t,export_id:n},{})},e.prototype.sendExportDownloadsLogging=function(e){return this.teamRoutes().rpc("legal_holds/export/downloads/logging",e,{})},e.prototype.sendLegaLHoldExportDownloadsUrl=function(e){return this.teamRoutes().rpc("legal_holds/export/downloads/url",e,{})},e.prototype.sendPoliciesExportDownloadsLogging=function(e){return this.teamRoutes().rpc("policies/export_downloads_logging",e,{})},e.prototype.getLegalHoldInfoz=function(e){return this.teamRoutes().rpc("legal_holds/infoz",e,{})},e.prototype.createRetentionPolicy=function(e){return this.teamRoutes().rpc("policies/retention_policy/create",e,{})},e.prototype.modifyRetentionPolicy=function(e){return this.teamRoutes().rpc("policies/retention_policy/modify",e,{})},e.prototype.getPolicy=function(e){return this.teamRoutes().rpc("policies/get",e,{})},e.prototype.deletePolicy=function(e){return this.teamRoutes().rpc("policies/delete",e,{})},e.prototype.createExport=function(e){return this.teamRoutes().rpc("policies/export",e,{})},e.prototype.hasExistingPolicy=function(e){return this.teamRoutes().rpc("policies/has_existing_policy",e,{})},e.prototype.createDispositionPolicy=function(e){return this.teamRoutes().rpc("policies/disposition_policy/create",e,{})},e.prototype.modifyDispositionPolicy=function(e){return this.teamRoutes().rpc("policies/disposition_policy/modify",e,{})},e.prototype.listPolicies=function(e){return this.teamRoutes().rpc("policies/list",e,{})},e.prototype.removeOrCancelExport=function(e){return this.teamRoutes().rpc("policies/remove_export",e,{})},e.prototype.listExports=function(e){return this.teamRoutes().rpc("policies/list_exports",e,{})},e.prototype.getPoliciesExportDownloadMetadata=function(e){return this.teamRoutes().rpc("policies/export_downloads_metadata",e,{})},e.prototype.foldersSearch=function(e){return this.teamRoutes().rpc("policies/folders_search",e,{})},e.prototype.runPoliciesProjectorScript=function(){return this.teamRoutes().rpc("policies/run_projector_script",void 0,{})},e.prototype.validateMemberImportCsv=function(e){return this.teamRoutes().rpc("members/validate_import_csv",{csv_file_content:e},{})},e.prototype.checkImportMembersCsvValidationJobStatus=function(e){return this.teamRoutes().rpc("members/validate_import_csv/job_status/check",{async_job_id:e},{})},e.prototype.checkImportMembersJobStatus=function(e){return this.teamRoutes().rpc("members/import_from_csv/job_status/check",{async_job_id:e},{})},e.prototype.importMembersFromCsv=function(e,t){var i={csv_file_content:e};return t&&(i=n.__assign(n.__assign({},i),t)),this.teamRoutes().rpc("members/import_from_csv",i,{})},e.prototype.changeAALOnDomain=function(e,t){return this.domainRoutes().rpc("change_aal_configuration",{domain_name:e,is_enabled:t},{})},e.prototype.unlockUser=function(e){return this.teamRoutes().rpc("members/unlock",{account_id:e},{})},e.prototype.validateInviteeEmails=function(e){return this.teamRoutes().rpc("validate_invitee_emails",e,{})},e.prototype.classificationFeedbackGetFileInfo=function(e){return this.teamRoutes().rpc("classification_feedback/get_file_info",e,{})},e.prototype.classificationFeedbackSubmit=function(e){return this.teamRoutes().rpc("classification_feedback/submit",e,{})},e.prototype.inviteAfterSharingMarkSeeingReceivers=function(e){return this.teamRoutes().rpc("invite_after_sharing/mark_seeing_receivers",e,{})},e.prototype.inviteAfterSharingGetReceiverInfoBatch=function(e){return this.teamRoutes().rpc("invite_after_sharing/get_receiver_info_batch",e,{})},e.prototype.getAtfTaskStatus=function(e){return this.teamRoutes().rpc("get_atf_task_status",{task_gid:e},{})},e})();t.AdminConsoleApiClient=h,t.default=h})),define("modules/clean/teams/admin/widgets/settings_content_management/constants/constants",["require","exports","modules/core/i18n","modules/clean/teams/admin/widgets/settings_content_management/constants/constants_util"],(function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContentAdministrationPolicyValue=t.AdminInfos=t.Breadcrumbs=t.ContentManagementSettingsWarning=t.ContentManagementSettingsItem=t.View=void 0,t.View={viewName:n.intl.formatMessage({id:"1UW9bf",defaultMessage:"Content Management"})},t.ContentManagementSettingsItem={title:n.intl.formatMessage({id:"fBoVqZ",defaultMessage:"Content management"}),description:i.ContentManagementSettingsDescription,isDescriptionReactFormat:!0},t.ContentManagementSettingsWarning={check:n.intl.formatMessage({id:"V8LEQk",defaultMessage:"They'll be able to do things like access, manage, or delete any team folder."}),uncheck:n.intl.formatMessage({id:"NDGMY8",defaultMessage:"They'll no longer be able to do things like manage, delete, or automatically access team folders."})},t.Breadcrumbs=[{name:n.intl.formatMessage({id:"P/IvMW",defaultMessage:"Settings"}),url:"/team/admin/settings"},{name:n.intl.formatMessage({id:"BRMB6V",defaultMessage:"Content management"})}],t.AdminInfos=[{adminType:"teamAdmin",label:n.intl.formatMessage({id:"8OW3yL",defaultMessage:"Team admins"}),disabled:!0,value:0,hasPermission:!0},{adminType:"userManagementAdmin",label:n.intl.formatMessage({id:"rgYQhy",defaultMessage:"User management admins"}),disabled:!1,value:1},{adminType:"supportAdmin",label:n.intl.formatMessage({id:"YETueY",defaultMessage:"Support admins"}),disabled:!1,value:2}],t.ContentAdministrationPolicyValue=["default","user_management_admin_only","support_admin_only","both_admins"]})),define("modules/clean/teams/admin/widgets/settings_content_management/constants/constants_util",["require","exports","tslib","modules/core/i18n","react"],(function(e,t,n,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContentManagementSettingsDescription=void 0,r=n.__importDefault(r),t.ContentManagementSettingsDescription=i.intl.formatMessage({id:"TYc4E/",defaultMessage:"Choose which admin roles can access the <a>Content</a> page to manage your teamâ€™s content. <b>More about admin roles</b>"},{a:function(e){return r.default.createElement("a",{"aria-label":"content",href:"/team/admin/content?role=work",target:"_blank",rel:"noopener noreferrer"},e)},b:function(e){return r.default.createElement("a",{"aria-label":"admin roles",href:"https://help.dropbox.com/teams-admins/admin/change-admin-rights",target:"_blank",rel:"noopener noreferrer"},e)}})})),define("modules/clean/tokenizer",["require","exports","tslib","classnames","create-react-class","react","react-dom","prop-types","lodash","jquery","ts-keycode-enum","modules/clean/typeahead"],(function(e,t,n,i,r,s,o,a,l,u,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tokenizer=t.Token=void 0,i=n.__importDefault(i),r=n.__importDefault(r),s=n.__importDefault(s),o=n.__importStar(o),a=n.__importDefault(a),l=n.__importStar(l),u=n.__importDefault(u);var p=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._makeCloseButton=function(){return t.props.onRemove?s.default.createElement("span",{className:"tokenizer-token-close",onClick:function(){return t.props.onRemove(),!1},dangerouslySetInnerHTML:{__html:"&nbsp;"}}):""},t}return n.__extends(t,e),t.prototype.render=function(){var e={"tokenizer-token":!0};return e[this.props.className]=!0,s.default.createElement("a",n.__assign({tabIndex:-1},this.props,{className:i.default(e)}),String(this.props.data),this._makeCloseButton())},t.displayName="Token",t.propTypes={className:a.default.string,data:a.default.any,onRemove:a.default.func},t})(s.default.Component);t.Token=p;var h=r.default({displayName:"Tokenizer",propTypes:{customClass:a.default.string,dataSource:a.default.object.isRequired,initialInputText:a.default.string,logSearchBegin:a.default.func,logSearchComplete:a.default.func,logTokenChangeEvent:a.default.func,onContentsChange:a.default.func,onTokensAdd:a.default.func,onTokenRemove:a.default.func,placeholderText:a.default.string,populatedTokenData:a.default.array,renderToken:a.default.func.isRequired,renderTokenHover:a.default.func,renderInput:a.default.func.isRequired,renderSelector:a.default.func.isRequired,stringTokenizer:a.default.func.isRequired,tokenSpacing:a.default.number,focusOnMount:a.default.bool,tabIndex:a.default.number,disableAdditionalInput:a.default.bool,disabled:a.default.bool,resetTokenData:a.default.bool,tokenizeOnOutOfFocus:a.default.bool,postSelect:a.default.func,validatedTokenMap:a.default.object},getDefaultProps:function(){return{initialInputText:"",renderInput:function(){return s.default.createElement("input",null)},renderSelector:function(){return s.default.createElement(d.TypeaheadSelector,null)},renderToken:function(e){return s.default.createElement(p,{data:e})},stringTokenizer:function(e,t){var n=e.split(","),i=t?"":n.pop();return{tokens:n,value:i}},tokenSpacing:3,focusOnMount:!1,logSearchBegin:null,logSearchComplete:null,disableAdditionalInput:!1,disabled:!1,resetTokenData:!1,tokenizeOnOutOfFocus:!1}},getInitialState:function(){return this.tokenData=[],this.queryResults=null,{queryResults:this.queryResults,tokenData:this.tokenData,selectedTokenIndex:null,inputWidth:150,numLines:1}},componentDidMount:function(){var e=this;if(setTimeout(this._resizeTokenizerInput,0),o.findDOMNode(this.refs.input).value=this.props.initialInputText,u.default(o.findDOMNode(this.refs.tokenizer_input)).on("keydown",this._proxyKeys),this.tokenizeOnOutOfFocus&&u.default(o.findDOMNode(this.refs.tokenizer_input)).on("focusout",this._tokenizeIfHasInput),document.addEventListener("click",this._handleDocumentClick,!1),this.props.focusOnMount&&setTimeout((function(){var t=o.findDOMNode(e.refs.input);t&&t.focus()})),"function"==typeof this.props.dataSource.registerForUpdates&&this.props.dataSource.registerForUpdates(this._dataUpdatedCallback),this.props.populatedTokenData&&this.props.populatedTokenData.length)return this._addTokens(this.props.populatedTokenData,!1,null)},componentWillUnmount:function(){return u.default(o.findDOMNode(this.refs.tokenizer_input)).off("keydown",this._proxyKeys),document.removeEventListener("click",this._handleDocumentClick,!1)},componentDidUpdate:function(e,t){var n=this.props,i=n.populatedTokenData;return n.resetTokenData&&!e.resetTokenData&&0!==this.tokenData.length&&this.removeTokens(this.tokenData),(null!=i?i.length:void 0)!==(null!=e.populatedTokenData?e.populatedTokenData.length:void 0)&&(i.length>e.populatedTokenData.length?this._addTokens(i,!1,null):i.length<e.populatedTokenData.length&&(this.removeTokens(this.tokenData),this._addTokens(i))),this._resizeTokenizerInput()},componentWillReceiveProps:function(e){var t,n=this;if(e.validatedTokenMap&&this.props.validatedTokenMap!==e.validatedTokenMap&&this.tokenData){var i=e.validatedTokenMap;this.tokenData.forEach((function(e,t){if(e&&"function"==typeof e.getKey&&i.has(e.getKey())){var r=i.get(e.getKey()),s=n.tokenData.slice(0,t).concat([r]).concat(n.tokenData.slice(t+1));n.tokenData=s}})),this.setState({tokenData:this.tokenData}),"function"==typeof this.props.onContentsChange&&this.props.onContentsChange(this.tokenData,null===(t=o.findDOMNode(this.refs.input))||void 0===t?void 0:t.value)}},render:function(){var e={"react-tokenizer":!0};null!=this.props.customClass&&(e[this.props.customClass]=null!=this.props.customClass);var t={padding:this.props.tokenSpacing,paddingRight:0,maxHeight:this.props.tokenSpacing+3*(this.props.tokenSpacing+29)+14+2},n=i.default({"tokenizer-input":!0,"tokenizer-input-disabled":this.props.disabled,"tokenizer-input-additionalInputDisabled":this.props.disableAdditionalInput});return this.state.numLines>3&&(t.overflowY="auto",t.overflowX="visible"),s.default.createElement("div",{onClick:this._handleMyClick,className:i.default(e)},s.default.createElement("div",{className:n,ref:"tokenizer_input",style:t},s.default.createElement("div",{className:"token-container",style:{marginLeft:-this.props.tokenSpacing,marginBottom:-this.props.tokenSpacing}},this._renderTokens(),this._renderInput())),this._renderSelector())},getInputValue:function(){return o.findDOMNode(this.refs.input).value},serializeInputData:function(){return{tokens:this.tokenData,value:this.getInputValue()}},tokenizeAll:function(){var e=o.findDOMNode(this.refs.input),t=this.props.stringTokenizer(e.value,!0).tokens;return t.length>0&&this._addTokens(t,!1),e.value="",this.refs.selector.close()},addExternalTokens:function(e){this._addTokens(e,!1,null),this.refs.selector.close()},_getCurrentValue:function(){var e=o.findDOMNode(this.refs.input);return this.props.stringTokenizer(e.value).value},queryDataSource:function(e){var t=this,n=function(n){var i;e||(n=null);var r=function(e){return("function"==typeof e.getKey?e.getKey():void 0)||String(e)},s=l.map(t.tokenData,r);return n=null!=n?n.filter((function(e){return i=r(e),!Array.from(s).includes(i)})):null};return this.props.dataSource.query(e,(function(i){return i=n(i),t.queryResults=i,t.setState({queryResults:t.queryResults}),"function"==typeof t.props.logSearchComplete?t.props.logSearchComplete(e,(null!=i?i.length:void 0)||0,!0):void 0}),(function(i){return e===t._getCurrentValue()&&(i=n(i))&&i.length&&(t.queryResults=t.queryResults?t.queryResults.concat(i):i,t.setState({queryResults:t.queryResults})),"function"==typeof t.props.logSearchComplete?t.props.logSearchComplete(e,(null!=i?i.length:void 0)||0,!1):void 0}))},_dataUpdatedCallback:function(){if(this.isMounted()){var e=Boolean(this.state.queryResults);return t=this.refs.selector,n="reset",i=function(e){return e.reset()},null!=t&&"function"==typeof t[n]&&i(t,n),e&&o.findDOMNode(this.refs.input).focus(),this.queryDataSource(this.getInputValue())}var t,n,i},_addTokens:function(e,t,n){var i,r=this;void 0===t&&(t=!1),void 0===n&&(n=null);for(var s=function(e){return("function"==typeof e.getKey?e.getKey():void 0)||String(e)},a=l.map(this.tokenData,s),u=[],c=0,d=Array.from(e);c<d.length;c++){var p=d[c],h=s(p);Array.from(a).includes(h)||(u.push(p),a.push(h))}this.tokenData=this.tokenData.concat(u),this.setState({tokenData:this.tokenData}),"function"==typeof this.props.onTokensAdd&&this.props.onTokensAdd(u,this),"function"==typeof this.props.onContentsChange&&this.props.onContentsChange(this.tokenData,null===(i=o.findDOMNode(this.refs.input))||void 0===i?void 0:i.value);var _=t?{search_expr:n,selected_pos:(null!=this.refs.selector?this.refs.selector.state.selectionIndex:void 0)||0,num_query_results:null!=this.state.queryResults?this.state.queryResults.length:void 0,did_select_suggestion:!0}:{did_select_suggestion:!1};return(function(){for(var e=[],t=0,n=Array.from(u);t<n.length;t++){var i=n[t];e.push("function"==typeof r.props.logTokenChangeEvent?r.props.logTokenChangeEvent(i,!1,_):void 0)}return e})()},_addToken:function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=null),this._addTokens([e],t,n)},removeTokens:function(e){for(var t=this.state.selectedTokenIndex,n=[],i=0,r=Array.from(e);i<r.length;i++){var s=r[i],a=this.tokenData.indexOf(s);-1!==a&&(t===a?t=null:t>a&&(t-=1),this.tokenData.splice(a,1),n.push(s))}var l=o.findDOMNode(this.refs.input);l.focus(),this._setSelectedToken(t),this.queryResults=null,this.setState({tokenData:this.tokenData,queryResults:this.queryResults});for(var u=0,c=Array.from(n);u<c.length;u++){s=c[u];"function"==typeof this.props.onTokenRemove&&this.props.onTokenRemove(s)}for(var d=0,p=Array.from(n);d<p.length;d++){s=p[d];"function"==typeof this.props.logTokenChangeEvent&&this.props.logTokenChangeEvent(s,!0)}return"function"==typeof this.props.onContentsChange?this.props.onContentsChange(this.tokenData,l.value):void 0},removeToken:function(e){return this.removeTokens([e])},replaceTokens:function(e){var t,n=function(e){return("function"==typeof e.getKey?e.getKey():void 0)||String(e)};if(e.length!==this.tokenData.length||!l.every(l.zip(this.tokenData,e),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Array.from(e[0]),r=i[0],s=i[1];return n(r)===n(s)})))return this.tokenData=e,this.setState({tokenData:e}),"function"==typeof this.props.onContentsChange?this.props.onContentsChange(this.tokenData,null===(t=o.findDOMNode(this.refs.input))||void 0===t?void 0:t.value):void 0},_renderTokens:function(){for(var e=[],t=function(e){return("function"==typeof e.getKey?e.getKey():void 0)||String(e)},n=0;n<this.state.tokenData.length;n++){var r=this.state.tokenData[n],o=this.props.renderToken(r),a=this.state.selectedTokenIndex===n,l="function"==typeof this.props.renderTokenHover?this.props.renderTokenHover(r):void 0,u=[{selected:a,"c-title-bubble":null!=l,"c-title-bubble--s":null!=l}];e.push(s.default.cloneElement(o,{ref:"token"+n,key:"token"+t(r),style:{margin:"0 0 "+this.props.tokenSpacing+"px "+this.props.tokenSpacing+"px"},className:i.default(u,o.props.className),"data-title":l,onClick:this._setSelectedToken.bind(this,n),onRemove:this.removeToken.bind(this,r),tokenSpacing:this.props.tokenSpacing}))}return e},_renderSelector:function(){return s.default.cloneElement(this.props.renderSelector(),{ref:"selector",queryOptions:this.state.queryResults,onSelect:this._onSelect,onClose:this._clearResults})},_renderInput:function(){var e=this.state.tokenData.length?"":this.props.placeholderText;return s.default.cloneElement(this.props.renderInput(),{ref:"input",style:{width:this.state.inputWidth,marginLeft:this.props.tokenSpacing,marginBottom:this.props.tokenSpacing},onChange:this._textUpdated,placeholder:e,tabIndex:this.props.tabIndex,onClick:this._setSelectedToken.bind(this,null),disabled:this.props.disabled||this.props.disableAdditionalInput})},_getTokenizerInput:function(){return this.refs.tokenizer_input},_getTokenComponents:function(){var e=this;return(function(e,t,n){for(var i=[],r=e<t,s=n?r?t+1:t-1:t,o=e;r?o<s:o>s;r?o++:o--)i.push(o);return i})(0,this.state.tokenData.length,!1).map((function(t){return e.refs["token"+t]})).filter((function(e){return e}))},_setSelectedToken:function(e){return null!=e?(o.findDOMNode(this.refs["token"+e]).focus(),this.refs.selector.close()):o.findDOMNode(this.refs.input).focus(),this.setState({selectedTokenIndex:e})},_resizeTokenizerInput:function(){var e=function(e){var t;return null===(t=o.findDOMNode(e))||void 0===t?void 0:t.clientWidth},t=e(this._getTokenizerInput());if(null!=t){for(var n=this.props.tokenSpacing+2,i=this.props.tokenSpacing,r=0,s=this._getTokenComponents(),a=1,l=0,u=Array.from(s);l<u.length;l++){var c=e(u[l])+n;r+c+i>t&&(a+=1,r=0),r+=c}var d=t-r-i-2;return d<80&&(a+=1,d=t-i),d!==this.state.inputWidth&&this.setState({inputWidth:d}),a!==this.state.numLines?this.setState({numLines:a}):void 0}},_onSelect:function(e){var t=o.findDOMNode(this.refs.input);return t.focus(),this._addToken(e,!0,t.value),t.value="",this.queryResults=null,"function"==typeof this.props.postSelect&&this.props.postSelect(e),this.setState({queryResults:this.queryResults})},_handleMyClick:function(e){return"function"==typeof e.nativeEvent.stopImmediatePropagation?e.nativeEvent.stopImmediatePropagation():void 0},_handleDocumentClick:function(e){return this.refs.selector.close()},_proxyKeys:function(e){if(e.keyCode===c.Key.Backspace&&""===this._getCurrentValue()&&e.preventDefault(),this._shouldListenForTokenNavigation()){var t=this.state.selectedTokenIndex;switch(e.keyCode){case c.Key.Backspace:return void(null===t?(this._setSelectedToken(this.state.tokenData.length-1),o.findDOMNode(this.refs.input).focus()):this.removeToken(this.state.tokenData[t]));case c.Key.LeftArrow:return void(null===t?this._setSelectedToken(this.state.tokenData.length-1):t>0&&this._setSelectedToken(t-1));case c.Key.RightArrow:if(null!==t)return void(t>=this.state.tokenData.length-1?this._setSelectedToken(null):this._setSelectedToken(t+1));break;case c.Key.Delete:if(null!==t)return void this.removeToken(this.state.tokenData[t])}}this.refs.selector.onKeyDown(e),e.isDefaultPrevented()||e.keyCode===c.Key.Tab&&""!==this.getInputValue()&&this.tokenizeAll()},_tokenizeIfHasInput:function(e){if(""!==this.getInputValue())return this.tokenizeAll(),e.preventDefault()},_shouldListenForTokenNavigation:function(){if(!this.state.tokenData.length)return!1;var e=o.findDOMNode(this.refs.input);return 0===e.selectionStart&&0===e.selectionEnd},_textUpdated:function(e){var t=o.findDOMNode(this.refs.input),n=e.target.value,i=this.props.stringTokenizer(n),r=i.tokens,s=i.value;return"function"==typeof this.props.logSearchBegin&&this.props.logSearchBegin(s),s!==n&&(t.value=s,s||this.refs.selector.close()),r.length>0?this._addTokens(r,!1):"function"==typeof this.props.onContentsChange&&this.props.onContentsChange(this.tokenData,s),this.queryDataSource(s)},_clearResults:function(){return this.queryResults=null,this.setState({queryResults:this.queryResults})}});t.Tokenizer=h})),define("modules/clean/typeahead",["require","exports","tslib","classnames","create-react-class","react","react-dom","prop-types","lodash","modules/clean/fuzzy","ts-keycode-enum"],(function(e,t,n,i,r,s,o,a,l,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeaheadSelectorMixin=t.TypeaheadSelector=t.DataSource=t.Autocomplete=void 0,i=n.__importDefault(i),r=n.__importDefault(r),s=n.__importDefault(s),o=n.__importStar(o),a=n.__importDefault(a),l=n.__importStar(l),u=n.__importDefault(u);var d=(function(){function e(e){var t=(void 0===e?{}:e).local;this.local=t}return e.prototype.filterAndSort=function(e){return u.default.filter(e,this.local)},e.prototype.query=function(e,t){return t(l.map(this.filterAndSort(e),(function(e){return e.original})))},e})();t.DataSource=d;var p={getInitialState:function(){return{selectionIndex:0}},getOptions:function(){if(!this.props.queryOptions)return[];var e=this.props.maxVisible||this.props.queryOptions.length;return this.props.queryOptions.slice(0,e)},renderOptions:function(){for(var e=[],t=this.getOptions(),n=function(e){return("function"==typeof e.getKey?e.getKey():void 0)||String(e)},r=0;r<t.length;r++){var o=t[r],a={selected:this.state.selectionIndex===r,"typeahead-option":!0,"u-pad-xs":!0},l=this.renderOption(o);e.push(s.default.cloneElement(l,{className:i.default(a,l.props.className),key:"option"+n(o),onMouseEnter:this._hover.bind(this,r),onClick:this.onSelect.bind(this,o)}))}return e},onSelect:function(e){return this.props.onSelect(e),this.reset()},renderOption:function(e){return this.props.renderQueryOption(e)},onKeyDown:function(e){switch(e.keyCode){case c.Key.UpArrow:return this._navigate(-1),e.preventDefault();case c.Key.DownArrow:return this._navigate(1),e.preventDefault();case c.Key.Enter:return this._selectSelectionIndex(e);case c.Key.Escape:if(Boolean(this.props.queryOptions))return this.close(),e.preventDefault();break;case c.Key.Tab:return this._selectSelectionIndex(e);default:return this.reset()}},_selectSelectionIndex:function(e){var t=this.getOptions();if(t.length){var n=this.state.selectionIndex;if(-1!==n)return this.onSelect(t[n]),e.preventDefault()}},reset:function(){return this._changeSelectionIndex(0)},close:function(){return"function"==typeof this.props.onClose&&this.props.onClose(),this.reset()},_hover:function(e){return this._changeSelectionIndex(e)},_navigate:function(e){var t=this.getOptions().length;if(t){var n=this.state.selectionIndex+e,i=t+1;return n<-1?n+=i:n>=t&&(n-=i),this._changeSelectionIndex(n)}},_changeSelectionIndex:function(e){return e!==this.state.selectionIndex&&"function"==typeof this.onSelectionIndexChange&&this.onSelectionIndexChange(e),this.setState({selectionIndex:e})}};t.TypeaheadSelectorMixin=p;var h=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={queryResults:null,value:t.props.value,focus:!1},t._onMouseOver=function(){return t.setState({focus:!0})},t._onMouseLeave=function(){return t.setState({focus:!1})},t._onBlur=function(){if(t.props.onBlur(),!t.state.focus)return t._clearResults()},t._onFocus=function(){return t._queryDataSource(t.state.value),t.refs.selector.reset()},t._renderInput=function(){var e=t.props.renderInput();return s.default.cloneElement(e,{ref:"input",onChange:function(n){return null!=e.props.onChange&&e.props.onChange(n),t._inputChanged(n)},onKeyDown:function(n){return null!=e.props.onKeyDown&&e.props.onKeyDown(n),t._proxyKeys(n)},onBlur:function(n){return null!=e.props.onBlur&&e.props.onBlur(n),t._onBlur(n)},onFocus:function(n){return null!=e.props.onFocus&&e.props.onFocus(n),t._onFocus(n)},placeholder:t.props.placeholder,value:t.state.value,name:t.props.name,autoComplete:"off",disabled:t.props.disabled})},t._renderSelector=function(){return s.default.cloneElement(t.props.renderSelector(),{ref:"selector",queryOptions:t.state.queryResults,onSelect:t._autocomplete,onClose:t._clearResults,maxVisible:t.props.maxVisible})},t._inputChanged=function(e){var n=e.target.value;return t.setState({value:e.target.value}),t.props.onChange(n),t._queryDataSource(n),t.refs.selector.reset()},t._getCurrentValue=function(){return o.findDOMNode(t.refs.input).value},t._queryDataSource=function(e){var n=function(e){return t.queryResults=e,t.setState({queryResults:t.queryResults})};return t.props.dataSource.query(e,n,(function(i){if(e===t._getCurrentValue()&&i&&i.length){var r=t.queryResults?t.queryResults.concat(i):i;return n(r)}}))},t._proxyKeys=function(e){return t.refs.selector.onKeyDown(e)},t._autocomplete=function(e){return o.findDOMNode(t.refs.input).focus(),e=t.props.renderCompletionText(e),t.setState({value:e}),t.props.onSelect(e),t._clearResults()},t._clearResults=function(){return t.queryResults=null,t.setState({queryResults:t.queryResults})},t}return n.__extends(t,e),t.prototype.render=function(){var e={};return e[this.props.customClass]=null!=this.props.customClass,s.default.createElement("div",{className:i.default(e),onMouseOver:this._onMouseOver,onMouseLeave:this._onMouseLeave},this._renderInput(),this._renderSelector())},t.prototype.componentWillReceiveProps=function(e){return this.setState({value:e.value})},t.displayName="Autocomplete",t.propTypes={customClass:a.default.string,maxVisible:a.default.number,dataSource:a.default.object.isRequired,onBlur:a.default.func,onSelect:a.default.func,onChange:a.default.func,placeholder:a.default.string,renderCompletionText:a.default.func.isRequired,renderInput:a.default.func.isRequired,renderSelector:a.default.func.isRequired,value:a.default.string,name:a.default.string,disabled:a.default.bool},t.defaultProps={value:"",maxVisible:7,onBlur:function(){},onSelect:function(e){},onChange:function(e){},renderCompletionText:function(e){return String(e)},renderInput:function(){return s.default.createElement("input",null)},renderSelector:function(){return s.default.createElement(_,null)},disabled:!1},t})(s.default.Component);t.Autocomplete=h;var _=r.default({displayName:"TypeaheadSelector",mixins:[p],propTypes:{customClass:a.default.string,maxVisible:a.default.number,onClose:a.default.func.isRequired,onSelect:a.default.func.isRequired,queryOptions:a.default.array,renderQueryOption:a.default.func.isRequired},getDefaultProps:function(){return{maxVisible:7,onClose:function(){},onSelect:function(e){},renderQueryOption:function(e){return s.default.createElement("li",null,String(e))}}},render:function(){if(!this.getOptions().length)return s.default.createElement("div",null);var e={"typeahead-selector":!0};return e[this.props.customClass]=null!=this.props.customClass,s.default.createElement("ul",{className:i.default(e)},this.renderOptions())}});t.TypeaheadSelector=_})),define("prod_assets_web_modules/bloodhound",["./common/_commonjsHelpers","jquery"],(function(e,t){"use strict";var n,i,r,s,o,a,l,u,c,d,p,h=(function(e){return e&&e.__esModule?e:{default:e}})(t),_={exports:{}};return n=_,e.commonjsGlobal,n.exports=(i=h.default,r={isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:i.isArray,isFunction:i.isFunction,isObject:i.isPlainObject,isUndefined:function(e){return void 0===e},isElement:function(e){return!(!e||1!==e.nodeType)},isJQuery:function(e){return e instanceof i},toStr:function(e){return r.isUndefined(e)||null===e?"":e+""},bind:i.proxy,each:function(e,t){i.each(e,(function(e,n){return t(n,e)}))},map:i.map,filter:i.grep,every:function(e,t){var n=!0;return e?(i.each(e,(function(i,r){if(!(n=t.call(null,r,i,e)))return!1})),!!n):n},some:function(e,t){var n=!1;return e?(i.each(e,(function(i,r){if(n=t.call(null,r,i,e))return!1})),!!n):n},mixin:i.extend,identity:function(e){return e},clone:function(e){return i.extend(!0,{},e)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function(e){return i.isFunction(e)?e:function(){return String(e)}},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var i,r;return function(){var s,o,a=this,l=arguments;return s=function(){i=null,n||(r=e.apply(a,l))},o=n&&!i,clearTimeout(i),i=setTimeout(s,t),o&&(r=e.apply(a,l)),r}},throttle:function(e,t){var n,i,r,s,o,a;return o=0,a=function(){o=new Date,r=null,s=e.apply(n,i)},function(){var l=new Date,u=t-(l-o);return n=this,i=arguments,u<=0?(clearTimeout(r),r=null,o=l,s=e.apply(n,i)):r||(r=setTimeout(a,u)),s}},stringify:function(e){return r.isString(e)?e:JSON.stringify(e)},noop:function(){}},"0.11.1",s=(function(){return{nonword:t,whitespace:e,obj:{nonword:n(t),whitespace:n(e)}};function e(e){return(e=r.toStr(e))?e.split(/\s+/):[]}function t(e){return(e=r.toStr(e))?e.split(/\W+/):[]}function n(e){return function(t){return t=r.isArray(t)?t:[].slice.call(arguments,0),function(n){var i=[];return r.each(t,(function(t){i=i.concat(e(r.toStr(n[t])))})),i}}}})(),o=(function(){function e(e){this.maxSize=r.isNumber(e)?e:100,this.reset(),this.maxSize<=0&&(this.set=this.get=i.noop)}function t(){this.head=this.tail=null}function n(e,t){this.key=e,this.val=t,this.prev=this.next=null}return r.mixin(e.prototype,{set:function(e,t){var i,r=this.list.tail;this.size>=this.maxSize&&(this.list.remove(r),delete this.hash[r.key],this.size--),(i=this.hash[e])?(i.val=t,this.list.moveToFront(i)):(i=new n(e,t),this.list.add(i),this.hash[e]=i,this.size++)},get:function(e){var t=this.hash[e];if(t)return this.list.moveToFront(t),t.val},reset:function(){this.size=0,this.hash={},this.list=new t}}),r.mixin(t.prototype,{add:function(e){this.head&&(e.next=this.head,this.head.prev=e),this.head=e,this.tail=this.tail||e},remove:function(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev},moveToFront:function(e){this.remove(e),this.add(e)}}),e})(),a=(function(){var e;try{(e=window.localStorage).setItem("~~~","!"),e.removeItem("~~~")}catch(t){e=null}function t(t,n){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+r.escapeRegExChars(this.prefix)),this.ls=n||e,!this.ls&&this._noop()}return r.mixin(t.prototype,{_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=r.noop},_safeSet:function(e,t){try{this.ls.setItem(e,t)}catch(e){"QuotaExceededError"===e.name&&(this.clear(),this._noop())}},get:function(e){return this.isExpired(e)&&this.remove(e),o(this.ls.getItem(this._prefix(e)))},set:function(e,t,i){return r.isNumber(i)?this._safeSet(this._ttlKey(e),s(n()+i)):this.ls.removeItem(this._ttlKey(e)),this._safeSet(this._prefix(e),s(t))},remove:function(e){return this.ls.removeItem(this._ttlKey(e)),this.ls.removeItem(this._prefix(e)),this},clear:function(){var e,t=a(this.keyMatcher);for(e=t.length;e--;)this.remove(t[e]);return this},isExpired:function(e){var t=o(this.ls.getItem(this._ttlKey(e)));return!!(r.isNumber(t)&&n()>t)}}),t;function n(){return(new Date).getTime()}function s(e){return JSON.stringify(r.isUndefined(e)?null:e)}function o(e){return i.parseJSON(e)}function a(t){var n,i,r=[],s=e.length;for(n=0;n<s;n++)(i=e.key(n)).match(t)&&r.push(i.replace(t,""));return r}})(),l=(function(){var e=0,t={},n=6,s=new o(10);function a(e){e=e||{},this.cancelled=!1,this.lastReq=null,this._send=e.transport,this._get=e.limiter?e.limiter(this._get):this._get,this._cache=!1===e.cache?new o(0):s}return a.setMaxPendingRequests=function(e){n=e},a.resetCache=function(){s.reset()},r.mixin(a.prototype,{_fingerprint:function(e){return(e=e||{}).url+e.type+i.param(e.data||{})},_get:function(i,r){var s,o,a=this;function l(e){r(null,e),a._cache.set(s,e)}function u(){r(!0)}function c(){e--,delete t[s],a.onDeckRequestArgs&&(a._get.apply(a,a.onDeckRequestArgs),a.onDeckRequestArgs=null)}s=this._fingerprint(i),this.cancelled||s!==this.lastReq||((o=t[s])?o.done(l).fail(u):e<n?(e++,t[s]=this._send(i).done(l).fail(u).always(c)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(e,t){var n,s;t=t||i.noop,e=r.isString(e)?{url:e}:e||{},s=this._fingerprint(e),this.cancelled=!1,this.lastReq=s,(n=this._cache.get(s))?t(null,n):this._get(e,t)},cancel:function(){this.cancelled=!0}}),a})(),u=window.SearchIndex=(function(){function e(e){(e=e||{}).datumTokenizer&&e.queryTokenizer||i.error("datumTokenizer and queryTokenizer are both required"),this.identify=e.identify||r.stringify,this.datumTokenizer=e.datumTokenizer,this.queryTokenizer=e.queryTokenizer,this.reset()}return r.mixin(e.prototype,{bootstrap:function(e){this.datums=e.datums,this.trie=e.trie},add:function(e){var i=this;e=r.isArray(e)?e:[e],r.each(e,(function(e){var s,o;i.datums[s=i.identify(e)]=e,o=t(i.datumTokenizer(e)),r.each(o,(function(e){var t,r,o;for(t=i.trie,r=e.split("");o=r.shift();)(t=t.c[o]||(t.c[o]=n())).i.push(s)}))}))},get:function(e){var t=this;return r.map(e,(function(e){return t.datums[e]}))},search:function(e){var n,i,s=this;return n=t(this.queryTokenizer(e)),r.each(n,(function(e){var t,n,r,o;if(i&&0===i.length)return!1;for(t=s.trie,n=e.split("");t&&(r=n.shift());)t=t.c[r];if(!t||0!==n.length)return i=[],!1;o=t.i.slice(0),i=i?(function(e,t){var n=0,i=0,r=[];e=e.sort(),t=t.sort();for(var s=e.length,o=t.length;n<s&&i<o;)e[n]<t[i]?n++:(e[n]>t[i]||(r.push(e[n]),n++),i++);return r})(i,o):o})),i?r.map((function(e){for(var t={},n=[],i=0,r=e.length;i<r;i++)t[e[i]]||(t[e[i]]=!0,n.push(e[i]));return n})(i),(function(e){return s.datums[e]})):[]},all:function(){var e=[];for(var t in this.datums)e.push(this.datums[t]);return e},reset:function(){this.datums={},this.trie=n()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),e;function t(e){return e=r.filter(e,(function(e){return!!e})),r.map(e,(function(e){return e.toLowerCase()}))}function n(){var e={i:[],c:{}};return e}})(),c=(function(){var e;function t(e){this.url=e.url,this.ttl=e.ttl,this.cache=e.cache,this.prepare=e.prepare,this.transform=e.transform,this.transport=e.transport,this.thumbprint=e.thumbprint,this.storage=new a(e.cacheKey)}return e={data:"data",protocol:"protocol",thumbprint:"thumbprint"},r.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(t){this.cache&&(this.storage.set(e.data,t,this.ttl),this.storage.set(e.protocol,location.protocol,this.ttl),this.storage.set(e.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var t,n={};return this.cache?(n.data=this.storage.get(e.data),n.protocol=this.storage.get(e.protocol),n.thumbprint=this.storage.get(e.thumbprint),t=n.thumbprint!==this.thumbprint||n.protocol!==location.protocol,n.data&&!t?n.data:null):null},fromNetwork:function(e){var t,n=this;e&&(t=this.prepare(this._settings()),this.transport(t).fail((function(){e(!0)})).done((function(t){e(null,n.transform(t))})))},clear:function(){return this.storage.clear(),this}}),t})(),d=(function(){function e(e){this.url=e.url,this.prepare=e.prepare,this.transform=e.transform,this.transport=new l({cache:e.cache,limiter:e.limiter,transport:e.transport})}return r.mixin(e.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(e,t){var n,i=this;if(t)return e=e||"",n=this.prepare(e,this._settings()),this.transport.get(n,(function(e,n){t(e?[]:i.transform(n))}))},cancelLastRequest:function(){this.transport.cancel()}}),e})(),p=(function(){return function(n){var s,o;return s={initialize:!0,identify:r.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},!(n=r.mixin(s,n||{})).datumTokenizer&&i.error("datumTokenizer is required"),!n.queryTokenizer&&i.error("queryTokenizer is required"),o=n.sorter,n.sorter=o?function(e){return e.sort(o)}:r.identity,n.local=r.isFunction(n.local)?n.local():n.local,n.prefetch=e(n.prefetch),n.remote=t(n.remote),n};function e(e){var t;return e?(t={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:r.identity,transform:r.identity,transport:null},e=r.isString(e)?{url:e}:e,!(e=r.mixin(t,e)).url&&i.error("prefetch requires url to be set"),e.transform=e.filter||e.transform,e.cacheKey=e.cacheKey||e.url,e.thumbprint="0.11.1"+e.thumbprint,e.transport=e.transport?n(e.transport):i.ajax,e):null}function t(e){var t;if(e)return t={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:r.identity,transport:null},e=r.isString(e)?{url:e}:e,!(e=r.mixin(t,e)).url&&i.error("remote requires url to be set"),e.transform=e.filter||e.transform,e.prepare=(function(e){var t,n,i;return t=e.prepare,n=e.replace,i=e.wildcard,t||(t=n?function(e,t){return t.url=n(t.url,e),t}:e.wildcard?function(e,t){return t.url=t.url.replace(i,encodeURIComponent(e)),t}:function(e,t){return t})})(e),e.limiter=(function(e){var t,n,i;return t=e.limiter,n=e.rateLimitBy,i=e.rateLimitWait,t||(t=/^throttle$/i.test(n)?(function(e){return function(t){return r.throttle(t,e)}})(i):(function(e){return function(t){return r.debounce(t,e)}})(i)),t})(e),e.transport=e.transport?n(e.transport):i.ajax,delete e.replace,delete e.wildcard,delete e.rateLimitBy,delete e.rateLimitWait,e}function n(e){return function(t){var n=i.Deferred();return e(t,(function(e){r.defer((function(){n.resolve(e)}))}),(function(e){r.defer((function(){n.reject(e)}))})),n}}})(),(function(){var e;function t(e){e=p(e),this.sorter=e.sorter,this.identify=e.identify,this.sufficient=e.sufficient,this.local=e.local,this.remote=e.remote?new d(e.remote):null,this.prefetch=e.prefetch?new c(e.prefetch):null,this.index=new u({identify:this.identify,datumTokenizer:e.datumTokenizer,queryTokenizer:e.queryTokenizer}),!1!==e.initialize&&this.initialize()}return e=window&&window.Bloodhound,t.noConflict=function(){return window&&(window.Bloodhound=e),t},t.tokenizers=s,r.mixin(t.prototype,{__ttAdapter:function(){var e=this;return this.remote?function(t,n,i){return e.search(t,n,i)}:function(t,n){return e.search(t,n)}},_loadPrefetch:function(){var e,t,n=this;return e=i.Deferred(),this.prefetch?(t=this.prefetch.fromCache())?(this.index.bootstrap(t),e.resolve()):this.prefetch.fromNetwork((function(t,i){if(t)return e.reject();n.add(i),n.prefetch.store(n.index.serialize()),e.resolve()})):e.resolve(),e.promise()},_initialize:function(){var e=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done((function(){e.add(e.local)})),this.initPromise},initialize:function(e){return!this.initPromise||e?this._initialize():this.initPromise},add:function(e){return this.index.add(e),this},get:function(e){return e=r.isArray(e)?e:[].slice.call(arguments),this.index.get(e)},search:function(e,t,n){var i,s=this;return i=this.sorter(this.index.search(e)),t(this.remote?i.slice():i),this.remote&&i.length<this.sufficient?this.remote.get(e,(function(e){var t=[];r.each(e,(function(e){!r.some(i,(function(t){return s.identify(e)===s.identify(t)}))&&t.push(e)})),n&&n(t)})):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return l.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),t})()),_.exports}));
//# sourceMappingURL=pkg-sharing-core.min.js-vflIOPEox.map